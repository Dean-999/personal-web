<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SamuelQ - ä¸ªäººç½‘ç«™</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="3d-card.js"></script>
    <script src="script.js"></script>
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <!-- ç§‘æŠ€æ„Ÿæ—…è¡Œåœ°å›¾ç»„ä»¶ -->
    <script src="tech-travel-map.js"></script>
    

    
    <script>
        // å…¨å±€å‡½æ•°å®šä¹‰ - ä¼˜åŒ–ç‰ˆæœ¬
        function createTravelDetailsCard() {
            const card = document.createElement('div');
            card.className = 'travel-details-card';
            card.innerHTML = `
                <div class="card-content">
                    <div class="card-header">
                        <h3 class="card-title">âœˆï¸ Travel Journey</h3>
                        <p class="card-subtitle">My adventures around the world</p>
                    </div>
                    
                    <div class="travel-stats-grid">
                        <div class="stat-item">
                            <div class="stat-icon">ğŸŒ</div>
                            <div class="stat-number">11</div>
                            <div class="stat-label">Destinations</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon">ğŸ™ï¸</div>
                            <div class="stat-number">15+</div>
                            <div class="stat-label">Cities</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon">ğŸ—ºï¸</div>
                            <div class="stat-number">3</div>
                            <div class="stat-label">Continents</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon">â°</div>
                            <div class="stat-number">12</div>
                            <div class="stat-label">Years</div>
                        </div>
                    </div>
                    
                    <div class="travel-timeline-mini">
                        <h4>Journey Timeline</h4>
                        <div class="timeline-items">
                            <div class="timeline-item-mini">
                                <span class="age">Age 3</span>
                                <span class="location">Thailand</span>
                            </div>
                            <div class="timeline-item-mini">
                                <span class="age">Age 6</span>
                                <span class="location">Taiwan</span>
                            </div>
                            <div class="timeline-item-mini">
                                <span class="age">Age 8</span>
                                <span class="location">Xi'an</span>
                            </div>
                            <div class="timeline-item-mini">
                                <span class="age">Age 9</span>
                                <span class="location">Hong Kong + Macau</span>
                            </div>
                            <div class="timeline-item-mini">
                                <span class="age">Age 10</span>
                                <span class="location">Singapore + Malaysia</span>
                            </div>
                            <div class="timeline-item-mini">
                                <span class="age">Age 12</span>
                                <span class="location">Dubai</span>
                            </div>
                            <div class="timeline-item-mini">
                                <span class="age">Age 14</span>
                                <span class="location">Yunnan + Guizhou</span>
                            </div>
                            <div class="timeline-item-mini">
                                <span class="age">Age 15</span>
                                <span class="location">USA</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="travel-quote">
                        <span class="quote-icon">ğŸ’­</span>
                        "Every journey shapes a new perspective"
                    </div>
                </div>
            `;
            
            return card;
        }
        
        // æ—§çš„showTravelDetailså‡½æ•°å·²åˆ é™¤ï¼Œä½¿ç”¨æ–°çš„å¼¹çª—ç‰ˆæœ¬
        
        // åˆå§‹åŒ–æ—…è¡Œè¯¦æƒ…æŒ‰é’® - å®Œå…¨ç‹¬ç«‹ç‰ˆæœ¬
        function initTravelDetailsButton() {
            console.log('ğŸš€ åˆå§‹åŒ–æ—…è¡Œè¯¦æƒ…æŒ‰é’® - å®Œå…¨ç‹¬ç«‹ç‰ˆæœ¬...');
            
            // æŸ¥æ‰¾æŒ‰é’®
            const statsButton = document.querySelector('.stats-button');
            if (!statsButton) {
                console.error('âŒ æ²¡æœ‰æ‰¾åˆ° stats-button æŒ‰é’®ï¼');
                return;
            }
            
            console.log('âœ… æ‰¾åˆ° stats-button æŒ‰é’®:', statsButton);
            console.log('æŒ‰é’®æ–‡æœ¬:', statsButton.textContent);
            console.log('æŒ‰é’®ç±»å:', statsButton.className);
            
            // ç§»é™¤æ‰€æœ‰ç°æœ‰çš„äº‹ä»¶ç›‘å¬å™¨
            const newButton = statsButton.cloneNode(true);
            statsButton.parentNode.replaceChild(newButton, statsButton);
            
            // é‡æ–°ç»‘å®šäº‹ä»¶
            newButton.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                console.log('ğŸ–±ï¸ View Travel Photos æŒ‰é’®è¢«ç‚¹å‡»ï¼');
                showPhotosModal();
            });
            
            // æ·»åŠ æ‚¬åœæ•ˆæœ
            newButton.style.cursor = 'pointer';
            newButton.style.transition = 'all 0.3s ease';
            
            newButton.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-2px)';
                this.style.boxShadow = '0 8px 25px rgba(0, 0, 0, 0.2)';
            });
            
            newButton.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
                this.style.boxShadow = '0 4px 15px rgba(0, 0, 0, 0.1)';
            });
            
            console.log('âœ… æ—…è¡Œè¯¦æƒ…æŒ‰é’®äº‹ä»¶ç»‘å®šå®Œæˆ');
        }
        

        

        

            
            // åˆå§‹åŒ–å›¾è¡¨åŠŸèƒ½
            function initCharts() {
                console.log('ğŸ“Š å¼€å§‹åˆå§‹åŒ–å›¾è¡¨...');
                
                // æ£€æŸ¥ Chart.js æ˜¯å¦å¯ç”¨
                if (typeof Chart === 'undefined') {
                    console.error('âŒ Chart.js æœªåŠ è½½');
                    return;
                }
                console.log('âœ… Chart.js å·²åŠ è½½');
                
                // åˆå§‹åŒ–æ—¶é—´åˆ†å¸ƒå›¾è¡¨
                const timeChartCtx = document.getElementById('timeChart');
                if (timeChartCtx) {
                    console.log('âœ… æ‰¾åˆ°æ—¶é—´å›¾è¡¨ç”»å¸ƒ');
                    const timeChart = new Chart(timeChartCtx, {
                        type: 'bar',
                        data: {
                            labels: ['2 years', '3 years', '4 years', '5 years', '6 years', '7 years', '8 years', '9 years', '10 years', '11 years', '12 years', '13 years', '14 years', '15 years', '16 years'],
                            datasets: [{
                                label: 'Learning',
                                data: [90, 90, 90, 90, 90, 85, 85, 80, 80, 75, 75, 75, 80, 70, 70],
                                backgroundColor: 'rgba(74, 144, 226, 0.8)',
                                borderColor: '#4A90E2',
                                borderWidth: 1
                            }, {
                                label: 'Go Strategy',
                                data: [0, 0, 0, 0, 0, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0],
                                backgroundColor: 'rgba(126, 211, 33, 0.8)',
                                borderColor: '#7ED321',
                                borderWidth: 1
                            }, {
                                label: 'Mineral Research',
                                data: [0, 0, 0, 0, 0, 0, 0, 10, 10, 10, 10, 10, 10, 10, 10],
                                backgroundColor: 'rgba(80, 227, 194, 0.8)',
                                borderColor: '#50E3C2',
                                borderWidth: 1
                            }, {
                                label: 'Swimming',
                                data: [0, 0, 0, 0, 0, 0, 0, 0, 10, 10, 10, 10, 10, 10, 10],
                                backgroundColor: 'rgba(245, 166, 35, 0.8)',
                                borderColor: '#F5A623',
                                borderWidth: 1
                            }, {
                                label: 'Guitar',
                                data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 10, 10, 10, 10, 10],
                                backgroundColor: 'rgba(189, 16, 224, 0.8)',
                                borderColor: '#BD10E0',
                                borderWidth: 1
                            }, {
                                label: 'Robotics & 3D',
                                data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15],
                                backgroundColor: 'rgba(255, 107, 107, 0.8)',
                                borderColor: '#FF6B6B',
                                borderWidth: 1
                            }, {
                                label: 'UI/UX Design',
                                data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15],
                                backgroundColor: 'rgba(78, 205, 196, 0.8)',
                                borderColor: '#4ECDC4',
                                borderWidth: 1
                            }, {
                                label: 'Coding',
                                data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 10],
                                backgroundColor: 'rgba(150, 206, 180, 0.8)',
                                borderColor: '#96CEB4',
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: false
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    max: 100
                                }
                            }
                        }
                    });
                    console.log('âœ… æ—¶é—´å›¾è¡¨åˆå§‹åŒ–å®Œæˆ');
                } else {
                    console.error('âŒ æœªæ‰¾åˆ°æ—¶é—´å›¾è¡¨ç”»å¸ƒ');
                }
                
                // åˆå§‹åŒ–å¹´é¾„æ´»åŠ¨åˆ†å¸ƒå›¾è¡¨
                const ageChartCtx = document.getElementById('ageChart');
                if (ageChartCtx) {
                    console.log('âœ… æ‰¾åˆ°å¹´é¾„æ´»åŠ¨å›¾è¡¨ç”»å¸ƒ');
                    const ageChart = new Chart(ageChartCtx, {
                        type: 'bar',
                        data: {
                            labels: ['0-2 years', '3-5 years', '6-8 years', '10-12 years', '12-14 years', '15 years', '15-16 years'],
                            datasets: [{
                                label: 'Family & Learning',
                                data: [100, 100, 80, 60, 80, 92, 45],
                                backgroundColor: '#4A90E2',
                                borderColor: '#4A90E2',
                                borderWidth: 0
                            }, {
                                label: 'Go Strategy',
                                data: [0, 0, 18, 0, 0, 0, 0],
                                backgroundColor: '#7ED321',
                                borderColor: '#7ED321',
                                borderWidth: 0
                            }, {
                                label: 'Mineral Interest',
                                data: [0, 0, 2, 5, 2, 0, 5],
                                backgroundColor: '#50E3C2',
                                borderColor: '#50E3C2',
                                borderWidth: 0
                            }, {
                                label: 'Swimming',
                                data: [0, 0, 0, 20, 10, 8, 15],
                                backgroundColor: '#F5A623',
                                borderColor: '#F5A623',
                                borderWidth: 0
                            }, {
                                label: 'Guitar',
                                data: [0, 0, 0, 15, 8, 0, 12],
                                backgroundColor: '#BD10E0',
                                borderColor: '#BD10E0',
                                borderWidth: 0
                            }, {
                                label: 'Robotics & 3D',
                                data: [0, 0, 0, 0, 0, 0, 8],
                                backgroundColor: '#FF6B6B',
                                borderColor: '#FF6B6B',
                                borderWidth: 0
                            }, {
                                label: 'UI/UX Design',
                                data: [0, 0, 0, 0, 0, 0, 8],
                                backgroundColor: '#4ECDC4',
                                borderColor: '#4ECDC4',
                                borderWidth: 0
                            }, {
                                label: 'Coding',
                                data: [0, 0, 0, 0, 0, 0, 7],
                                backgroundColor: '#96CEB4',
                                borderColor: '#96CEB4',
                                borderWidth: 0
                            }]
                        },
                        options: {
                            indexAxis: 'y', // æ°´å¹³æ¡å½¢å›¾
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: false
                                },
                                tooltip: {
                                    callbacks: {
                                        label: function(context) {
                                            const label = context.dataset.label;
                                            const value = context.parsed.x;
                                            const ageGroup = context.label;
                                            
                                            // è¿”å›è‹±æ–‡è¯¦ç»†è¯´æ˜
                                            return getActivityDescription(label, ageGroup, value);
                                        }
                                    }
                                }
                            },
                            scales: {
                                x: {
                                    stacked: true,
                                    beginAtZero: true,
                                    max: 100
                                },
                                y: {
                                    stacked: true
                                }
                            },
                            onClick: function(event, elements) {
                                if (elements.length > 0) {
                                    const element = elements[0];
                                    const datasetIndex = element.datasetIndex;
                                    const dataIndex = element.index;
                                    const dataset = this.data.datasets[datasetIndex];
                                    const label = dataset.label;
                                    const ageGroup = this.data.labels[dataIndex];
                                    const value = dataset.data[dataIndex];
                                    
                                    if (value > 0) {
                                        showActivityDetails(label, ageGroup, value);
                                    }
                                }
                            }
                        }
                    });
                    
                    // æ·»åŠ é¼ æ ‡æ ·å¼
                    ageChartCtx.style.cursor = 'pointer';
                    
                    console.log('âœ… å¹´é¾„æ´»åŠ¨å›¾è¡¨åˆå§‹åŒ–å®Œæˆ');
                } else {
                    console.error('âŒ æœªæ‰¾åˆ°å¹´é¾„æ´»åŠ¨å›¾è¡¨ç”»å¸ƒ');
                }
            }
            
            // è·å–æ´»åŠ¨è¯¦ç»†è¯´æ˜ï¼ˆè‹±æ–‡ï¼‰
            function getActivityDescription(activity, ageGroup, value) {
                const descriptions = {
                    'Family & Learning': {
                        '0-2 years': 'Early childhood development focused on family bonding and basic learning skills',
                        '3-5 years': 'Preschool years with family-centered education and fundamental knowledge acquisition',
                        '6-8 years': 'Primary school foundation with family support and structured learning',
                        '10-12 years': 'Middle childhood with family guidance and academic development',
                        '12-14 years': 'Early adolescence with family involvement and educational growth',
                        '15 years': 'Teenage years balancing family support and independent learning',
                        '15-16 years': 'Late adolescence with family backing and advanced learning pursuits'
                    },
                    'Go Strategy': {
                        '6-8 years': 'Introduction to strategic thinking through Go board game',
                        'default': 'Strategic game learning and cognitive development'
                    },
                    'Mineral Interest': {
                        '6-8 years': 'Initial curiosity about minerals and natural sciences',
                        '10-12 years': 'Growing fascination with geology and mineralogy',
                        '12-14 years': 'Continued interest in earth sciences and mineral research',
                        '15-16 years': 'Advanced study of minerals and geological sciences'
                    },
                    'Swimming': {
                        '10-12 years': 'Learning fundamental swimming techniques and water safety',
                        '12-14 years': 'Improving swimming skills and building endurance',
                        '15 years': 'Advanced swimming techniques and competitive training',
                        '15-16 years': 'Mastery of swimming styles and fitness maintenance'
                    },
                    'Guitar': {
                        '10-12 years': 'Beginning guitar lessons and basic chord learning',
                        '12-14 years': 'Intermediate guitar skills and song repertoire building',
                        '15-16 years': 'Advanced guitar techniques and musical expression'
                    },
                    'Robotics & 3D': {
                        '15-16 years': 'Exploring robotics engineering and 3D design technologies'
                    },
                    'UI/UX Design': {
                        '15-16 years': 'Learning user interface and user experience design principles'
                    },
                    'Coding': {
                        '15-16 years': 'Programming fundamentals and software development basics'
                    }
                };
                
                const activityDesc = descriptions[activity];
                if (activityDesc && activityDesc[ageGroup]) {
                    return `${activity}: ${activityDesc[ageGroup]} (${value}%)`;
                } else if (activityDesc && activityDesc.default) {
                    return `${activity}: ${activityDesc.default} (${value}%)`;
                } else {
                    return `${activity}: ${value}%`;
                }
            }
            
            // æ˜¾ç¤ºæ´»åŠ¨è¯¦ç»†ä¿¡æ¯å¼¹çª—
            function showActivityDetails(activity, ageGroup, value) {
                // ç§»é™¤ç°æœ‰çš„è¯¦æƒ…å¼¹çª—
                const existingPopup = document.querySelector('.activity-details-popup');
                if (existingPopup) {
                    existingPopup.remove();
                }
                
                const popup = document.createElement('div');
                popup.className = 'activity-details-popup';
                popup.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: white;
                    border: 2px solid #667eea;
                    border-radius: 16px;
                    padding: 25px;
                    max-width: 500px;
                    width: 90%;
                    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
                    z-index: 10000;
                    opacity: 0;
                    transition: all 0.3s ease;
                    font-family: 'Bree Serif', serif;
                `;
                
                const activityInfo = getActivityInfo(activity, ageGroup, value);
                
                popup.innerHTML = `
                    <div class="popup-header">
                        <h3 style="margin: 0 0 15px 0; color: #667eea; font-size: 24px;">
                            ${activityInfo.icon} ${activity}
                        </h3>
                        <div style="font-size: 18px; color: #666; margin-bottom: 20px;">
                            Age Group: <strong>${ageGroup}</strong> | Percentage: <strong>${value}%</strong>
                        </div>
                    </div>
                    
                    <div class="popup-content">
                        <h4 style="color: #333; margin: 0 0 15px 0; font-size: 18px;">Activity Description</h4>
                        <p style="color: #555; line-height: 1.6; margin: 0 0 20px 0; font-size: 16px;">
                            ${activityInfo.description}
                        </p>
                        
                        <h4 style="color: #333; margin: 0 0 15px 0; font-size: 18px;">Key Skills Developed</h4>
                        <ul style="color: #555; line-height: 1.6; margin: 0 0 20px 0; padding-left: 20px;">
                            ${activityInfo.skills.map(skill => `<li>${skill}</li>`).join('')}
                        </ul>
                        
                        <h4 style="color: #333; margin: 0 0 15px 0; font-size: 18px;">Impact on Development</h4>
                        <p style="color: #555; line-height: 1.6; margin: 0; font-size: 16px;">
                            ${activityInfo.impact}
                        </p>
                    </div>
                    
                    <div class="popup-footer" style="text-align: center; margin-top: 25px;">
                        <button onclick="this.parentElement.parentElement.remove()" 
                                style="background: #667eea; color: white; border: none; padding: 10px 25px; 
                                       border-radius: 8px; cursor: pointer; font-size: 16px; transition: all 0.3s ease;">
                            Close
                        </button>
                    </div>
                `;
                
                document.body.appendChild(popup);
                
                // æ˜¾ç¤ºåŠ¨ç”»
                setTimeout(() => {
                    popup.style.opacity = '1';
                }, 10);
                
                // ç‚¹å‡»å¤–éƒ¨å…³é—­
                popup.addEventListener('click', function(e) {
                    if (e.target === popup) {
                        popup.remove();
                    }
                });
            }
            
            // è·å–æ´»åŠ¨è¯¦ç»†ä¿¡æ¯
            function getActivityInfo(activity, ageGroup, value) {
                const activityData = {
                    'Family & Learning': {
                        icon: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦',
                        description: 'This activity represents the foundational learning experiences that occur within the family environment, including basic education, moral values, and life skills development.',
                        skills: ['Social interaction', 'Basic literacy', 'Moral reasoning', 'Life skills', 'Emotional intelligence'],
                        impact: 'Family & Learning provides the essential foundation for all other developmental areas, creating a secure base for future growth and learning.'
                    },
                    'Go Strategy': {
                        icon: 'ğŸ¯',
                        description: 'Go Strategy involves learning and practicing the ancient board game Go, which develops strategic thinking, planning, and analytical skills.',
                        skills: ['Strategic planning', 'Critical thinking', 'Patience', 'Analytical reasoning', 'Decision making'],
                        impact: 'Go Strategy enhances cognitive abilities and teaches valuable life lessons about planning, patience, and strategic thinking.'
                    },
                    'Mineral Interest': {
                        icon: 'ğŸ’',
                        description: 'Mineral Interest represents the fascination with geology, mineralogy, and earth sciences, fostering scientific curiosity and research skills.',
                        skills: ['Scientific observation', 'Research methodology', 'Classification skills', 'Natural curiosity', 'Analytical thinking'],
                        impact: 'Mineral Interest develops scientific thinking and research skills, potentially leading to future careers in geology or related sciences.'
                    },
                    'Swimming': {
                        icon: 'ğŸŠâ€â™‚ï¸',
                        description: 'Swimming activities focus on water safety, physical fitness, and competitive swimming techniques, promoting both health and athletic development.',
                        skills: ['Water safety', 'Physical coordination', 'Endurance building', 'Competitive spirit', 'Discipline'],
                        impact: 'Swimming improves physical fitness, builds confidence, and develops important life-saving water safety skills.'
                    },
                    'Guitar': {
                        icon: 'ğŸ¸',
                        description: 'Guitar learning involves musical education, instrument mastery, and artistic expression, developing both technical and creative abilities.',
                        skills: ['Musical theory', 'Fine motor skills', 'Creative expression', 'Performance confidence', 'Rhythm and timing'],
                        impact: 'Guitar playing enhances creativity, improves coordination, and provides a lifelong source of artistic expression and stress relief.'
                    },
                    'Robotics & 3D': {
                        icon: 'ğŸ¤–',
                        description: 'Robotics & 3D activities involve engineering principles, programming, and design thinking, preparing for future technology careers.',
                        skills: ['Engineering principles', 'Programming logic', '3D design', 'Problem solving', 'Innovation'],
                        impact: 'Robotics & 3D skills are essential for future careers in technology and engineering, fostering innovation and problem-solving abilities.'
                    },
                    'UI/UX Design': {
                        icon: 'ğŸ¨',
                        description: 'UI/UX Design focuses on user interface and user experience design principles, combining creativity with technical understanding.',
                        skills: ['Design thinking', 'User empathy', 'Visual communication', 'Prototyping', 'User research'],
                        impact: 'UI/UX Design skills are crucial in today\'s digital world, opening doors to careers in design, technology, and product development.'
                    },
                    'Coding': {
                        icon: 'ğŸ’»',
                        description: 'Coding activities involve learning programming languages and software development, developing logical thinking and problem-solving skills.',
                        skills: ['Logical thinking', 'Problem solving', 'Algorithm design', 'Debugging', 'Software development'],
                        impact: 'Coding skills are fundamental in the digital age, providing opportunities in technology, science, and various other fields requiring analytical thinking.'
                    }
                };
                
                return activityData[activity] || {
                    icon: 'ğŸ“š',
                    description: 'This activity contributes to personal development and skill building during this age period.',
                    skills: ['Skill development', 'Personal growth', 'Learning', 'Experience building'],
                    impact: 'This activity plays an important role in overall development and future success.'
                };
            }
            
            // å»¶è¿Ÿåˆå§‹åŒ–å›¾è¡¨ï¼Œç¡®ä¿DOMå®Œå…¨åŠ è½½
            setTimeout(() => {
                initCharts();
            }, 500);
            
            // å»¶è¿Ÿåˆå§‹åŒ– Aceternity Timeline
            setTimeout(() => {
                initAceternityTimeline();
            }, 800);
            
            // ä¸–ç•Œåœ°å›¾å®ç° - ä½¿ç”¨ Leaflet çœŸå®åœ°å›¾
            function initWorldMap() {
                console.log('ğŸ—ºï¸ åˆå§‹åŒ–çœŸå®ä¸–ç•Œåœ°å›¾...');
                
                const mapContainer = document.getElementById('worldMapCanvas');
                const svg = document.getElementById('connectionLines');
                const markers = document.getElementById('cityMarkers');
                
                if (!mapContainer || !svg || !markers) {
                    console.error('åœ°å›¾å…ƒç´ æœªæ‰¾åˆ°:', {
                        mapContainer: !!mapContainer,
                        svg: !!svg,
                        markers: !!markers
                    });
                    return;
                }
                
                // æ¸…ç©ºåŸæœ‰å†…å®¹
                mapContainer.innerHTML = '';
                svg.innerHTML = '';
                markers.innerHTML = '';
                
                // è®¾ç½®åœ°å›¾å®¹å™¨æ ·å¼
                mapContainer.style.width = '100%';
                mapContainer.style.height = '400px';
                mapContainer.style.minHeight = '400px';
                mapContainer.style.position = 'relative';
                mapContainer.style.zIndex = '1';
                
                console.log('ğŸ“ åœ°å›¾å®¹å™¨å‡†å¤‡å®Œæˆ');
                
                // æ—…è¡Œè·¯çº¿æ•°æ® - æ ¹æ®å®é™…æ—…è¡Œç»å†æ›´æ–°
                const travelRoutes = [
                    // å›½å†…æ—…è¡Œ
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 39.90, lng: 116.41, label: 'Beijing', country: 'China' }, type: 'domestic' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 34.26, lng: 108.94, label: 'Xi\'an', country: 'China' }, type: 'domestic' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 22.32, lng: 114.17, label: 'Hong Kong', country: 'China' }, type: 'domestic' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 22.20, lng: 113.54, label: 'Macau', country: 'China' }, type: 'domestic' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 25.05, lng: 102.73, label: 'Kunming', country: 'China' }, type: 'domestic' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 26.65, lng: 106.63, label: 'Guiyang', country: 'China' }, type: 'domestic' },
                    
                    // å›½é™…æ—…è¡Œ
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 13.76, lng: 100.50, label: 'Bangkok', country: 'Thailand' }, type: 'international' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 25.03, lng: 121.57, label: 'Taipei', country: 'Taiwan' }, type: 'international' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 1.35, lng: 103.82, label: 'Singapore', country: 'Singapore' }, type: 'international' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 3.14, lng: 101.69, label: 'Kuala Lumpur', country: 'Malaysia' }, type: 'international' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 25.20, lng: 55.27, label: 'Dubai', country: 'UAE' }, type: 'international' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 33.75, lng: -84.39, label: 'Atlanta', country: 'USA' }, type: 'international' }
                ];
                
                // åˆ›å»º Leaflet åœ°å›¾
                const map = L.map(mapContainer, {
                    center: [25, 0], // è°ƒæ•´ä¸­å¿ƒä½ç½®ï¼Œæ›´å¥½åœ°æ˜¾ç¤ºå…¨çƒ
                    zoom: 2, // é™ä½ç¼©æ”¾çº§åˆ«ï¼Œæ˜¾ç¤ºæ›´å¤šä¸–ç•Œåœ°å›¾
                    zoomControl: false, // ç¦ç”¨é»˜è®¤ç¼©æ”¾æ§ä»¶
                    attributionControl: false, // ç¦ç”¨é»˜è®¤å±æ€§æ§ä»¶
                    dragging: true,
                    touchZoom: true,
                    scrollWheelZoom: false, // ç¦ç”¨æ»šè½®ç¼©æ”¾
                    doubleClickZoom: false,
                    boxZoom: false,
                    keyboard: false,
                    tap: false,
                    maxBounds: [[-90, -180], [90, 180]], // é™åˆ¶åœ°å›¾è¾¹ç•Œ
                    maxBoundsViscosity: 1.0 // è¾¹ç•Œç²˜æ€§
                });
                
                // æ·»åŠ æ·±è‰²ä¸»é¢˜çš„ OpenStreetMap ç“¦ç‰‡
                const darkTileLayer = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
                    attribution: 'Â©OpenStreetMap contributors Â©CARTO',
                    subdomains: 'abcd',
                    maxZoom: 19
                });
                
                darkTileLayer.addTo(map);
                
                // æ·»åŠ ç¼©æ”¾æ§ä»¶
                L.control.zoom({
                    position: 'bottomright',
                    zoomInTitle: 'æ”¾å¤§',
                    zoomOutTitle: 'ç¼©å°'
                }).addTo(map);
                
                // éšè—é»˜è®¤ç¼©æ”¾æ§ä»¶
                setTimeout(() => {
                    const defaultZoomControl = document.querySelector('.leaflet-control-zoom');
                    if (defaultZoomControl) {
                        defaultZoomControl.style.display = 'none';
                    }
                }, 100);
                
                // æ·»åŠ æ‰‹åŠ¨ç¼©æ”¾æŒ‰é”®
                const manualZoomControl = L.Control.extend({
                    options: {
                        position: 'bottomleft'
                    },
                    
                    onAdd: function(map) {
                        console.log('ğŸ”§ å¼€å§‹åˆ›å»ºæ‰‹åŠ¨ç¼©æ”¾æ§ä»¶...');
                        
                        const container = L.DomUtil.create('div', 'manual-zoom-control');
                        container.style.cssText = `
                            position: absolute;
                            z-index: 1000;
                            margin: 10px;
                            pointer-events: auto;
                        `;
                        
                        container.innerHTML = `
                            <div style="
                                background: rgba(15, 23, 42, 0.95); 
                                color: white; 
                                border-radius: 8px; 
                                overflow: hidden; 
                                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
                                border: 1px solid rgba(14, 165, 233, 0.5);
                                display: block;
                                position: relative;
                                z-index: 1001;
                            ">
                                <button id="zoomInBtn" style="
                                    display: block; 
                                    width: 40px; 
                                    height: 40px; 
                                    background: linear-gradient(135deg, #0ea5e9, #3b82f6); 
                                    color: white; 
                                    border: none; 
                                    font-size: 18px; 
                                    font-weight: bold; 
                                    cursor: pointer; 
                                    transition: all 0.3s ease;
                                    outline: none;
                                ">+</button>
                                <button id="zoomOutBtn" style="
                                    display: block; 
                                    width: 40px; 
                                    height: 40px; 
                                    background: linear-gradient(135deg, #0ea5e9, #3b82f6); 
                                    color: white; 
                                    border: none; 
                                    font-size: 18px; 
                                    font-weight: bold; 
                                    cursor: pointer; 
                                    transition: all 0.3s ease;
                                    outline: none;
                                ">âˆ’</button>
                            </div>
                        `;
                        
                        console.log('ğŸ”§ æ‰‹åŠ¨ç¼©æ”¾æ§ä»¶HTMLå·²åˆ›å»º');
                        
                        // æ·»åŠ æ”¾å¤§åŠŸèƒ½
                        const zoomInBtn = container.querySelector('#zoomInBtn');
                        if (zoomInBtn) {
                            zoomInBtn.addEventListener('click', () => {
                                console.log('ğŸ” ç‚¹å‡»æ”¾å¤§æŒ‰é’®');
                                map.zoomIn();
                            });
                            
                            // æ·»åŠ æ‚¬åœæ•ˆæœ
                            zoomInBtn.addEventListener('mouseenter', () => {
                                zoomInBtn.style.transform = 'scale(1.1)';
                                zoomInBtn.style.background = 'linear-gradient(135deg, #0284c7, #2563eb)';
                            });
                            zoomInBtn.addEventListener('mouseleave', () => {
                                zoomInBtn.style.transform = 'scale(1)';
                                zoomInBtn.style.background = 'linear-gradient(135deg, #0ea5e9, #3b82f6)';
                            });
                        } else {
                            console.error('âŒ æ”¾å¤§æŒ‰é’®æœªæ‰¾åˆ°');
                        }
                        
                        // æ·»åŠ ç¼©å°åŠŸèƒ½
                        const zoomOutBtn = container.querySelector('#zoomOutBtn');
                        if (zoomOutBtn) {
                            zoomOutBtn.addEventListener('click', () => {
                                console.log('ğŸ” ç‚¹å‡»ç¼©å°æŒ‰é’®');
                                map.zoomOut();
                            });
                            
                            // æ·»åŠ æ‚¬åœæ•ˆæœ
                            zoomOutBtn.addEventListener('mouseenter', () => {
                                zoomOutBtn.style.transform = 'scale(1.1)';
                                zoomOutBtn.style.background = 'linear-gradient(135deg, #0284c7, #2563eb)';
                            });
                            zoomOutBtn.addEventListener('mouseleave', () => {
                                zoomOutBtn.style.transform = 'scale(1)';
                                zoomOutBtn.style.background = 'linear-gradient(135deg, #0ea5e9, #3b82f6)';
                            });
                        } else {
                            console.error('âŒ ç¼©å°æŒ‰é’®æœªæ‰¾åˆ°');
                        }
                        
                        console.log('âœ… æ‰‹åŠ¨ç¼©æ”¾æ§ä»¶åˆ›å»ºå®Œæˆ');
                        return container;
                    }
                });
                
                // å¼ºåˆ¶æ·»åŠ æ‰‹åŠ¨ç¼©æ”¾æ§ä»¶
                const manualControl = new manualZoomControl();
                map.addControl(manualControl);
                
                // ç›´æ¥åœ¨åœ°å›¾å®¹å™¨ä¸­æ·»åŠ ç¼©æ”¾æŒ‰é’®ï¼ˆå¤‡ç”¨æ–¹æ¡ˆï¼‰
                setTimeout(() => {
                    console.log('ğŸ”§ æ·»åŠ å¤‡ç”¨ç¼©æ”¾æŒ‰é’®åˆ°åœ°å›¾å®¹å™¨...');
                    const mapContainer = document.getElementById('worldMapCanvas');
                    if (mapContainer) {
                        // åˆ›å»ºå¤‡ç”¨ç¼©æ”¾æ§ä»¶å®¹å™¨
                        const backupContainer = document.createElement('div');
                        backupContainer.id = 'backupZoomControls';
                        backupContainer.style.cssText = `
                            position: absolute;
                            bottom: 20px;
                            left: 20px;
                            z-index: 1000;
                            display: block;
                            pointer-events: auto;
                        `;
                        
                        backupContainer.innerHTML = `
                            <div style="
                                background: rgba(15, 23, 42, 0.95); 
                                color: white; 
                                border-radius: 8px; 
                                overflow: hidden; 
                                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3), 0 0 15px rgba(14, 165, 233, 0.3);
                                border: 1px solid rgba(14, 165, 233, 0.6);
                                position: relative;
                            ">
                                <div style="
                                    position: absolute;
                                    top: 0;
                                    left: 0;
                                    right: 0;
                                    height: 1px;
                                    background: linear-gradient(90deg, transparent, #0ea5e9, transparent);
                                    animation: scan 3s linear infinite;
                                "></div>
                                <button id="backupZoomInBtn" style="
                                    display: block; 
                                    width: 40px; 
                                    height: 40px; 
                                    background: linear-gradient(135deg, #0ea5e9, #3b82f6); 
                                    color: white; 
                                    border: none; 
                                    font-size: 18px; 
                                    font-weight: bold; 
                                    cursor: pointer; 
                                    transition: all 0.3s ease;
                                    outline: none;
                                    position: relative;
                                    overflow: hidden;
                                ">+</button>
                                <button id="backupZoomOutBtn" style="
                                    display: block; 
                                    width: 40px; 
                                    height: 40px; 
                                    background: linear-gradient(135deg, #0ea5e9, #3b82f6); 
                                    color: white; 
                                    border: none; 
                                    font-size: 18px; 
                                    font-weight: bold; 
                                    cursor: pointer; 
                                    transition: all 0.3s ease;
                                    outline: none;
                                    position: relative;
                                    overflow: hidden;
                                ">âˆ’</button>
                            </div>
                        `;
                        
                        // æ·»åŠ åˆ°åœ°å›¾å®¹å™¨
                        mapContainer.appendChild(backupContainer);
                        console.log('âœ… å¤‡ç”¨ç¼©æ”¾æŒ‰é’®å·²æ·»åŠ åˆ°åœ°å›¾å®¹å™¨');
                        
                        // æ·»åŠ åŠŸèƒ½
                        const backupZoomInBtn = document.getElementById('backupZoomInBtn');
                        const backupZoomOutBtn = document.getElementById('backupZoomOutBtn');
                        
                        if (backupZoomInBtn) {
                            backupZoomInBtn.addEventListener('click', () => {
                                console.log('ğŸ” ç‚¹å‡»å¤‡ç”¨æ”¾å¤§æŒ‰é’®');
                                map.zoomIn();
                            });
                            
                            backupZoomInBtn.addEventListener('mouseenter', () => {
                                backupZoomInBtn.style.transform = 'scale(1.1)';
                                backupZoomInBtn.style.background = 'linear-gradient(135deg, #0284c7, #2563eb)';
                            });
                            backupZoomInBtn.addEventListener('mouseleave', () => {
                                backupZoomInBtn.style.transform = 'scale(1)';
                                backupZoomInBtn.style.background = 'linear-gradient(135deg, #0ea5e9, #3b82f6)';
                            });
                        }
                        
                        if (backupZoomOutBtn) {
                            backupZoomOutBtn.addEventListener('click', () => {
                                console.log('ğŸ” ç‚¹å‡»å¤‡ç”¨ç¼©å°æŒ‰é’®');
                                map.zoomOut();
                            });
                            
                            backupZoomOutBtn.addEventListener('mouseenter', () => {
                                backupZoomOutBtn.style.transform = 'scale(1.1)';
                                backupZoomOutBtn.style.background = 'linear-gradient(135deg, #0284c7, #2563eb)';
                            });
                            backupZoomOutBtn.addEventListener('mouseleave', () => {
                                backupZoomOutBtn.style.transform = 'scale(1)';
                                backupZoomOutBtn.style.background = 'linear-gradient(135deg, #0ea5e9, #3b82f6)';
                            });
                        }
                    }
                }, 500);
                
                // åœ°å›¾åŠ è½½å®Œæˆåï¼Œè°ƒæ•´è§†å›¾ä»¥æ˜¾ç¤ºæ‰€æœ‰æ ‡è®°ç‚¹
                map.whenReady(() => {
                    // è®¡ç®—æ‰€æœ‰åŸå¸‚çš„è¾¹ç•Œ
                    const allCities = [];
                    travelRoutes.forEach(route => {
                        allCities.push([route.start.lat, route.start.lng]);
                        allCities.push([route.end.lat, route.end.lng]);
                    });
                    
                    // ç¡®ä¿åœ°å›¾èƒ½æ˜¾ç¤ºæ‰€æœ‰åŸå¸‚
                    const bounds = L.latLngBounds(allCities);
                    map.fitBounds(bounds, { 
                        padding: [50, 50], // æ·»åŠ è¾¹è·
                        maxZoom: 4 // é™åˆ¶æœ€å¤§ç¼©æ”¾çº§åˆ«
                    });
                });
                
                console.log('ğŸ—ºï¸ Leaflet åœ°å›¾åˆ›å»ºå®Œæˆ');
                
                // åˆ›å»ºè¿æ¥çº¿
                function createConnectionLines() {
                    console.log('ğŸ”— å¼€å§‹åˆ›å»ºè¿æ¥çº¿...');
                    
                    travelRoutes.forEach((route, i) => {
                        // åˆ›å»ºæ›²çº¿è·¯å¾„
                        const startPoint = [route.start.lat, route.start.lng];
                        const endPoint = [route.end.lat, route.end.lng];
                        
                        // è®¡ç®—ä¸­é—´æ§åˆ¶ç‚¹ï¼ˆåˆ›å»ºå¼§å½¢æ•ˆæœï¼‰
                        const midLat = (startPoint[0] + endPoint[0]) / 2;
                        const midLng = (startPoint[1] + endPoint[1]) / 2;
                        
                        // æ ¹æ®èˆªçº¿ç±»å‹è°ƒæ•´å¼¯æ›²ç¨‹åº¦
                        const baseOffset = route.type === 'international' ? 45 : 25; // å›½é™…èˆªçº¿å¼¯æ›²æ›´å¤§
                        const offset = baseOffset + Math.random() * 10; // æ·»åŠ éšæœºå˜åŒ–
                        
                        // åˆ›å»ºå¼§å½¢è·¯å¾„
                        const curvePoints = [];
                        const steps = 80; // å¢åŠ æ­¥æ•°ï¼Œè®©æ›²çº¿æ›´å¹³æ»‘
                        
                        for (let j = 0; j <= steps; j++) {
                            const t = j / steps;
                            const lat = startPoint[0] + (endPoint[0] - startPoint[0]) * t;
                            const lng = startPoint[1] + (endPoint[1] - startPoint[1]) * t;
                            
                            // æ·»åŠ å¼§å½¢åç§» - ä½¿ç”¨æ­£å¼¦å‡½æ•°åˆ›å»ºæ›´è‡ªç„¶çš„æ›²çº¿
                            const curveOffset = Math.sin(Math.PI * t) * offset;
                            const curveLat = lat + curveOffset * 0.015; // å¢åŠ å‚ç›´åç§»
                            
                            // æ·»åŠ æ°´å¹³æ–¹å‘çš„è½»å¾®å¼¯æ›²
                            const horizontalCurve = Math.sin(Math.PI * t) * (route.type === 'international' ? 20 : 12);
                            const curveLng = lng + horizontalCurve * 0.01;
                            
                            // æ·»åŠ é¢å¤–çš„å¼¯æ›²å˜åŒ–ï¼Œè®©æ¯æ¡èˆªçº¿æ›´ç‹¬ç‰¹
                            const extraCurve = Math.sin(Math.PI * t * 2) * (route.type === 'international' ? 12 : 6);
                            const finalLat = curveLat + extraCurve * 0.005;
                            
                            curvePoints.push([finalLat, curveLng]);
                        }
                        
                        // åˆ›å»ºè·¯å¾„
                        const path = L.polyline(curvePoints, {
                            color: '#0ea5e9', // è“è‰²è§å…‰çº¿
                            weight: 2, // ä¸»çº¿æ¡
                            opacity: 0,
                            dashArray: '8, 8', // è™šçº¿æ•ˆæœ
                            lineCap: 'round',
                            lineJoin: 'round'
                        });
                        
                        // æ·»åŠ å‘å…‰æ•ˆæœ
                        const glowPath = L.polyline(curvePoints, {
                            color: '#0ea5e9', // è“è‰²è§å…‰
                            weight: 6, // ä¸­ç­‰å‘å…‰
                            opacity: 0,
                            fill: false
                        });
                        
                        // æ·»åŠ æ›´å¼ºçš„å‘å…‰æ•ˆæœ
                        const strongGlowPath = L.polyline(curvePoints, {
                            color: '#0ea5e9',
                            weight: 10, // å¼ºå‘å…‰
                            opacity: 0,
                            fill: false
                        });
                        
                        // æ·»åŠ æœ€å¤–å±‚å‘å…‰æ•ˆæœ
                        const outerGlowPath = L.polyline(curvePoints, {
                            color: '#0ea5e9',
                            weight: 16, // æœ€å¤–å±‚å‘å…‰
                            opacity: 0,
                            fill: false
                        });
                        
                        outerGlowPath.addTo(map);
                        strongGlowPath.addTo(map);
                        glowPath.addTo(map);
                        path.addTo(map);
                        
                        // å»¶è¿Ÿæ˜¾ç¤ºåŠ¨ç”»
                        setTimeout(() => {
                            path.setStyle({ opacity: 1 });
                            glowPath.setStyle({ opacity: 0.6 });
                            strongGlowPath.setStyle({ opacity: 0.4 });
                            outerGlowPath.setStyle({ opacity: 0.2 });
                            
                            // è™šçº¿åŠ¨ç”» - æ¨¡æ‹Ÿé£æœºç§»åŠ¨
                            let dashOffset = 20;
                            const animateDash = () => {
                                dashOffset -= 1.2; // æ›´å¿«çš„è™šçº¿åŠ¨ç”»
                                if (dashOffset < 0) dashOffset = 20;
                                path.setStyle({ dashOffset: dashOffset });
                                requestAnimationFrame(animateDash);
                            };
                            animateDash();
                            
                            // è§å…‰å‘¼å¸æ•ˆæœ
                            let glowOpacity = 0.2;
                            let glowDirection = 1;
                            const animateGlow = () => {
                                glowOpacity += 0.03 * glowDirection;
                                if (glowOpacity >= 0.6) glowDirection = -1;
                                if (glowOpacity <= 0.1) glowDirection = 1;
                                
                                strongGlowPath.setStyle({ opacity: glowOpacity });
                                outerGlowPath.setStyle({ opacity: glowOpacity * 0.5 });
                                requestAnimationFrame(animateGlow);
                            };
                            animateGlow();
                            
                            // æ·»åŠ è„‰å†²æ•ˆæœ
                            let pulseOpacity = 0.4;
                            let pulseDirection = 1;
                            const animatePulse = () => {
                                pulseOpacity += 0.02 * pulseDirection;
                                if (pulseOpacity >= 0.8) pulseDirection = -1;
                                if (pulseOpacity <= 0.2) pulseDirection = 1;
                                
                                glowPath.setStyle({ opacity: pulseOpacity });
                                requestAnimationFrame(animatePulse);
                            };
                            animatePulse();
                            
                        }, i * 400); // è°ƒæ•´å»¶è¿Ÿï¼Œåˆ›é€ æ³¢æµªæ•ˆæœ
                        
                        console.log(`ğŸ”— è¿æ¥çº¿ ${i + 1}: ${route.start.label} -> ${route.end.label} (${route.type})`);
                    });
                }
                
                // åˆ›å»ºåŸå¸‚æ ‡è®°
                function createCityMarkers() {
                    console.log('ğŸ“ å¼€å§‹åˆ›å»ºåŸå¸‚æ ‡è®°...');
                    
                    const allCities = new Set();
                    travelRoutes.forEach(route => {
                        allCities.add(route.start);
                        allCities.add(route.end);
                    });
                    
                    Array.from(allCities).forEach((city, i) => {
                        // åˆ›å»ºåŸå¸‚æ ‡è®°
                        const marker = L.circleMarker([city.lat, city.lng], {
                            radius: city.label === 'Chengdu' ? 12 : 8,
                            fillColor: city.label === 'Chengdu' ? '#f59e0b' : '#0ea5e9', // æˆéƒ½ä¿æŒé‡‘è‰²ï¼Œå…¶ä»–åŸå¸‚ç”¨è“è‰²
                            color: '#ffffff',
                            weight: city.label === 'Chengdu' ? 3 : 2,
                            opacity: 1,
                            fillOpacity: 0.8
                        });
                        
                        // æ·»åŠ è„‰å†²åŠ¨ç”»
                        marker.setStyle({ opacity: 0 });
                        marker.addTo(map);
                        
                        // ä¸ºè“è‰²åŸå¸‚æ ‡è®°æ·»åŠ è§å…‰æ•ˆæœ
                        if (city.label !== 'Chengdu') {
                            // åˆ›å»ºè§å…‰å…‰ç¯
                            const glowMarker = L.circleMarker([city.lat, city.lng], {
                                radius: city.label === 'Chengdu' ? 16 : 12,
                                fillColor: 'transparent',
                                color: '#0ea5e9',
                                weight: 2,
                                opacity: 0,
                                fillOpacity: 0
                            });
                            
                            glowMarker.addTo(map);
                            
                            // è§å…‰åŠ¨ç”»
                            let glowRadius = city.label === 'Chengdu' ? 16 : 12;
                            let glowDirection = 1;
                            const animateGlowMarker = () => {
                                glowRadius += 0.5 * glowDirection;
                                if (glowRadius >= (city.label === 'Chengdu' ? 20 : 16)) glowDirection = -1;
                                if (glowRadius <= (city.label === 'Chengdu' ? 16 : 12)) glowDirection = 1;
                                
                                glowMarker.setStyle({ 
                                    radius: glowRadius,
                                    opacity: 0.6 - (glowRadius - (city.label === 'Chengdu' ? 16 : 12)) * 0.1
                                });
                                requestAnimationFrame(animateGlowMarker);
                            };
                            animateGlowMarker();
                        }
                        
                        // åˆ›å»ºåŸå¸‚æ ‡ç­¾
                        const popup = L.popup({
                            className: 'city-popup',
                            closeButton: false,
                            autoClose: false,
                            closeOnClick: false
                        }).setContent(`
                            <div style="text-align: center; font-family: Arial, sans-serif;">
                                <div style="font-weight: bold; font-size: 14px; margin-bottom: 4px; color: ${city.label === 'Chengdu' ? '#f59e0b' : '#0ea5e9'};">${city.label}</div>
                                <div style="font-size: 11px; opacity: 0.8;">${city.country}</div>
                            </div>
                        `);
                        
                        // æ‚¬åœæ•ˆæœ
                        marker.on('mouseover', function() {
                            this.setStyle({ 
                                radius: city.label === 'Chengdu' ? 16 : 12,
                                fillOpacity: 1,
                                weight: city.label === 'Chengdu' ? 4 : 3
                            });
                            popup.setLatLng([city.lat, city.lng]).openOn(map);
                        });
                        
                        marker.on('mouseout', function() {
                            this.setStyle({ 
                                radius: city.label === 'Chengdu' ? 12 : 8,
                                fillOpacity: 0.8,
                                weight: city.label === 'Chengdu' ? 3 : 2
                            });
                            map.closePopup(popup);
                        });
                        
                        // å»¶è¿Ÿæ˜¾ç¤º
                        setTimeout(() => {
                            marker.setStyle({ opacity: 1 });
                        }, i * 300);
                        
                        console.log(`ğŸ“ åŸå¸‚æ ‡è®°: ${city.label} at (${city.lat}, ${city.lng})`);
                    });
                }
                
                // æ·»åŠ è‡ªå®šä¹‰åœ°å›¾æ§ä»¶
                const customControl = L.Control.extend({
                    options: {
                        position: 'topright'
                    },
                    
                    onAdd: function(map) {
                        const container = L.DomUtil.create('div', 'custom-map-control');
                        container.innerHTML = `
                            <div style="
                                background: rgba(15, 23, 42, 0.95); 
                                color: white; 
                                padding: 15px; 
                                border-radius: 12px; 
                                font-family: Arial, sans-serif; 
                                font-size: 12px; 
                                backdrop-filter: blur(20px); 
                                border: 1px solid rgba(14, 165, 233, 0.6); 
                                box-shadow: 0 10px 40px rgba(14, 165, 233, 0.4), 0 0 20px rgba(14, 165, 233, 0.2);
                                position: relative;
                                overflow: hidden;
                            ">
                                <div style="
                                    position: absolute;
                                    top: 0;
                                    left: 0;
                                    right: 0;
                                    height: 2px;
                                    background: linear-gradient(90deg, transparent, #0ea5e9, transparent);
                                    animation: scan 2s linear infinite;
                                "></div>
                                <div style="font-weight: bold; margin-bottom: 8px; color: #0ea5e9; font-size: 13px;">Global Connectivity</div>
                                <div style="opacity: 0.9; margin-bottom: 6px;">12 Routes â€¢ 13 Cities</div>
                                <div style="font-size: 10px; opacity: 0.7; margin-bottom: 8px;">6 Domestic â€¢ 6 International</div>
                                <button id="resetViewBtn" style="
                                    background: linear-gradient(135deg, #0ea5e9, #3b82f6); 
                                    color: white; 
                                    border: none; 
                                    padding: 6px 12px; 
                                    border-radius: 6px; 
                                    font-size: 10px; 
                                    cursor: pointer; 
                                    transition: all 0.3s ease; 
                                    width: 100%;
                                    position: relative;
                                    overflow: hidden;
                                ">Reset View</button>
                            </div>
                        `;
                        
                        // æ·»åŠ é‡ç½®è§†å›¾åŠŸèƒ½
                        const resetBtn = container.querySelector('#resetViewBtn');
                        resetBtn.addEventListener('click', () => {
                            const allCities = [];
                            travelRoutes.forEach(route => {
                                allCities.push([route.start.lat, route.start.lng]);
                                allCities.push([route.end.lat, route.end.lng]);
                            });
                            
                            const bounds = L.latLngBounds(allCities);
                            map.fitBounds(bounds, { 
                                padding: [50, 50],
                                maxZoom: 4
                            });
                        });
                        
                        return container;
                    }
                });
                
                map.addControl(new customControl());
                
                // æ·»åŠ åŠ¨ç”»æ ·å¼
                if (!document.getElementById('mapStyles')) {
                    const style = document.createElement('style');
                    style.id = 'mapStyles';
                    style.textContent = `
                        .custom-map-control {
                            margin: 10px;
                        }
                        
                        .manual-zoom-control {
                            margin: 10px;
                        }
                        
                        .manual-zoom-control button:hover {
                            background: linear-gradient(135deg, #0284c7, #2563eb) !important;
                        }
                        
                        /* å¼ºåˆ¶æ˜¾ç¤ºæ‰‹åŠ¨ç¼©æ”¾æ§ä»¶ */
                        .manual-zoom-control {
                            display: block !important;
                            visibility: visible !important;
                            opacity: 1 !important;
                            position: absolute !important;
                            z-index: 1000 !important;
                            pointer-events: auto !important;
                        }
                        
                        .manual-zoom-control button {
                            display: block !important;
                            visibility: visible !important;
                            opacity: 1 !important;
                        }
                        
                        /* å¤‡ç”¨ç¼©æ”¾æ§ä»¶æ ·å¼ */
                        #backupZoomControls {
                            display: block !important;
                            visibility: visible !important;
                            opacity: 1 !important;
                        }
                        
                        /* æ‰«æåŠ¨ç”» */
                        @keyframes scan {
                            0% { transform: translateX(-100%); }
                            100% { transform: translateX(100%); }
                        }
                        
                        /* åœ°å›¾æ§ä»¶æ‚¬åœæ•ˆæœ */
                        .custom-map-control button:hover {
                            background: linear-gradient(135deg, #0284c7, #2563eb) !important;
                            transform: translateY(-1px);
                            box-shadow: 0 4px 15px rgba(14, 165, 233, 0.4);
                        }
                        
                        .city-popup .leaflet-popup-content-wrapper {
                            background: rgba(15, 23, 42, 0.95);
                            color: white;
                            border: 1px solid rgba(59, 130, 246, 0.3);
                            border-radius: 8px;
                            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
                        }
                        
                        .city-popup .leaflet-popup-tip {
                            background: rgba(15, 23, 42, 0.95);
                            border: 1px solid rgba(59, 130, 246, 0.3);
                        }
                        
                        .leaflet-container {
                            background: #0f172a;
                        }
                        
                        .leaflet-control-attribution {
                            display: none;
                        }
                        
                        .leaflet-control-zoom {
                            display: none !important;
                        }
                    `;
                    document.head.appendChild(style);
                }
                
                // åˆå§‹åŒ–åœ°å›¾å…ƒç´ 
                setTimeout(() => {
                    createConnectionLines();
                    setTimeout(() => {
                        createCityMarkers();
                        
                        // æµ‹è¯•æ‰‹åŠ¨ç¼©æ”¾æ§ä»¶
                        console.log('ğŸ§ª æµ‹è¯•æ‰‹åŠ¨ç¼©æ”¾æ§ä»¶...');
                        const manualControlElement = document.querySelector('.manual-zoom-control');
                        const backupControls = document.getElementById('backupZoomControls');
                        
                        if (manualControlElement) {
                            console.log('âœ… Leaflet æ‰‹åŠ¨ç¼©æ”¾æ§ä»¶æ­£å¸¸');
                        } else if (backupControls) {
                            console.log('âœ… å¤‡ç”¨ç¼©æ”¾æ§ä»¶æ­£å¸¸');
                            backupControls.style.display = 'block';
                        } else {
                            console.error('âŒ æ‰€æœ‰ç¼©æ”¾æ§ä»¶éƒ½æœªæ‰¾åˆ°');
                        }
                        
                    }, 1000);
                }, 1500);
                
                console.log('âœ… çœŸå®ä¸–ç•Œåœ°å›¾åˆå§‹åŒ–å®Œæˆ');
            }
        
        // åˆå§‹åŒ–æ—¶é—´çº¿ç‰¹æ•ˆ
        function initTimelineEffects() {
            console.log('ğŸ¯ åˆå§‹åŒ–æ—¶é—´çº¿ç‰¹æ•ˆ...');
            
            const timelineItems = document.querySelectorAll('.timeline-item');
            timelineItems.forEach((item, index) => {
                // æ·»åŠ ç‚¹å‡»å±•å¼€æ•ˆæœ
                item.addEventListener('click', function() {
                    const details = this.querySelector('.timeline-details');
                    if (details) {
                        details.style.display = details.style.display === 'none' ? 'flex' : 'none';
                    }
                });
                
                // æ·»åŠ æ‚¬åœæ•ˆæœ
                item.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateX(10px)';
                });
                
                item.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateX(0)';
                });
            });
            
            console.log('âœ… æ—¶é—´çº¿ç‰¹æ•ˆåˆå§‹åŒ–å®Œæˆ');
        }
        
        // åˆå§‹åŒ– Aceternity UI Timeline æ»šåŠ¨è¿›åº¦æ¡
        function initAceternityTimeline() {
            console.log('ğŸ¯ åˆå§‹åŒ– Aceternity UI Timeline...');
            
            const timelineContainer = document.querySelector('.aceternity-timeline-container');
            const progressBeam = document.querySelector('.timeline-progress-beam');
            
            if (!timelineContainer || !progressBeam) {
                console.log('âš ï¸ æœªæ‰¾åˆ° Aceternity Timeline å…ƒç´ ');
                return;
            }
            
            // è·å–æ—¶é—´çº¿å®¹å™¨çš„é«˜åº¦
            const containerHeight = timelineContainer.offsetHeight;
            const windowHeight = window.innerHeight;
            
            // ç›‘å¬æ»šåŠ¨äº‹ä»¶
            window.addEventListener('scroll', () => {
                const scrollTop = window.pageYOffset;
                const containerTop = timelineContainer.offsetTop;
                const containerBottom = containerTop + containerHeight;
                
                // è®¡ç®—æ»šåŠ¨è¿›åº¦
                if (scrollTop >= containerTop && scrollTop <= containerBottom) {
                    const progress = (scrollTop - containerTop) / (containerHeight - windowHeight);
                    const clampedProgress = Math.max(0, Math.min(1, progress));
                    
                    // æ›´æ–°è¿›åº¦æ¡é«˜åº¦
                    progressBeam.style.height = `${clampedProgress * 100}%`;
                    
                    // æ·»åŠ å‘å…‰æ•ˆæœ
                    if (clampedProgress > 0.5) {
                        progressBeam.style.boxShadow = '0 0 20px rgba(102, 126, 234, 0.5)';
                    } else {
                        progressBeam.style.boxShadow = 'none';
                    }
                }
            });
            
            // æ·»åŠ æ»šåŠ¨è§¦å‘çš„åŠ¨ç”»
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };
            
            const timelineObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, observerOptions);
            
            // è§‚å¯Ÿæ‰€æœ‰æ—¶é—´çº¿æ¡ç›®
            const timelineEntries = document.querySelectorAll('.timeline-entry');
            timelineEntries.forEach(entry => {
                timelineObserver.observe(entry);
            });
            
            console.log('âœ… Aceternity UI Timeline åˆå§‹åŒ–å®Œæˆ');
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–...');
            
            // å»¶è¿Ÿåˆå§‹åŒ–ï¼Œç¡®ä¿DOMå®Œå…¨åŠ è½½
            setTimeout(function() {
                console.log('â° å»¶è¿Ÿ1ç§’åå¼€å§‹åˆå§‹åŒ–...');
                
                // åˆå§‹åŒ–éŸ³ä¹æ’­æ”¾å™¨
                const genreButtons = document.querySelectorAll('.genre-button');
                if (genreButtons.length > 0) {
                    initVinylMusicPlayer();
                }
                
                // åˆå§‹åŒ–æ—…è¡Œè¯¦æƒ…æŒ‰é’®
                const travelButton = document.querySelector('.stats-button');
                if (travelButton) {
                    initTravelDetailsButton();
                }
                
                // åˆå§‹åŒ–åœ°å›¾
                console.log('ğŸ—ºï¸ å¼€å§‹åˆå§‹åŒ–åœ°å›¾...');
                
            }, 1000);
        });

        // Vinyl Music Player - ç®€åŒ–ç‰ˆæœ¬ï¼Œç›´æ¥ä½¿ç”¨åŸç”Ÿæ§ä»¶
        function initVinylMusicPlayer() {
            console.log('ğŸµ å¼€å§‹åˆå§‹åŒ– Vinyl Music Player...');
            
            // è·å–æ’­æ”¾å™¨å…ƒç´ 
            const audio = document.getElementById('vinylAudio');
            const trackTitle = document.getElementById('trackTitle');
            const trackArtist = document.getElementById('trackArtist');
            
            // æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨
            if (!audio) {
                console.error('âŒ æ‰¾ä¸åˆ°éŸ³é¢‘å…ƒç´ ');
                return;
            }
            
            console.log('âœ… æ‰¾åˆ°æ’­æ”¾å™¨å…ƒç´ :', {
                audio: !!audio,
                trackTitle: !!trackTitle,
                trackArtist: !!trackArtist
            });
            
            // è®¾ç½®æ­Œæ›²ä¿¡æ¯
            if (trackTitle) trackTitle.textContent = 'ğŸµ Wish You Were Here';
            if (trackArtist) trackArtist.textContent = 'Pink Floyd';
            
            // ç¡®ä¿éŸ³é¢‘å…ƒç´ å¯è§ä¸”æœ‰æ§ä»¶
            audio.style.display = 'block';
            audio.controls = true;
            audio.style.width = '100%';
            audio.style.marginBottom = '20px';
            
            console.log('ğŸµ ä¸»æ’­æ”¾å™¨å·²è®¾ç½®ä¸ºåŸç”Ÿæ§ä»¶æ¨¡å¼ï¼Œåº”è¯¥å¯ä»¥æ­£å¸¸æ’­æ”¾äº†ï¼');
            console.log('ğŸµ Vinyl Music Player åˆå§‹åŒ–å®Œæˆï¼');
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Bree+Serif:wght@400&display=swap" rel="stylesheet">
</head>
<body>
    <!-- ä¸»å†…å®¹åŒº -->
    <main class="main-content">
        <!-- å†…å®¹å¡ç‰‡åŒºåŸŸ -->
        <div class="content-grid">
            <!-- Time å¡ç‰‡ -->
            <div class="card time-card">
                <h2 class="card-title">My Life Journey</h2>
                <p class="card-subtitle">A visual story of how I've spent my time growing up. Learning has always been my passion - I'm curious about everything!</p>
                
                <!-- ä¸»è¦æ—¶é—´è½´ -->
                <div class="main-timeline">
                    <div class="timeline-milestone" data-age="2">
                        <div class="milestone-dot"></div>
                        <div class="milestone-label">Kindergarten</div>
                        <div class="milestone-age">Age 2</div>
                    </div>
                    <div class="timeline-milestone" data-age="6">
                        <div class="milestone-dot"></div>
                        <div class="milestone-label">Elementary</div>
                        <div class="milestone-age">Age 6</div>
                    </div>
                    <div class="timeline-milestone" data-age="12">
                        <div class="milestone-dot"></div>
                        <div class="milestone-label">Middle School</div>
                        <div class="milestone-age">Age 12</div>
                    </div>
                    <div class="timeline-milestone" data-age="14">
                        <div class="milestone-dot"></div>
                        <div class="milestone-label">High School Exam</div>
                        <div class="milestone-age">Age 14</div>
                    </div>
                    <div class="timeline-milestone" data-age="15">
                        <div class="milestone-dot"></div>
                        <div class="milestone-label">USA</div>
                        <div class="milestone-age">Age 15</div>
                    </div>
                </div>

                <!-- æ´»åŠ¨å¡ç‰‡ç½‘æ ¼ -->
                <div class="activities-grid">
                    <!-- å­¦ä¹ å¡ç‰‡ -->
                    <div class="activity-card study-card" data-category="study">
                        <div class="activity-icon">ğŸš€</div>
                        <div class="activity-title">Learning Journey</div>
                        <div class="activity-subtitle">My lifelong passion</div>
                        <div class="activity-timeline">
                            <div class="timeline-bar" style="width: 100%; background: linear-gradient(90deg, #4A90E2, #667eea);"></div>
                            <span class="timeline-text">Age 2-16 (14 years)</span>
                        </div>
                        <div class="activity-stats">
                            <div class="stat-item">
                                <span class="stat-value">90%</span>
                                <span class="stat-label">Kindergarten</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value">70%</span>
                                <span class="stat-label">High School</span>
                            </div>
                        </div>
                        <div class="activity-tag">Core Activity</div>
                    </div>

                    <!-- å›´æ£‹å¡ç‰‡ -->
                    <div class="activity-card go-card" data-category="go">
                        <div class="activity-icon">ğŸ¯</div>
                        <div class="activity-title">Go Strategy</div>
                        <div class="activity-subtitle">Ancient wisdom game</div>
                        <div class="activity-timeline">
                            <div class="timeline-bar" style="width: 33%; background: linear-gradient(90deg, #7ED321, #96CEB4);"></div>
                            <span class="timeline-text">Age 7-11 (4 years)</span>
                        </div>
                        <div class="activity-stats">
                            <div class="stat-item">
                                <span class="stat-value">15%</span>
                                <span class="stat-label">Time Share</span>
                            </div>
                        </div>
                        <div class="activity-tag">Strategic Thinking</div>
                    </div>

                    <!-- çŸ¿ç‰©ç ”ç©¶å¡ç‰‡ -->
                    <div class="activity-card minerals-card" data-category="minerals">
                        <div class="activity-icon">ğŸ’</div>
                        <div class="activity-title">Mineral Research</div>
                        <div class="activity-subtitle">Earth's hidden treasures</div>
                        <div class="activity-timeline">
                            <div class="timeline-bar" style="width: 53%; background: linear-gradient(90deg, #50E3C2, #4ECDC4);"></div>
                            <span class="timeline-text">Age 9-16+ (7+ years)</span>
                        </div>
                        <div class="activity-stats">
                            <div class="stat-item">
                                <span class="stat-value">10%</span>
                                <span class="stat-label">Time Share</span>
                            </div>
                        </div>
                        <div class="activity-tag">Long-term Interest</div>
                    </div>

                    <!-- æ¸¸æ³³å¡ç‰‡ -->
                    <div class="activity-card swimming-card" data-category="swimming">
                        <div class="activity-icon">ğŸŠâ€â™‚ï¸</div>
                        <div class="activity-title">Swimming</div>
                        <div class="activity-subtitle">Water freedom</div>
                        <div class="activity-timeline">
                            <div class="timeline-bar" style="width: 47%; background: linear-gradient(90deg, #F5A623, #FFEAA7);"></div>
                            <span class="timeline-text">Age 10-16+ (6+ years)</span>
                        </div>
                        <div class="activity-stats">
                            <div class="stat-item">
                                <span class="stat-value">10%</span>
                                <span class="stat-label">Time Share</span>
                            </div>
                        </div>
                        <div class="activity-tag">Physical Fitness</div>
                    </div>

                    <!-- å‰ä»–å¡ç‰‡ -->
                    <div class="activity-card guitar-card" data-category="guitar">
                        <div class="activity-icon">ğŸ¸</div>
                        <div class="activity-title">Guitar</div>
                        <div class="activity-subtitle">Musical expression</div>
                        <div class="activity-timeline">
                            <div class="timeline-bar" style="width: 40%; background: linear-gradient(90deg, #BD10E0, #DDA0DD);"></div>
                            <span class="timeline-text">Age 11-16+ (5+ years)</span>
                        </div>
                        <div class="activity-stats">
                            <div class="stat-item">
                                <span class="stat-value">10%</span>
                                <span class="stat-label">Time Share</span>
                            </div>
                        </div>
                        <div class="activity-tag">Creative Arts</div>
                    </div>

                    <!-- æœºå™¨äºº3Dè®¾è®¡å¡ç‰‡ -->
                    <div class="activity-card robotics-card" data-category="robotics">
                        <div class="activity-icon">ğŸ¤–</div>
                        <div class="activity-title">Robotics & 3D</div>
                        <div class="activity-subtitle">Future technology</div>
                        <div class="activity-timeline">
                            <div class="timeline-bar" style="width: 13%; background: linear-gradient(90deg, #FF6B6B, #FF8E8E);"></div>
                            <span class="timeline-text">Age 15-16+ (1+ year)</span>
                        </div>
                        <div class="activity-stats">
                            <div class="stat-item">
                                <span class="stat-value">15%</span>
                                <span class="stat-label">Time Share</span>
                            </div>
                        </div>
                        <div class="activity-tag">New Skill</div>
                    </div>

                    <!-- UI/UXè®¾è®¡å¡ç‰‡ -->
                    <div class="activity-card uiux-card" data-category="uiux">
                        <div class="activity-icon">ğŸ¨</div>
                        <div class="activity-title">UI/UX Design</div>
                        <div class="activity-subtitle">User experience magic</div>
                        <div class="activity-timeline">
                            <div class="timeline-bar" style="width: 13%; background: linear-gradient(90deg, #4ECDC4, #45B7D1);"></div>
                            <span class="timeline-text">Age 15-16+ (1+ year)</span>
                        </div>
                        <div class="activity-stats">
                            <div class="stat-item">
                                <span class="stat-value">15%</span>
                                <span class="stat-label">Time Share</span>
                            </div>
                        </div>
                        <div class="activity-tag">Design Thinking</div>
                    </div>

                    <!-- ç¼–ç¨‹å¡ç‰‡ -->
                    <div class="activity-card code-card" data-category="code">
                        <div class="activity-icon">ğŸ’»</div>
                        <div class="activity-title">Coding</div>
                        <div class="activity-subtitle">Digital creation</div>
                        <div class="activity-timeline">
                            <div class="timeline-bar" style="width: 13%; background: linear-gradient(90deg, #96CEB4, #A8E6CF);"></div>
                            <span class="timeline-text">Age 15-16+ (1+ year)</span>
                        </div>
                        <div class="activity-stats">
                            <div class="stat-item">
                                <span class="stat-value">10%</span>
                                <span class="stat-label">Time Share</span>
                            </div>
                        </div>
                        <div class="activity-tag">Learning</div>
                    </div>
                </div>

                <!-- Interactive Chart Container -->
                <div class="chart-container">
                    <canvas id="timeChart"></canvas>
                </div>
                
                <!-- Age Activity Distribution Chart -->
                <div class="age-activity-chart">
                    <h3 class="chart-title">Age Activity Distribution</h3>
                    <div class="chart-container">
                        <canvas id="ageChart"></canvas>
                    </div>
                    
                    <!-- Chart Legend -->
                    <div class="chart-legend">
                        <div class="legend-item">
                            <span class="legend-color study"></span>
                            <span>Family & Learning</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color go"></span>
                            <span>Go Strategy</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color minerals"></span>
                            <span>Mineral Interest</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color swimming"></span>
                            <span>Swimming</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color guitar"></span>
                            <span>Guitar</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color robotics"></span>
                            <span>Robotics & 3D</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color uiux"></span>
                            <span>UI/UX Design</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color coding"></span>
                            <span>Coding</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Space å¡ç‰‡ -->
            <div class="card space-card">
                <h2 class="card-title">Global Footprint</h2>
                <p class="card-subtitle">My travel journey around the world. From early childhood adventures to international exploration, each trip has shaped my perspective.</p>
                

                
                <!-- Aceternity UI Timeline -->
                <div class="aceternity-timeline-container">
                    <div class="timeline-header-section">
                        <h3 class="timeline-main-title">Changelog from my journey</h3>
                        <p class="timeline-main-description">I've been traveling around the world for the past 10 years. Here's a timeline of my adventures.</p>
                    </div>
                    
                    <div class="timeline-content-wrapper">
                        <!-- æ—¶é—´çº¿ç«–çº¿ -->
                        <div class="timeline-line-container">
                            <div class="timeline-line">
                                <div class="timeline-progress-beam"></div>
                        </div>
                    </div>
                    
                        <!-- æ—¶é—´çº¿æ¡ç›® -->
                        <div class="timeline-entries">
                            <div class="timeline-entry" data-year="2014">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                        </div>
                                    <h4 class="timeline-year-title">2014</h4>
                    </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 3</div>
                                        <div class="timeline-location-title">Thailand</div>
                        </div>
                                    <div class="timeline-entry-description">First international adventure</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">Beach</span>
                                        <span class="timeline-tag">Culture</span>
                                        <button class="modal-button" onclick="showPhotosModal('Thailand')">View Travel Photos</button>
                    </div>
                        </div>
                    </div>
                    
                            <div class="timeline-entry" data-year="2015">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                        </div>
                                    <h4 class="timeline-year-title">2015</h4>
                    </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 6</div>
                                        <div class="timeline-location-title">Taiwan</div>
                        </div>
                                    <div class="timeline-entry-description">Island exploration</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">Nature</span>
                                        <span class="timeline-tag">Food</span>
                                        <button class="modal-button" onclick="showPhotosModal('Taiwan')">View Travel Photos</button>
                    </div>
                        </div>
                    </div>
                    
                            <div class="timeline-entry" data-year="2017">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                        </div>
                                    <h4 class="timeline-year-title">2017</h4>
                    </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 8</div>
                                        <div class="timeline-location-title">Xi'an, China</div>
                                    </div>
                                    <div class="timeline-entry-description">Historical discovery</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">History</span>
                                        <span class="timeline-tag">Terracotta</span>
                                        <button class="modal-button" onclick="showPhotosModal('Xi\'an, China')">View Travel Photos</button>
                                    </div>
                        </div>
                    </div>
                    
                            <div class="timeline-entry" data-year="2018">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                        </div>
                                    <h4 class="timeline-year-title">2018</h4>
                    </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 9</div>
                                        <div class="timeline-location-title">Hong Kong + Macau</div>
                                    </div>
                                    <div class="timeline-entry-description">Urban exploration</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">City</span>
                                        <span class="timeline-tag">Modern</span>
                                        <button class="modal-button" onclick="showPhotosModal('Hong Kong & Macau')">View Travel Photos</button>
                        </div>
                    </div>
                </div>

                            <div class="timeline-entry" data-year="2018-2">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                            </div>
                                    <h4 class="timeline-year-title">2018</h4>
                        </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 11</div>
                                        <div class="timeline-location-title">Vietnam</div>
                                    </div>
                                    <div class="timeline-entry-description">Southeast Asian adventure</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">Culture</span>
                                        <span class="timeline-tag">Nature</span>
                                        <button class="modal-button" onclick="showPhotosModal('Vietnam')">View Travel Photos</button>
                        </div>
                    </div>
                </div>

                            <div class="timeline-entry" data-year="2019">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                            </div>
                                    <h4 class="timeline-year-title">2019</h4>
                        </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 10</div>
                                        <div class="timeline-location-title">Singapore + Malaysia</div>
                                    </div>
                                    <div class="timeline-entry-description">Tropical adventure</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">Tropical</span>
                                        <span class="timeline-tag">Diversity</span>
                                        <button class="modal-button" onclick="showPhotosModal('Singapore & Malaysia')">View Travel Photos</button>
                        </div>
                    </div>
                </div>

                            <div class="timeline-entry" data-year="2017-2">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                            </div>
                                    <h4 class="timeline-year-title">2017</h4>
                        </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 10</div>
                                        <div class="timeline-location-title">Siguniang Mountain, China</div>
                                    </div>
                                    <div class="timeline-entry-description">Alpine adventure</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">Mountains</span>
                                        <span class="timeline-tag">Adventure</span>
                                        <button class="modal-button" onclick="showPhotosModal('Siguniang Mountain, China')">View Travel Photos</button>
                        </div>
                    </div>
                </div>

                            <div class="timeline-entry" data-year="2019-2">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                            </div>
                                    <h4 class="timeline-year-title">2019</h4>
                        </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 13</div>
                                        <div class="timeline-location-title">Beijing, China</div>
                                    </div>
                                    <div class="timeline-entry-description">Capital exploration</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">History</span>
                                        <span class="timeline-tag">Culture</span>
                                        <button class="modal-button" onclick="showPhotosModal('Beijing, China')">View Travel Photos</button>
                        </div>
                    </div>
                </div>

                            <div class="timeline-entry" data-year="2021">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                        </div>
                                    <h4 class="timeline-year-title">2021</h4>
                                </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 12</div>
                                        <div class="timeline-location-title">Dubai, UAE</div>
                                    </div>
                                    <div class="timeline-entry-description">Desert metropolis</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">Desert</span>
                                        <span class="timeline-tag">Luxury</span>
                                        <button class="modal-button" onclick="showPhotosModal('Dubai, UAE')">View Travel Photos</button>
                                    </div>
                                </div>
                    </div>
                    
                            <div class="timeline-entry" data-year="2022">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                            </div>
                                    <h4 class="timeline-year-title">2022</h4>
                        </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 14</div>
                                        <div class="timeline-location-title">Yunnan + Guizhou, China</div>
                                    </div>
                                    <div class="timeline-entry-description">Mountain exploration</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">Mountains</span>
                                        <span class="timeline-tag">Ethnic</span>
                                        <button class="modal-button" onclick="showPhotosModal('Yunnan & Guizhou, China')">View Travel Photos</button>
                                    </div>
                    </div>
                    </div>
                    
                            <div class="timeline-entry" data-year="2024">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                        </div>
                                    <h4 class="timeline-year-title">2024</h4>
                            </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 15</div>
                                        <div class="timeline-location-title">United States</div>
                        </div>
                                    <div class="timeline-entry-description">American dream</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">Freedom</span>
                                        <span class="timeline-tag">Innovation</span>
                                        <button class="modal-button" onclick="showPhotosModal('Atlanta, USA')">View Travel Photos</button>
                    </div>
                </div>
                            </div>
                        </div>
                    </div>
                    </div>
                    
                <!-- Timeline ç»Ÿè®¡æ‘˜è¦ -->
                <div class="timeline-summary">
                    <div class="summary-item comet-card" data-tilt>
                        <div class="comet-card-content">
                            <div class="summary-icon">ğŸŒ</div>
                            <div class="summary-number">8</div>
                            <div class="summary-label">Destinations</div>
                            <div class="summary-description">Visited around the world</div>
                            </div>
                        </div>
                    <div class="summary-item comet-card" data-tilt>
                        <div class="comet-card-content">
                            <div class="summary-icon">ğŸ™ï¸</div>
                            <div class="summary-number">12</div>
                            <div class="summary-label">Cities</div>
                            <div class="summary-description">Explored & discovered</div>
                        </div>
                    </div>
                    <div class="summary-item comet-card" data-tilt>
                        <div class="comet-card-content">
                            <div class="summary-icon">ğŸ—ºï¸</div>
                            <div class="summary-number">3</div>
                            <div class="summary-label">Continents</div>
                            <div class="summary-description">Crossed borders</div>
                        </div>
                    </div>
                    <div class="summary-item comet-card" data-tilt>
                        <div class="comet-card-content">
                            <div class="summary-icon">â°</div>
                            <div class="summary-number">12</div>
                            <div class="summary-label">Years</div>
                            <div class="summary-description">Of travel experience</div>
                                    </div>
                    </div>
                </div>

                <!-- Current Residence -->
                <div class="residence-card">
                    <div class="residence-icon">ğŸ </div>
                    <div class="residence-details">
                        <div class="residence-label">Current Residence</div>
                        <div class="residence-city">Chengdu, China</div>
                        <div class="residence-description">My hometown where I grew up and currently live</div>
                                </div>
                            </div>

                                <!-- Interactive Globe World Map -->
                <div class="globe-map-section">
                    <div class="map-header">
                        <h3 class="map-title">Travel</h3>
                        <div class="map-subtitle">
                            <span class="animated-text">Journey</span>
                        </div>
                        <p class="map-description">
                            My comprehensive travel journey from age 3 to 15, exploring 11 destinations across Asia, Middle East, and North America, experiencing diverse cultures and creating unforgettable memories.
                        </p>
                    </div>
                    
                    <!-- Interactive Globe Container -->
                    <div class="globe-container">
                        <div id="interactiveGlobe" class="globe-wrapper" style="height: 800px; width: 100%; border-radius: 16px; overflow: hidden; margin: 0;">
                            <!-- TechTravelMap ç»„ä»¶å°†åœ¨è¿™é‡Œæ¸²æŸ“ -->
                        </div>
                    </div>
                    
                    <!-- Travel Stats -->
                    <div class="travel-stats">
                        <div class="stat-item">
                            <div class="stat-number">11</div>
                            <div class="stat-label">DESTINATIONS</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">15+</div>
                            <div class="stat-label">CITIES</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">3</div>
                            <div class="stat-label">CONTINENTS</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">13</div>
                            <div class="stat-label">YEARS</div>
                        </div>
                    </div>
                </div>
                

            </div>
            
            <!-- Travel Details Modal -->
            <div id="travelModal" class="travel-modal">
                <div class="modal-overlay"></div>
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title">ğŸŒ Travel Journey Details</h2>
                        <button class="modal-close" onclick="closeTravelModal()">Ã—</button>
                    </div>
                    <div class="modal-body">
                        <div class="travel-summary">
                            <div class="summary-stats">
                                <div class="summary-item">
                                    <span class="summary-number">11</span>
                                    <span class="summary-label">Destinations</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-number">15+</span>
                                    <span class="summary-label">Cities</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-number">3</span>
                                    <span class="summary-label">Continents</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-number">13</span>
                                    <span class="summary-label">Years</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="travel-timeline">
                            <h3>ğŸ“… Travel Timeline</h3>
                            <div class="timeline-items">
                    <div class="timeline-item">
                                    <div class="timeline-age">Age 3</div>
                        <div class="timeline-content">
                                        <div class="timeline-location">ğŸ‡¹ğŸ‡­ Thailand</div>
                                        <div class="timeline-description">First international trip, exploring tropical paradise</div>
                                        <button class="modal-button" onclick="showPhotosModal('Thailand')">Photos</button>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                                    <div class="timeline-age">Age 6</div>
                        <div class="timeline-content">
                                        <div class="timeline-location">ğŸ‡¹ğŸ‡¼ Taiwan</div>
                                        <div class="timeline-description">Cultural exploration and family bonding</div>
                                        <button class="modal-button" onclick="showPhotosModal('Taiwan')">Photos</button>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                                    <div class="timeline-age">Age 8</div>
                        <div class="timeline-content">
                                        <div class="timeline-location">ğŸ‡¨ğŸ‡³ Xi'an, China</div>
                                        <div class="timeline-description">Historical discovery of ancient capital</div>
                                        <button class="modal-button" onclick="showPhotosModal('Xi\\'an, China')">Photos</button>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                                    <div class="timeline-age">Age 9</div>
                        <div class="timeline-content">
                                        <div class="timeline-location">ğŸ‡­ğŸ‡° Hong Kong + ğŸ‡²ğŸ‡´ Macau</div>
                                        <div class="timeline-description">Urban adventure in vibrant cities</div>
                                        <button class="modal-button" onclick="showPhotosModal('Hong Kong & Macau')">Photos</button>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                                    <div class="timeline-age">Age 10</div>
                        <div class="timeline-content">
                                        <div class="timeline-location">ğŸ‡¸ğŸ‡¬ Singapore + ğŸ‡²ğŸ‡¾ Malaysia</div>
                                        <div class="timeline-description">Southeast Asian cultural immersion</div>
                                        <button class="modal-button" onclick="showPhotosModal('Singapore & Malaysia')">Photos</button>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                                    <div class="timeline-age">Age 12</div>
                        <div class="timeline-content">
                                        <div class="timeline-location">ğŸ‡¦ğŸ‡ª Dubai, UAE</div>
                                        <div class="timeline-description">Desert luxury and modern architecture</div>
                                        <button class="modal-button" onclick="showPhotosModal('Dubai, UAE')">Photos</button>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                                    <div class="timeline-age">Age 14</div>
                        <div class="timeline-content">
                                        <div class="timeline-location">ğŸ‡¨ğŸ‡³ Yunnan + Guizhou, China</div>
                                        <div class="timeline-description">Mountain landscapes and ethnic cultures</div>
                                        <button class="modal-button" onclick="showPhotosModal('Yunnan & Guizhou, China')">Photos</button>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                                    <div class="timeline-age">Age 15</div>
                        <div class="timeline-content">
                                        <div class="timeline-location">ğŸ‡ºğŸ‡¸ Atlanta, USA</div>
                                        <div class="timeline-description">American experience and international education</div>
                                        <button class="modal-button" onclick="showPhotosModal('Atlanta, USA')">Photos</button>
                                    </div>
                        </div>
                    </div>
                </div>

                <div class="residence-info">
                            <h3>ğŸ  Current Residence</h3>
                            <div class="residence-card">
                    <div class="residence-icon">ğŸ </div>
                    <div class="residence-details">
                        <div class="residence-city">Chengdu, China</div>
                                    <div class="residence-description">My hometown and current base for adventures</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="modal-button" onclick="closeTravelModal()">Close</button>
                    </div>
                    </div>
                </div>

            <!-- Travel Photos Modal with Draggable Cards -->
            <div id="photosModal" class="travel-modal" style="display:none;">
                <div class="modal-overlay"></div>
                <div class="modal-content draggable-modal">
                    <div class="modal-header">
                        <h2 class="modal-title">ğŸ“· Travel Photos</h2>
                        <button class="modal-close" onclick="closePhotosModal()">Ã—</button>
                        </div>
                    <div class="modal-body">
                        <div id="photosGallery" class="draggable-gallery">
                            <!-- åŠ¨æ€æ’å…¥Draggable Cardç…§ç‰‡ -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="modal-button" onclick="closePhotosModal()">Close</button>
                    </div>
                </div>
                    </div>
                    
            <!-- Movie å¡ç‰‡ -->
            <div class="card movie-card">
                <h2 class="card-title">Cinema Journey</h2>
                <p class="card-subtitle">My cinematic preferences and favorite movie genres</p>
                
                <div class="mini-chart">
                    <div class="chart-bar" style="height: 60%; background-color: #FF6B6B;"></div>
                    <div class="chart-bar" style="height: 80%; background-color: #4ECDC4;"></div>
                    <div class="chart-bar" style="height: 40%; background-color: #45B7D1;"></div>
                            </div>
                
                <div class="chart-labels">
                    <span>Romance</span>
                    <span>Drama</span>
                    <span>Comedy</span>
                        </div>
                    </div>
                    
            <!-- Musical Taste å¡ç‰‡ -->
            <div class="card album-card inspira-card">
                <!-- Inspira UI é£æ ¼è£…é¥°å…ƒç´  -->
                <div class="inspira-decoration">
                    <div class="floating-orb orb-1"></div>
                    <div class="floating-orb orb-2"></div>
                    <div class="floating-orb orb-3"></div>
                    <div class="gradient-line line-1"></div>
                    <div class="gradient-line line-2"></div>
                        </div>
                
                <h2 class="card-title inspira-title">
                    <span class="title-glow">Musical Taste</span>
                    <div class="title-underline"></div>
                </h2>
                <p class="card-subtitle inspira-subtitle">My passion for music across different genres and my favorite bands</p>
                
                <!-- éŸ³ä¹ç±»å‹åå¥½å±•ç¤º - é‡æ–°ä¼˜åŒ–ç‰ˆæœ¬ -->
                <div class="music-preference-section">
                    <!-- èƒŒæ™¯è£…é¥°å…ƒç´  -->
                    <div class="bg-decoration">
                        <div class="floating-orb orb-1"></div>
                        <div class="floating-orb orb-2"></div>
                        <div class="floating-orb orb-3"></div>
                        <div class="gradient-line line-1"></div>
                        <div class="gradient-line line-2"></div>
                        <div class="gradient-line line-3"></div>
                    </div>
                    
                    <h3 class="preference-title">
                        <span class="title-text">ğŸµ Genre Preferences</span>
                        <div class="title-underline"></div>
                        <div class="title-subtitle">Discover My Musical Journey</div>
                    </h3>
                    
                    <!-- éŸ³ä¹ç±»å‹å¡ç‰‡ç½‘æ ¼ -->
                    <div class="genre-cards-grid">
                        <div class="genre-card rock-card" data-genre="rock">
                            <div class="card-glow"></div>
                            <div class="card-content">
                                <div class="genre-tag">Most Loved</div>
                                <div class="card-main-content">
                                    <div class="genre-icon">ğŸ¸</div>
                                    <div class="genre-info">
                                        <h4 class="genre-name">Rock</h4>
                                        <div class="genre-rank">#1 â­</div>
                                        <div class="genre-power">45%</div>
                                        <div class="genre-description">Power & Energy</div>
                            </div>
                        </div>
                                <div class="genre-stats">
                                    <div class="stat-button">
                                        <span class="stat-label">BANDS</span>
                                        <span class="stat-value">5</span>
                                    </div>
                                    <div class="stat-button">
                                        <span class="stat-label">ALBUMS</span>
                                        <span class="stat-value">12</span>
                                    </div>
                                </div>
                    </div>
                </div>

                        <div class="genre-card pop-card" data-genre="pop">
                            <div class="card-glow"></div>
                            <div class="card-content">
                                <div class="genre-tag">Trending</div>
                                <div class="card-main-content">
                                    <div class="genre-icon">ğŸµ</div>
                                    <div class="genre-info">
                                        <h4 class="genre-name">Pop</h4>
                                        <div class="genre-rank">#2 â­</div>
                                        <div class="genre-power">35%</div>
                                        <div class="genre-description">Melody & Harmony</div>
                        </div>
                                </div>
                                <div class="genre-stats">
                                    <div class="stat-button">
                                        <span class="stat-label">ARTISTS</span>
                                        <span class="stat-value">5</span>
                                    </div>
                                    <div class="stat-button">
                                        <span class="stat-label">HITS</span>
                                        <span class="stat-value">8</span>
                                    </div>
                                </div>
                            </div>
                    </div>
                    
                        <div class="genre-card metal-card" data-genre="metal">
                            <div class="card-glow"></div>
                            <div class="card-content">
                                <div class="genre-tag">Heavy</div>
                                <div class="card-main-content">
                                    <div class="genre-icon">ğŸ¤˜</div>
                                    <div class="genre-info">
                                        <h4 class="genre-name">Metal</h4>
                                        <div class="genre-rank">#3 â­</div>
                                        <div class="genre-power">20%</div>
                                        <div class="genre-description">Intensity & Power</div>
                                    </div>
                                </div>
                                <div class="genre-stats">
                                    <div class="stat-button">
                                        <span class="stat-label">BANDS</span>
                                        <span class="stat-value">4</span>
                                    </div>
                                    <div class="stat-button">
                                        <span class="stat-label">ALBUMS</span>
                                        <span class="stat-value">6</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- éŸ³ä¹ç»Ÿè®¡æ¦‚è§ˆ -->
                    <div class="music-stats-overview">
                        <div class="stats-card total-stats">
                            <div class="stats-icon">ğŸ“Š</div>
                            <div class="stats-content">
                                <h4>Total Collection</h4>
                                <div class="stats-numbers">
                                    <span class="number">14</span>
                                    <span class="label">Bands</span>
                                    </div>
                                    </div>
                        </div>
                        <div class="stats-card listening-time">
                            <div class="stats-icon">â°</div>
                            <div class="stats-content">
                                <h4>Listening Time</h4>
                                <div class="stats-numbers">
                                    <span class="number">2.5k</span>
                                    <span class="label">Hours</span>
                                </div>
                            </div>
                        </div>
                        <div class="stats-card favorite-year">
                            <div class="stats-icon">ğŸ“…</div>
                            <div class="stats-content">
                                <h4>Favorite Era</h4>
                                <div class="stats-numbers">
                                    <span class="number">90s</span>
                                    <span class="label">Golden Age</span>
                                </div>
                                    </div>
                                </div>
                            </div>
                            
                    <!-- éŸ³ä¹é¢‘è°±åˆ†æå™¨ -->
                    <div class="music-spectrum-analyzer">
                        <div class="spectrum-header">
                            <h4>ğŸ›ï¸ Music Spectrum Analysis</h4>
                            <div class="spectrum-controls">
                                <button class="control-btn active">Live</button>
                                <button class="control-btn">Peak</button>
                                <button class="control-btn">History</button>
                                </div>
                            </div>
                        <div class="spectrum-bars">
                            <div class="spectrum-bar rock-spectrum" data-height="45">
                                <div class="bar-label">Rock</div>
                                <div class="bar-value">45%</div>
                        </div>
                            <div class="spectrum-bar pop-spectrum" data-height="35">
                                <div class="bar-label">Pop</div>
                                <div class="bar-value">35%</div>
                            </div>
                            <div class="spectrum-bar metal-spectrum" data-height="20">
                                <div class="bar-label">Metal</div>
                                <div class="bar-value">20%</div>
                            </div>
                        </div>
                        <div class="spectrum-footer">
                            <div class="spectrum-info">
                                <span class="info-item">ğŸ¯ Real-time Analysis</span>
                                <span class="info-item">ğŸ“ˆ Dynamic Updates</span>
                                <span class="info-item">ğŸµ Genre Distribution</span>
                            </div>
                    </div>
                </div>
                
                    <!-- éŸ³ä¹èƒ½é‡æµ -->
                    <div class="music-energy-flow">
                        <div class="energy-header">
                            <h4>âš¡ Energy Flow Visualization</h4>
                            <div class="energy-controls">
                                <button class="energy-btn active">Flow</button>
                                <button class="energy-btn">Pulse</button>
                            </div>
                        </div>
                        <div class="energy-container">
                            <div class="energy-line rock-line"></div>
                            <div class="energy-line pop-line"></div>
                            <div class="energy-line metal-line"></div>
                            <div class="energy-nodes">
                                <div class="node rock-node"></div>
                                <div class="node pop-node"></div>
                                <div class="node metal-node"></div>
                            </div>
                            <div class="energy-particles">
                                <div class="energy-particle p1"></div>
                                <div class="energy-particle p2"></div>
                                <div class="energy-particle p3"></div>
                                <div class="energy-particle p4"></div>
                                <div class="energy-particle p5"></div>
                            </div>
            </div>

                        <!-- ç¢Ÿç‰‡éŸ³ä¹æ’­æ”¾å™¨ -->
                        <div class="vinyl-music-player">
                            <!-- ç´«è‰²è„‰å†²çº¿æ•ˆæœ -->
                            <div class="pulse-line top"></div>
                            <div class="pulse-line right"></div>
                            <div class="pulse-line bottom"></div>
                            <div class="pulse-line left"></div>
                            
                            <!-- æ—‹è½¬å…‰ç¯æ•ˆæœ -->
                            <div class="rotating-ring"></div>
                            
                            <!-- èƒ½é‡æ³¢çº¹æ•ˆæœ -->
                            <div class="energy-ripple"></div>
                            
                            <!-- é—ªçƒæ˜Ÿæ˜Ÿæ•ˆæœ -->
                            <div class="twinkle-star"></div>
                            <div class="twinkle-star"></div>
                            <div class="twinkle-star"></div>
                            <div class="twinkle-star"></div>
                            
                            <h5>ğŸµ Vinyl Music Player</h5>
                            

                            
                            <!-- ä¸»æ’­æ”¾å™¨åŒºåŸŸ - ç®€åŒ–ç‰ˆæœ¬ -->
                            <div class="vinyl-player-container">
                                <!-- ç¢Ÿç‰‡åŒºåŸŸ -->
                                <div class="vinyl-disc-container">
                                    <div class="vinyl-disc" id="vinylDisc">
                                        <div class="vinyl-label">
                                            <div class="label-text">
                                                <div class="artist-name">Pink Floyd</div>
                                                <div class="song-title">Wish You Were Here</div>
                                            </div>
                                        </div>
                                        <div class="vinyl-grooves">
                                            <div class="groove"></div>
                                            <div class="groove"></div>
                                            <div class="groove"></div>
                                            <div class="groove"></div>
                                            <div class="groove"></div>
                                        </div>
                                    </div>
                                    <!-- å”±é’ˆ -->
                                    <div class="tonearm" id="tonearm">
                                        <div class="tonearm-base"></div>
                                        <div class="tonearm-arm"></div>
                                        <div class="tonearm-needle"></div>
                                    </div>
                </div>
                
                                <!-- æ’­æ”¾å™¨æ§åˆ¶é¢æ¿ -->
                                <div class="player-control-panel">
                                    <!-- éŸ³é¢‘æ’­æ”¾å™¨è£…é¥°å…‰ç‚¹ -->
                                    <div class="audio-decoration">
                                        <div class="audio-light-point p1"></div>
                                        <div class="audio-light-point p2"></div>
                                        <div class="audio-light-point p3"></div>
                                        <div class="audio-light-point p4"></div>
                                    </div>
                                    
                                    <!-- ä¸»éŸ³é¢‘å…ƒç´  - æ˜¾ç¤ºåŸç”Ÿæ§ä»¶ -->
                                    <audio id="vinylAudio" controls style="width: 100%; margin-bottom: 20px;">
                                        <source src="music/Pink Floyd-Wish You Were Here (2011 - Remaster).ogg" type="audio/ogg">
                                        æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾
                                    </audio>
                                    
                                    <!-- æ­Œæ›²ä¿¡æ¯ -->
                                    <div class="track-display">
                                        <div class="track-title" id="trackTitle">ğŸµ Wish You Were Here</div>
                                        <div class="track-artist" id="trackArtist">Pink Floyd</div>
                </div>
            </div>

                                <!-- éŸ³ä¹æ³¢çº¹æ•ˆæœ -->
                                <div class="music-wave">
                                    <div class="music-wave-bar"></div>
                                    <div class="music-wave-bar"></div>
                                    <div class="music-wave-bar"></div>
                                    <div class="music-wave-bar"></div>
                                    <div class="music-wave-bar"></div>
                                    <div class="music-wave-bar"></div>
                                    <div class="music-wave-bar"></div>
                                </div>
                            </div>
                
                            <!-- éŸ³ä¹ç±»å‹é€‰æ‹© -->
                            <div class="genre-selector">
                                <h6>ğŸ¼ Select Music Genre</h6>
                                <div class="genre-options">
                                    <button class="genre-option rock-option" data-genre="rock">
                                        <div class="genre-icon">ğŸ¸</div>
                                        <div class="genre-name">Rock</div>
                                        <div class="genre-desc">Classic & Modern Rock</div>
                                    </button>
                                    <button class="genre-option pop-option" data-genre="pop">
                                        <div class="genre-icon">ğŸµ</div>
                                        <div class="genre-name">Pop</div>
                                        <div class="genre-desc">Popular Hits</div>
                                    </button>
                                    <button class="genre-option metal-option" data-genre="metal">
                                        <div class="genre-icon">ğŸ¤˜</div>
                                        <div class="genre-name">Metal</div>
                                        <div class="genre-desc">Heavy & Power Metal</div>
                                    </button>
                                </div>
                                <!-- æµ‹è¯•æç¤º -->
                                <div class="test-hint" style="margin-top: 15px; font-size: 0.9rem; color: #64748b; text-align: center;">
                                    ğŸ’¡ Click any genre button above to test functionality
                </div>
                

                            </div>
                            
                            <!-- å¹³å°é“¾æ¥ -->
                            <div class="platform-links">
                                <h6>ğŸŒ Listen on Platform</h6>
                                <div class="platform-grid">
                                    <a href="#" class="platform-link spotify-link" data-platform="spotify">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/8/84/Spotify_icon.svg" alt="Spotify">
                                        <span>Spotify</span>
                                    </a>
                                    <a href="#" class="platform-link youtube-link" data-platform="youtube">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/b/b8/YouTube_Logo_2017.svg" alt="YouTube">
                                        <span>YouTube</span>
                                    </a>
                                    <a href="#" class="platform-link apple-link" data-platform="apple">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg" alt="Apple Music">
                                        <span>Apple Music</span>
                                    </a>
                                    <a href="#" class="platform-link amazon-link" data-platform="amazon">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/a/a9/Amazon_logo.svg" alt="Amazon Music">
                                        <span>Amazon</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    

                    
                    <!-- æµ®åŠ¨éŸ³ä¹å…ƒç´  -->
                    <div class="floating-music-elements">
                        <div class="music-element element-1">ğŸ¼</div>
                        <div class="music-element element-2">ğŸ¹</div>
                        <div class="music-element element-3">ğŸº</div>
                        <div class="music-element element-4">ğŸ¥</div>
                        <div class="music-element element-5">ğŸ¸</div>
                        <div class="music-element element-6">ğŸ»</div>
                        <div class="music-element element-7">ğŸ¤</div>
                        <div class="music-element element-8">ğŸ§</div>
                    </div>
                </div>
                
                <!-- ä¹é˜Ÿå±•ç¤ºåŒºåŸŸ -->
                <!-- ä¹é˜Ÿå±•ç¤ºåŒºåŸŸ - Bending Gallery -->
                <div class="bands-showcase inspira-showcase">
                    <h3 class="showcase-title inspira-showcase-title">
                        <span class="title-icon">ğŸŒŸ</span>
                        <span class="title-text">My Favorite Bands</span>
                        <div class="title-accent"></div>
                    </h3>
                    
                    <!-- Rock Legends Bending Gallery -->
                    <div class="genre-section rock-section">
                        <h4 class="genre-section-title">
                            <span class="genre-icon">ğŸ¸</span>
                            <span class="genre-text">Rock Legends</span>
                            <div class="genre-badge">5 Bands</div>
                        </h4>

                        <div class="bending-gallery-container">
                            <div class="bending-gallery" id="rockBendingGallery">
                                <!-- Rock ä¹é˜Ÿå¡ç‰‡å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                            </div>
                            <div class="gallery-controls">
                                <button class="gallery-btn prev-btn" data-gallery="rock">
                                    <span class="btn-icon">â†</span>
                                </button>
                                <button class="gallery-btn next-btn" data-gallery="rock">
                                    <span class="btn-icon">â†’</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pop Icons Bending Gallery -->
                    <div class="genre-section pop-section">
                        <h4 class="genre-section-title">
                            <span class="genre-icon">ğŸ¤</span>
                            <span class="genre-text">Pop Icons</span>
                            <div class="genre-badge">5 Artists</div>
                        </h4>
                        <div class="bending-gallery-container">
                            <div class="bending-gallery" id="popBendingGallery">
                                <!-- Pop è‰ºæœ¯å®¶å¡ç‰‡å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                            </div>
                            <div class="gallery-controls">
                                <button class="gallery-btn prev-btn" data-gallery="pop">
                                    <span class="btn-icon">â†</span>
                                </button>
                                <button class="gallery-btn next-btn" data-gallery="pop">
                                    <span class="btn-icon">â†’</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Metal Masters Bending Gallery -->
                    <div class="genre-section metal-section">
                        <h4 class="genre-section-title">
                            <span class="genre-icon">ğŸ¤˜</span>
                            <span class="genre-text">Metal Masters</span>
                            <div class="genre-badge">4 Bands</div>
                        </h4>
                        <div class="bending-gallery-container">
                            <div class="bending-gallery" id="metalBendingGallery">
                                <!-- Metal ä¹é˜Ÿå¡ç‰‡å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                            </div>
                            <div class="gallery-controls">
                                <button class="gallery-btn prev-btn" data-gallery="metal">
                                    <span class="btn-icon">â†</span>
                                </button>
                                <button class="gallery-btn next-btn" data-gallery="metal">
                                    <span class="btn-icon">â†’</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- éŸ³ä¹ç»Ÿè®¡å›¾è¡¨ -->
                <div class="music-stats-section inspira-stats">
                    <h3 class="stats-title inspira-stats-title">
                        <span class="stats-icon">ğŸ“Š</span>
                        <span class="stats-text">Music Statistics</span>
                        <div class="stats-underline"></div>
                    </h3>
                    <div class="stats-grid">
                        <div class="stat-card inspira-stat-card">
                            <div class="stat-decoration">
                                <div class="stat-glow"></div>
                                <div class="stat-particles"></div>
                            </div>
                            <div class="stat-icon">ğŸ§</div>
                            <div class="stat-number">500+</div>
                            <div class="stat-label">Songs</div>
                        </div>
                        <div class="stat-card inspira-stat-card">
                            <div class="stat-decoration">
                                <div class="stat-glow"></div>
                                <div class="stat-particles"></div>
                            </div>
                            <div class="stat-icon">ğŸµ</div>
                            <div class="stat-number">50+</div>
                            <div class="stat-label">Albums</div>
                        </div>
                        <div class="stat-card inspira-stat-card">
                            <div class="stat-decoration">
                                <div class="stat-glow"></div>
                                <div class="stat-particles"></div>
                            </div>
                            <div class="stat-icon">ğŸ­</div>
                            <div class="stat-number">15+</div>
                            <div class="stat-label">Genres</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="script.js"></script>
    
    <!-- ç›´æ¥ç»‘å®šæŒ‰é’®äº‹ä»¶ï¼Œç¡®ä¿åŠŸèƒ½æ­£å¸¸ -->
    <script>
        // ç­‰å¾…é¡µé¢å®Œå…¨åŠ è½½
        window.addEventListener('load', function() {
            console.log('ğŸŒ é¡µé¢å®Œå…¨åŠ è½½å®Œæˆ');
            
            // æ¸…ç†å¯èƒ½å­˜åœ¨çš„é‡å¤å¡ç‰‡
            const existingCards = document.querySelectorAll('.travel-details-card');
            if (existingCards.length > 0) {
                console.log('ğŸ§¹ æ¸…ç†é‡å¤çš„å¡ç‰‡:', existingCards.length);
                existingCards.forEach(card => card.remove());
            }
            
            // æŸ¥æ‰¾æŒ‰é’®
            const statsButton = document.querySelector('.stats-button');
            console.log('ğŸ” æŸ¥æ‰¾æŒ‰é’®ç»“æœ:', statsButton);
            
            if (statsButton) {
                console.log('âœ… æ‰¾åˆ°æŒ‰é’®ï¼Œå¼€å§‹ç»‘å®šäº‹ä»¶');
                
                // ç§»é™¤å¯èƒ½å­˜åœ¨çš„æ—§äº‹ä»¶ç›‘å¬å™¨
                const newButton = statsButton.cloneNode(true);
                statsButton.parentNode.replaceChild(newButton, statsButton);
                
                // é‡æ–°è·å–æŒ‰é’®å¼•ç”¨
                const freshButton = document.querySelector('.stats-button');
                
                // ç›´æ¥ç»‘å®šç‚¹å‡»äº‹ä»¶
                freshButton.onclick = function(e) {
                    console.log('ğŸ¯ æŒ‰é’®è¢«ç‚¹å‡»ï¼');
                    e.preventDefault();
                    e.stopPropagation();
                    
                    // æ˜¾ç¤ºæ—…è¡Œè¯¦æƒ…
                    showTravelDetails();
                };
                
                // æ·»åŠ è§†è§‰åé¦ˆ
                freshButton.style.cursor = 'pointer';
                freshButton.style.transition = 'all 0.3s ease';
                
                // æ‚¬åœæ•ˆæœ
                freshButton.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-2px)';
                    this.style.boxShadow = '0 8px 25px rgba(0, 0, 0, 0.2)';
                });
                
                freshButton.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                    this.style.boxShadow = '0 4px 15px rgba(0, 0, 0, 0.1)';
                });
                
                console.log('âœ… æŒ‰é’®äº‹ä»¶ç»‘å®šå®Œæˆ');
                
                // æµ‹è¯•æŒ‰é’®æ˜¯å¦çœŸçš„å¯ä»¥ç‚¹å‡»
                setTimeout(function() {
                    console.log('ğŸ§ª æµ‹è¯•æŒ‰é’®çŠ¶æ€...');
                    console.log('æŒ‰é’®å¯è§æ€§:', freshButton.offsetParent !== null);
                    console.log('æŒ‰é’®å°ºå¯¸:', freshButton.offsetWidth, 'x', freshButton.offsetHeight);
                    console.log('æŒ‰é’®æ ·å¼:', {
                        display: getComputedStyle(freshButton).display,
                        visibility: getComputedStyle(freshButton).visibility,
                        opacity: getComputedStyle(freshButton).opacity,
                        pointerEvents: getComputedStyle(freshButton).pointerEvents,
                        cursor: getComputedStyle(freshButton).cursor
                    });
                }, 1000);
                
            } else {
                console.error('âŒ æœªæ‰¾åˆ°æŒ‰é’®ï¼');
                
                // åˆ—å‡ºæ‰€æœ‰å¯èƒ½çš„æŒ‰é’®
                const allButtons = document.querySelectorAll('button');
                console.log('é¡µé¢ä¸­çš„æ‰€æœ‰æŒ‰é’®:', allButtons);
                
                // åˆ—å‡ºæ‰€æœ‰åŒ…å« stats çš„å…ƒç´ 
                const allStatsElements = document.querySelectorAll('[class*="stats"]');
                console.log('æ‰€æœ‰åŒ…å« stats çš„å…ƒç´ :', allStatsElements);
                
                // å°è¯•å…¶ä»–é€‰æ‹©å™¨
                const buttonByText = Array.from(document.querySelectorAll('button')).find(btn => 
                    btn.textContent.includes('Travel') || btn.textContent.includes('Details')
                );
                console.log('é€šè¿‡æ–‡æœ¬æŸ¥æ‰¾æŒ‰é’®:', buttonByText);
            }
        });
        
        // ç¬¬äºŒä¸ªshowTravelDetailså‡½æ•°å·²åˆ é™¤ï¼Œä½¿ç”¨æœ€æ–°çš„å¼¹çª—ç‰ˆæœ¬
        
        // æ·»åŠ é”®ç›˜äº‹ä»¶æ”¯æŒ
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                const cards = document.querySelectorAll('.travel-details-card');
                cards.forEach(card => card.remove());
            }
        });
        
        // Timeline äº¤äº’æ•ˆæœ
        function initTimelineEffects() {
            console.log('ğŸ¯ åˆå§‹åŒ– Timeline æ•ˆæœ');
            
            const timelineItems = document.querySelectorAll('.timeline-item');
            const timelineProgress = document.querySelector('.timeline-progress');
            
            // æ»šåŠ¨åŠ¨ç”»
            const observerOptions = {
                threshold: 0.3,
                rootMargin: '0px 0px -100px 0px'
            };
            
            const timelineObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.animationPlayState = 'running';
                        
                        // æ·»åŠ æ‚¬åœæ•ˆæœ
                        entry.target.addEventListener('mouseenter', function() {
                            this.style.transform = 'scale(1.02)';
                            this.style.transition = 'transform 0.3s ease';
                        });
                        
                        entry.target.addEventListener('mouseleave', function() {
                            this.style.transform = 'scale(1)';
                        });
                    }
                });
            }, observerOptions);
            
            timelineItems.forEach(item => {
                timelineObserver.observe(item);
                
                // ç‚¹å‡»å±•å¼€è¯¦æƒ…
                item.addEventListener('click', function() {
                    const content = this.querySelector('.timeline-content');
                    const isExpanded = content.classList.contains('expanded');
                    
                    // ç§»é™¤å…¶ä»–å±•å¼€çš„é¡¹ç›®
                    timelineItems.forEach(otherItem => {
                        if (otherItem !== this) {
                            otherItem.querySelector('.timeline-content').classList.remove('expanded');
                        }
                    });
                    
                    // åˆ‡æ¢å½“å‰é¡¹ç›®
                    if (isExpanded) {
                        content.classList.remove('expanded');
                    } else {
                        content.classList.add('expanded');
                    }
                });
            });
            
            // è¿›åº¦æ¡åŠ¨ç”»
            if (timelineProgress) {
                const updateProgress = () => {
                    const scrollTop = window.pageYOffset;
                    const timelineContainer = document.querySelector('.travel-timeline-container');
                    const containerTop = timelineContainer.offsetTop;
                    const containerHeight = timelineContainer.offsetHeight;
                    const windowHeight = window.innerHeight;
                    
                    if (scrollTop + windowHeight > containerTop && scrollTop < containerTop + containerHeight) {
                        const progress = Math.min(100, Math.max(0, 
                            ((scrollTop + windowHeight - containerTop) / (containerHeight + windowHeight)) * 100
                        ));
                        timelineProgress.style.height = progress + '%';
                    }
                };
                
                window.addEventListener('scroll', updateProgress);
                updateProgress(); // åˆå§‹è°ƒç”¨
            }
            
            // æ·»åŠ ç²’å­æ•ˆæœ
            addTimelineParticles();
        }
        
        // æ·»åŠ ç²’å­æ•ˆæœ - ä¼˜åŒ–ç‰ˆæœ¬
        function addTimelineParticles() {
            const timelineContainer = document.querySelector('.travel-timeline-container');
            if (!timelineContainer) return;
            
            // åˆ›å»ºç²’å­å®¹å™¨
            const particlesContainer = document.createElement('div');
            particlesContainer.className = 'timeline-particles';
            particlesContainer.style.cssText = `
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                pointer-events: none;
                z-index: 0;
                overflow: hidden;
            `;
            
            timelineContainer.appendChild(particlesContainer);
            
            // åˆ›å»ºä¼˜åŒ–æ•°é‡çš„ç²’å­
            for (let i = 0; i < 8; i++) {
                createParticle(particlesContainer, i);
            }
        }
        
        function createParticle(container, index) {
            const particle = document.createElement('div');
            particle.className = 'timeline-particle';
            
            const size = Math.random() * 3 + 1.5; // å‡å°ç²’å­å°ºå¯¸
            const x = Math.random() * 100;
            const y = Math.random() * 100;
            const duration = 15 + index * 2; // åŸºäºç´¢å¼•çš„æŒç»­æ—¶é—´
            const delay = index * 0.5; // åŸºäºç´¢å¼•çš„å»¶è¿Ÿ
            
            particle.style.cssText = `
                position: absolute;
                width: ${size}px;
                height: ${size}px;
                background: linear-gradient(135deg, #667eea, #764ba2);
                border-radius: 50%;
                left: ${x}%;
                top: ${y}%;
                opacity: 0.4;
                animation: float ${duration}s infinite ease-in-out ${delay}s;
                z-index: 0;
                filter: blur(0.5px);
            `;
            
            container.appendChild(particle);
        }
        
        // æµ‹è¯• Bending Gallery å‡½æ•°
        function testBendingGallery(genre) {
            console.log(`ğŸ§ª æµ‹è¯• ${genre} Bending Gallery`);
            const gallery = document.getElementById(`${genre}BendingGallery`);
            if (gallery) {
                console.log(`âœ… æ‰¾åˆ° ${genre} ç”»å»Š:`, gallery);
                console.log(`ç”»å»Šå†…å®¹:`, gallery.innerHTML);
                console.log(`ç”»å»Šå­å…ƒç´ æ•°é‡:`, gallery.children.length);
                
                // å¼ºåˆ¶æ˜¾ç¤ºæ‰€æœ‰å¡ç‰‡
                const cards = gallery.querySelectorAll('.bending-gallery-card');
                cards.forEach((card, index) => {
                    card.style.opacity = '1';
                    card.style.visibility = 'visible';
                    card.style.transform = 'translate3d(0, 0, 0) scale(1) rotateY(0deg) rotateX(0deg)';
                    console.log(`ğŸ”§ å¼ºåˆ¶æ˜¾ç¤ºå¡ç‰‡ ${index}: ${card.dataset.band}`);
                });
            } else {
                console.error(`âŒ æœªæ‰¾åˆ° ${genre} ç”»å»Š`);
            }
        }
        
        // å¼ºåˆ¶æ˜¾ç¤ºæ‰€æœ‰ç”»å»Šçš„å‡½æ•°
        function forceShowAllGalleries() {
            console.log('ğŸ”§ å¼ºåˆ¶æ˜¾ç¤ºæ‰€æœ‰ç”»å»Š');
            ['rock', 'pop', 'metal'].forEach(genre => {
                const gallery = document.getElementById(`${genre}BendingGallery`);
                if (gallery) {
                    const cards = gallery.querySelectorAll('.bending-gallery-card');
                    cards.forEach((card, index) => {
                        card.style.opacity = '1';
                        card.style.visibility = 'visible';
                        card.style.transform = 'translate3d(0, 0, 0) scale(1) rotateY(0deg) rotateX(0deg)';
                    });
                    console.log(`âœ… ${genre} ç”»å»Šå¼ºåˆ¶æ˜¾ç¤ºå®Œæˆ`);
                }
            });
        }
        
        // æ£€æŸ¥å›¾ç‰‡æ–‡ä»¶çŠ¶æ€
        function checkImageFiles() {
            console.log('ğŸ” æ£€æŸ¥å›¾ç‰‡æ–‡ä»¶çŠ¶æ€...');
            const imageFiles = [
                './image/The Dark Side Of The Moon.png',
                './image/AppetiteforDestruction.jpg',
                './image/Acoustica Scorpions.jpg',
                './image/NirvanaNevermind.jpg',
                './image/machine head deep purple.jpg',
                './image/Rock_and_Roll.jpg',
                './image/å‘¨ä¼ é›„.jpg',
                './image/æ—ä¿Šæ°.jpeg',
                './image/eagles.png',
                './image/dookie green day.jpeg',
                './image/Master of Puppets.jpg',
                './image/Bon-Jovi-Livin.webp',
                './image/The Joshua Tree.jpg',
                './image/Slipknot_Iowa.jpg'
            ];
            
            imageFiles.forEach(imagePath => {
                const testImg = new Image();
                testImg.onload = () => {
                    console.log(`âœ… æ–‡ä»¶å­˜åœ¨: ${imagePath}`);
                };
                testImg.onerror = () => {
                    console.error(`âŒ æ–‡ä»¶ä¸å­˜åœ¨: ${imagePath}`);
                };
                testImg.src = imagePath;
            });
        }
        

        
        // é‡æ–°åŠ è½½æ‰€æœ‰ç”»å»Š
        function reloadAllGalleries() {
            console.log('ğŸ”„ é‡æ–°åŠ è½½æ‰€æœ‰ç”»å»Š...');
            
            // æ¸…ç©ºç°æœ‰ç”»å»Š
            ['rock', 'pop', 'metal'].forEach(genre => {
                const gallery = document.getElementById(`${genre}BendingGallery`);
                if (gallery) {
                    gallery.innerHTML = '';
                    console.log(`ğŸ§¹ æ¸…ç©º ${genre} ç”»å»Š`);
                }
            });
            
            // é‡æ–°åˆå§‹åŒ–
            setTimeout(() => {
                console.log('ğŸ¨ é‡æ–°åˆå§‹åŒ–ç”»å»Š...');
                initBendingGalleries();
            }, 100);
        }
        
        // æµ‹è¯• Eagles å›¾ç‰‡åŠ è½½
        function testEaglesImage() {
            console.log('ğŸ¦… æµ‹è¯• Eagles å›¾ç‰‡åŠ è½½...');
            const testImg = new Image();
            testImg.onload = () => {
                console.log(`âœ… Eagles å›¾ç‰‡åŠ è½½æˆåŠŸ: ${testImg.src}`);
                console.log(`  ğŸ“ å›¾ç‰‡å°ºå¯¸: ${testImg.naturalWidth} x ${testImg.naturalHeight}`);
            };
            testImg.onerror = () => {
                console.error(`âŒ Eagles å›¾ç‰‡åŠ è½½å¤±è´¥`);
            };
            testImg.src = './image/eagles.png';
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ– Timeline æ•ˆæœ
        window.addEventListener('load', function() {
            console.log('ğŸš€ é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–...');
            setTimeout(initTimelineEffects, 1000);
            initCometCards(); // åˆå§‹åŒ– Comet Cards
            initMicroAnimations(); // åˆå§‹åŒ–å¾®åŠ¨æ•ˆ
            
            // å»¶è¿Ÿåˆå§‹åŒ– Bending Galleryï¼Œç¡®ä¿ DOM å®Œå…¨åŠ è½½
            setTimeout(() => {
                console.log('ğŸ¨ å¼€å§‹åˆå§‹åŒ– Bending Galleries...');
                initBendingGalleries();
            }, 500);
            
            
        });
        
        // åˆå§‹åŒ–å¾®åŠ¨æ•ˆç³»ç»Ÿ
        function initMicroAnimations() {
            console.log('âœ¨ åˆå§‹åŒ–å¾®åŠ¨æ•ˆç³»ç»Ÿ');
            
            // ä¸ºæ‰€æœ‰å¡ç‰‡æ·»åŠ å¾®åŠ¨æ•ˆ
            const cards = document.querySelectorAll('.card');
            cards.forEach((card, index) => {
                // æ·»åŠ æ»šåŠ¨è§¦å‘åŠ¨ç”»
                card.style.opacity = '0';
                card.style.transform = 'translateY(30px)';
                card.style.transition = 'all 0.6s ease';
                
                // å»¶è¿Ÿæ˜¾ç¤ºåŠ¨ç”»
                setTimeout(() => {
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, 200 + index * 100);
                
                // æ·»åŠ æ‚¬åœå¾®åŠ¨æ•ˆ
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-8px) scale(1.02)';
                    this.style.boxShadow = '0 12px 40px rgba(0, 0, 0, 0.15)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                    this.style.boxShadow = '0 4px 20px rgba(0, 0, 0, 0.08)';
                });
            });
            
            // ä¸ºå›¾æ ‡æ·»åŠ å‘¼å¸åŠ¨ç”»
            const icons = document.querySelectorAll('.stat-icon, .summary-icon');
            icons.forEach((icon, index) => {
                icon.style.animation = `breath 3s ease-in-out infinite ${index * 0.2}s`;
            });
            
            // ä¸ºæ•°å­—æ·»åŠ è®¡æ•°åŠ¨ç”»
            const numbers = document.querySelectorAll('.stat-number, .summary-number');
            numbers.forEach((number, index) => {
                animateNumber(number, index * 200);
            });
            
            // ä¸ºæŒ‰é’®æ·»åŠ è„‰å†²æ•ˆæœ
            const buttons = document.querySelectorAll('button');
            buttons.forEach(button => {
                button.addEventListener('mouseenter', function() {
                    this.style.animation = 'pulse 0.6s ease-in-out';
                });
                
                button.addEventListener('animationend', function() {
                    this.style.animation = '';
                });
            });
        }
        
        // æ•°å­—è®¡æ•°åŠ¨ç”»
        function animateNumber(element, delay) {
            const finalNumber = parseInt(element.textContent.replace(/\D/g, ''));
            const duration = 2000;
            const steps = 60;
            const stepValue = finalNumber / steps;
            let currentStep = 0;
            
            setTimeout(() => {
                const timer = setInterval(() => {
                    currentStep++;
                    const currentValue = Math.floor(stepValue * currentStep);
                    element.textContent = element.textContent.replace(/\d+/, currentValue);
                    
                    if (currentStep >= steps) {
                        element.textContent = element.textContent.replace(/\d+/, finalNumber);
                        clearInterval(timer);
                    }
                }, duration / steps);
            }, delay);
        }
        
        // Comet Card 3D å€¾æ–œæ•ˆæœ
        function initCometCards() {
            console.log('ğŸš€ åˆå§‹åŒ– Comet Cards 3D æ•ˆæœ');
            
            const cometCards = document.querySelectorAll('.comet-card[data-tilt]');
            
            cometCards.forEach(card => {
                card.addEventListener('mousemove', handleCometCardTilt);
                card.addEventListener('mouseleave', resetCometCardTilt);
            });
        }
        
        // Bending Gallery åˆå§‹åŒ– - æ·±åº¦ä¿®å¤ç‰ˆæœ¬
        function initBendingGalleries() {
            console.log('ğŸ¨ åˆå§‹åŒ– Bending Galleries');
            console.log('ğŸ” æ£€æŸ¥ DOM å…ƒç´ ...');
            
            // æ£€æŸ¥å¿…è¦çš„ DOM å…ƒç´ æ˜¯å¦å­˜åœ¨
            const rockGallery = document.getElementById('rockBendingGallery');
            const popGallery = document.getElementById('popBendingGallery');
            const metalGallery = document.getElementById('metalBendingGallery');
            
            console.log('Rock Gallery:', rockGallery);
            console.log('Pop Gallery:', popGallery);
            console.log('Metal Gallery:', metalGallery);
            
            if (!rockGallery || !popGallery || !metalGallery) {
                console.error('âŒ æŸäº› Bending Gallery å…ƒç´ æœªæ‰¾åˆ°ï¼');
                return;
            }
            
            // ä¹é˜Ÿæ•°æ®æŒ‰ç±»å‹åˆ†ç»„ - ä½¿ç”¨å¤šç§è·¯å¾„å°è¯•
            const bandData = {
                rock: [
                    {
                        id: 'pink-floyd',
                        name: 'Pink Floyd',
                        genre: 'Progressive Rock',
                        album: 'The Dark Side of the Moon',
                        image: './image/The Dark Side Of The Moon.png',
                        fallbackImages: [
                            'image/The Dark Side Of The Moon.png',
                            '/image/The Dark Side Of The Moon.png',
                            '../image/The Dark Side Of The Moon.png'
                        ],
                        description: 'Masters of progressive rock with iconic albums like "Dark Side of the Moon"',
                        tags: ['Progressive', 'Psychedelic']
                    },
                    {
                        id: 'guns-n-roses',
                        name: 'Guns N\' Roses',
                        genre: 'Hard Rock',
                        album: 'Appetite for Destruction',
                        image: './image/AppetiteforDestruction.jpg',
                        fallbackImages: [
                            'image/AppetiteforDestruction.jpg',
                            '/image/AppetiteforDestruction.jpg',
                            '../image/AppetiteforDestruction.jpg'
                        ],
                        description: 'Iconic hard rock band known for "Appetite for Destruction"',
                        tags: ['Hard Rock', 'Classic']
                    },
                    {
                        id: 'scorpions',
                        name: 'Scorpions',
                        genre: 'Heavy Metal',
                        album: 'Acoustica',
                        image: './image/Acoustica Scorpions.jpg',
                        fallbackImages: [
                            'image/Acoustica Scorpions.jpg',
                            '/image/Acoustica Scorpions.jpg',
                            '../image/Acoustica Scorpions.jpg'
                        ],
                        description: 'German heavy metal pioneers with powerful riffs and melodies',
                        tags: ['Heavy Metal', 'German']
                    },
                    {
                        id: 'nirvana',
                        name: 'Nirvana',
                        genre: 'Grunge Rock',
                        album: 'Nevermind',
                        image: './image/NirvanaNevermind.jpg',
                        fallbackImages: [
                            'image/NirvanaNevermind.jpg',
                            '/image/NirvanaNevermind.jpg',
                            '../image/NirvanaNevermind.jpg'
                        ],
                        description: 'Grunge pioneers who revolutionized rock music with "Nevermind"',
                        tags: ['Grunge', 'Alternative']
                    },
                    {
                        id: 'deep-purple',
                        name: 'Deep Purple',
                        genre: 'Hard Rock',
                        album: 'Machine Head',
                        image: './image/machine head deep purple.jpg',
                        fallbackImages: [
                            'image/machine head deep purple.jpg',
                            '/image/machine head deep purple.jpg',
                            '../image/machine head deep purple.jpg'
                        ],
                        description: 'Classic hard rock legends with iconic "Machine Head" album',
                        tags: ['Hard Rock', 'Classic']
                    }
                ],
                pop: [
                    {
                        id: 'beyond',
                        name: 'Beyond',
                        genre: 'Cantopop Rock',
                        album: 'Rock and Roll',
                        image: './image/Rock_and_Roll.jpg',
                        fallbackImages: [
                            'image/Rock_and_Roll.jpg',
                            '/image/Rock_and_Roll.jpg',
                            '../image/Rock_and_Roll.jpg'
                        ],
                        description: 'Legendary Hong Kong rock band with timeless classics',
                        tags: ['Cantopop', 'Rock']
                    },
                    {
                        id: 'jay-zhou',
                        name: 'Jay Zhou',
                        genre: 'Mandopop',
                        album: 'å‘¨ä¼ é›„ä¸“è¾‘',
                        image: './image/å‘¨ä¼ é›„.jpg',
                        fallbackImages: [
                            'image/å‘¨ä¼ é›„.jpg',
                            '/image/å‘¨ä¼ é›„.jpg',
                            '../image/å‘¨ä¼ é›„.jpg'
                        ],
                        description: 'Taiwanese pop icon revolutionizing Chinese music industry',
                        tags: ['Mandopop', 'Innovative']
                    },
                    {
                        id: 'jj-lin',
                        name: 'JJ Lin',
                        genre: 'Mandopop',
                        album: 'æ—ä¿Šæ°ä¸“è¾‘',
                        image: './image/æ—ä¿Šæ°.jpeg',
                        fallbackImages: [
                            'image/æ—ä¿Šæ°.jpeg',
                            '/image/æ—ä¿Šæ°.jpeg',
                            '../image/æ—ä¿Šæ°.jpeg'
                        ],
                        description: 'Singaporean singer-songwriter with emotional ballads',
                        tags: ['Mandopop', 'Ballads']
                    },
                    {
                        id: 'eagles',
                        name: 'Eagles',
                        genre: 'Country Rock',
                        album: 'Hotel California',
                        image: './image/eagles.png',
                        fallbackImages: [
                            'image/eagles.png',
                            '/image/eagles.png',
                            '../image/eagles.png'
                        ],
                        description: 'American rock legends with timeless "Hotel California" masterpiece',
                        tags: ['Country Rock', 'Classic']
                    },
                    {
                        id: 'green-day',
                        name: 'Green Day',
                        genre: 'Punk Rock',
                        album: 'Dookie',
                        image: './image/dookie green day.jpeg',
                        fallbackImages: [
                            'image/dookie green day.jpeg',
                            '/image/dookie green day.jpeg',
                            '../image/dookie green day.jpeg'
                        ],
                        description: 'Punk rock pioneers with revolutionary "Dookie" album',
                        tags: ['Punk Rock', 'Alternative']
                    }
                ],
                metal: [
                    {
                        id: 'metallica',
                        name: 'Metallica',
                        genre: 'Thrash Metal',
                        album: 'Master of Puppets',
                        image: './image/Master of Puppets.jpg',
                        fallbackImages: [
                            'image/Master of Puppets.jpg',
                            '/image/Master of Puppets.jpg',
                            '../image/Master of Puppets.jpg'
                        ],
                        description: 'Thrash metal legends with "Master of Puppets" masterpiece',
                        tags: ['Thrash', 'Metal']
                    },
                    {
                        id: 'bon-jovi',
                        name: 'Bon Jovi',
                        genre: 'Hard Rock',
                        album: 'Livin\' on a Prayer',
                        image: './image/Bon-Jovi-Livin.webp',
                        fallbackImages: [
                            'image/Bon-Jovi-Livin.webp',
                            '/image/Bon-Jovi-Livin.webp',
                            '../image/Bon-Jovi-Livin.webp'
                        ],
                        description: 'American rock band with anthems like "Livin\' on a Prayer"',
                        tags: ['Hard Rock', 'Anthems']
                    },
                    {
                        id: 'u2',
                        name: 'U2',
                        genre: 'Alternative Rock',
                        album: 'The Joshua Tree',
                        image: './image/The Joshua Tree.jpg',
                        fallbackImages: [
                            'image/The Joshua Tree.jpg',
                            '/image/The Joshua Tree.jpg',
                            '../image/The Joshua Tree.jpg'
                        ],
                        description: 'Irish rock band with "The Joshua Tree" landmark album',
                        tags: ['Alternative', 'Rock']
                    },
                    {
                        id: 'slipknot',
                        name: 'Slipknot',
                        genre: 'Nu Metal',
                        album: 'Iowa',
                        image: './image/Slipknot_Iowa.jpg',
                        fallbackImages: [
                            'image/Slipknot_Iowa.jpg',
                            '/image/Slipknot_Iowa.jpg',
                            '../image/Slipknot_Iowa.jpg'
                        ],
                        description: 'Nu metal pioneers with intense and powerful "Iowa" album',
                        tags: ['Nu Metal', 'Heavy']
                    }
                ]
            };
            
            // ä¸ºæ¯ä¸ªç±»å‹åˆå§‹åŒ– Bending Gallery
            Object.keys(bandData).forEach(genre => {
                console.log(`ğŸµ åˆå§‹åŒ– ${genre} ç±»å‹ï¼ŒåŒ…å« ${bandData[genre].length} ä¸ªä¹é˜Ÿ`);
                bandData[genre].forEach(band => {
                    console.log(`  - ${band.name}: ${band.album}`);
                    // æ·±åº¦æµ‹è¯•å›¾ç‰‡è·¯å¾„
                    testImagePathWithFallbacks(band);
                });
                initGenreBendingGallery(genre, bandData[genre]);
            });
        }
        
        // æ™ºèƒ½å›¾ç‰‡è·¯å¾„æµ‹è¯•å‡½æ•° - è‡ªåŠ¨å°è¯•å¤‡ç”¨è·¯å¾„
        function testImagePathWithFallbacks(band) {
            console.log(`ğŸ” æµ‹è¯•å›¾ç‰‡è·¯å¾„: ${band.name} - ${band.image}`);
            
            // é¦–å…ˆå°è¯•ä¸»è·¯å¾„
            testImagePath(band.image, band.name, () => {
                // ä¸»è·¯å¾„æˆåŠŸï¼Œä¸éœ€è¦å°è¯•å¤‡ç”¨è·¯å¾„
                console.log(`âœ… ä¸»è·¯å¾„æˆåŠŸ: ${band.name}`);
            }, () => {
                // ä¸»è·¯å¾„å¤±è´¥ï¼Œå°è¯•å¤‡ç”¨è·¯å¾„
                console.log(`ğŸ”„ ä¸»è·¯å¾„å¤±è´¥ï¼Œå°è¯•å¤‡ç”¨è·¯å¾„: ${band.name}`);
                tryFallbackPaths(band);
            });
        }
        
        // å°è¯•å¤‡ç”¨è·¯å¾„
        function tryFallbackPaths(band) {
            if (!band.fallbackImages || band.fallbackImages.length === 0) {
                console.error(`âŒ æ²¡æœ‰å¤‡ç”¨è·¯å¾„: ${band.name}`);
                return;
            }
            
            let currentIndex = 0;
            
            function tryNextPath() {
                if (currentIndex >= band.fallbackImages.length) {
                    console.error(`âŒ æ‰€æœ‰è·¯å¾„éƒ½å¤±è´¥: ${band.name}`);
                    return;
                }
                
                const fallbackPath = band.fallbackImages[currentIndex];
                console.log(`ğŸ”„ å°è¯•å¤‡ç”¨è·¯å¾„ ${currentIndex + 1}: ${fallbackPath}`);
                
                testImagePath(fallbackPath, band.name, () => {
                    // å¤‡ç”¨è·¯å¾„æˆåŠŸï¼Œæ›´æ–°ä¸»è·¯å¾„
                    console.log(`âœ… å¤‡ç”¨è·¯å¾„æˆåŠŸ: ${band.name} - ${fallbackPath}`);
                    band.image = fallbackPath;
                }, () => {
                    // å¤‡ç”¨è·¯å¾„å¤±è´¥ï¼Œå°è¯•ä¸‹ä¸€ä¸ª
                    currentIndex++;
                    tryNextPath();
                });
            }
            
            tryNextPath();
        }
        
        // æµ‹è¯•å•ä¸ªå›¾ç‰‡è·¯å¾„
        function testImagePath(imagePath, bandName, onSuccess, onError) {
            const testImg = new Image();
            testImg.onload = () => {
                console.log(`âœ… å›¾ç‰‡åŠ è½½æˆåŠŸ: ${bandName} - ${imagePath}`);
                console.log(`  ğŸ“ å›¾ç‰‡å°ºå¯¸: ${testImg.naturalWidth} x ${testImg.naturalHeight}`);
                if (onSuccess) onSuccess();
            };
            testImg.onerror = () => {
                console.error(`âŒ å›¾ç‰‡åŠ è½½å¤±è´¥: ${bandName} - ${imagePath}`);
                if (onError) onError();
            };
            testImg.src = imagePath;
        }
        
        // å…¨å±€å›¾ç‰‡é”™è¯¯å¤„ç†å‡½æ•°
        function handleImageError(imgElement, bandName) {
            console.error(`âŒ å…¨å±€å›¾ç‰‡é”™è¯¯: ${bandName}`);
            imgElement.style.display = 'none';
            
            // æŸ¥æ‰¾å¯¹åº”çš„å¤‡ç”¨å…ƒç´ 
            const card = imgElement.closest('.bending-gallery-card');
            if (card) {
                const fallback = card.querySelector('.card-fallback');
                if (fallback) {
                    fallback.style.display = 'flex';
                }
            }
        }
        
        // åˆå§‹åŒ–ç‰¹å®šç±»å‹çš„ Bending Gallery
        function initGenreBendingGallery(genre, bands) {
            console.log(`ğŸ¨ åˆå§‹åŒ– ${genre} Bending Galleryï¼Œä¹é˜Ÿæ•°é‡: ${bands.length}`);
            
            const gallery = document.getElementById(`${genre}BendingGallery`);
            const prevBtn = gallery.parentElement.querySelector('.prev-btn');
            const nextBtn = gallery.parentElement.querySelector('.next-btn');
            
            if (!gallery || !prevBtn || !nextBtn) {
                console.error(`âŒ ${genre} Bending Gallery å…ƒç´ æœªæ‰¾åˆ°`);
                return;
            }
            
            let currentIndex = 0;
            const totalBands = bands.length;
            const bendAmount = 3; // å¼¯æ›²ç¨‹åº¦
            
            // æ ¹æ®å±å¹•å°ºå¯¸åŠ¨æ€è°ƒæ•´å¼¯æ›²åŠå¾„
            function getAdaptiveRadius() {
                const screenWidth = window.innerWidth;
                if (screenWidth <= 480) {
                    return 250; // ç§»åŠ¨ç«¯
                } else if (screenWidth <= 768) {
                    return 300; // å¹³æ¿ç«¯
                } else {
                    return 400; // æ¡Œé¢ç«¯
                }
            }
            
            let radius = getAdaptiveRadius();
            
            // ç›‘å¬çª—å£å¤§å°å˜åŒ–ï¼ŒåŠ¨æ€è°ƒæ•´åŠå¾„
            window.addEventListener('resize', () => {
                radius = getAdaptiveRadius();
                updateCardPositions();
            });
            
            // æ¸²æŸ“ Bending Gallery
            function renderBendingGallery() {
                console.log(`ğŸ¨ æ¸²æŸ“ ${genre} Bending Galleryï¼Œä¹é˜Ÿæ•°é‡: ${bands.length}`);
                gallery.innerHTML = '';
                
                bands.forEach((band, index) => {
                    console.log(`  ğŸ“± åˆ›å»ºå¡ç‰‡ ${index + 1}: ${band.name}`);
                    const card = createBendingCard(band, index);
                    gallery.appendChild(card);
                    console.log(`  âœ… å¡ç‰‡å·²æ·»åŠ åˆ°ç”»å»Š: ${band.name}`);
                });
                
                console.log(`ğŸ¯ å¼€å§‹æ›´æ–°å¡ç‰‡ä½ç½®...`);
                updateCardPositions();
                console.log(`âœ… ${genre} Bending Gallery æ¸²æŸ“å®Œæˆ`);
            }
            
            // åˆ›å»ºå¼¯æ›²å¡ç‰‡ - æ·±åº¦ä¿®å¤ç‰ˆæœ¬
            function createBendingCard(band, index) {
                const card = document.createElement('div');
                card.className = 'bending-gallery-card';
                card.dataset.band = band.id;
                card.dataset.index = index;
                
                // éªŒè¯å›¾ç‰‡è·¯å¾„
                console.log(`ğŸ–¼ï¸ åˆ›å»ºå¡ç‰‡: ${band.name}, å›¾ç‰‡è·¯å¾„: ${band.image}`);
                
                card.innerHTML = `
                    <div class="card-image">
                        <img src="${band.image}" alt="${band.name} - ${band.album}" class="card-avatar" 
                             onload="console.log('âœ… å›¾ç‰‡åŠ è½½æˆåŠŸ: ${band.name}')" 
                             onerror="handleImageError(this, '${band.name}')">
                        <div class="card-overlay">
                            <span class="card-name">${band.name}</span>
                            <span class="card-genre">${band.genre}</span>
                            <span class="card-album">${band.album}</span>
                        </div>
                        <!-- å›¾ç‰‡åŠ è½½å¤±è´¥æ—¶çš„å¤‡ç”¨æ˜¾ç¤º -->
                        <div class="card-fallback" style="display: none; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, #667eea, #764ba2); display: flex; align-items: center; justify-content: center; color: white; font-size: 48px; font-weight: bold; border-radius: 20px;">
                            ${band.name.charAt(0)}
                        </div>
                    </div>
                    <div class="card-info">
                        <h5 class="card-title">${band.name}</h5>
                        <p class="card-description">${band.description}</p>
                        <div class="card-tags">
                            ${band.tags.map(tag => `<span class="card-tag">${tag}</span>`).join('')}
                        </div>
                    </div>
                `;
                
                // æ™ºèƒ½å›¾ç‰‡åŠ è½½å¤„ç†
                const img = card.querySelector('.card-avatar');
                const fallback = card.querySelector('.card-fallback');
                
                // å›¾ç‰‡åŠ è½½æˆåŠŸ
                img.addEventListener('load', function() {
                    console.log(`âœ… å¡ç‰‡å›¾ç‰‡åŠ è½½æˆåŠŸ: ${band.name}`);
                    this.style.display = 'block';
                    if (fallback) fallback.style.display = 'none';
                });
                
                // å›¾ç‰‡åŠ è½½å¤±è´¥ - æ™ºèƒ½é‡è¯•
                img.addEventListener('error', function() {
                    console.error(`âŒ å¡ç‰‡å›¾ç‰‡åŠ è½½å¤±è´¥: ${band.name} - ${band.image}`);
                    handleImageErrorInCard(this, fallback, band);
                });
                
                // æ·»åŠ æ‚¬åœæ•ˆæœ
                let isHovered = false;
                
                card.addEventListener('mouseenter', () => {
                    isHovered = true;
                    // ä¿å­˜å½“å‰å˜æ¢çŠ¶æ€ï¼Œæ·»åŠ æ‚¬åœæ•ˆæœ
                    const currentTransform = card.style.transform;
                    card.style.transform = currentTransform + ' scale(1.05) translateZ(30px)';
                    card.style.zIndex = 2000; // æ‚¬åœæ—¶æœ€é«˜å±‚çº§
                });
                
                card.addEventListener('mouseleave', () => {
                    isHovered = false;
                    // å»¶è¿Ÿæ›´æ–°ä½ç½®ï¼Œé¿å…ä¸æ‚¬åœåŠ¨ç”»å†²çª
                    setTimeout(() => {
                        if (!isHovered) {
                            updateCardPositions();
                        }
                    }, 100);
                });
                
                return card;
            }
            
            // å¤„ç†å¡ç‰‡ä¸­çš„å›¾ç‰‡é”™è¯¯
            function handleImageErrorInCard(imgElement, fallbackElement, band) {
                // éšè—å¤±è´¥çš„å›¾ç‰‡
                imgElement.style.display = 'none';
                
                // æ˜¾ç¤ºå¤‡ç”¨å†…å®¹
                if (fallbackElement) {
                    fallbackElement.style.display = 'flex';
                    console.log(`ğŸ”„ æ˜¾ç¤ºå¤‡ç”¨å†…å®¹: ${band.name}`);
                }
                
                // å°è¯•å¤‡ç”¨è·¯å¾„
                if (band.fallbackImages && band.fallbackImages.length > 0) {
                    console.log(`ğŸ”„ å°è¯•å¤‡ç”¨å›¾ç‰‡è·¯å¾„: ${band.name}`);
                    tryAlternativeImagePath(imgElement, fallbackElement, band);
                }
            }
            
            // å°è¯•å¤‡ç”¨å›¾ç‰‡è·¯å¾„
            function tryAlternativeImagePath(imgElement, fallbackElement, band) {
                let currentIndex = 0;
                
                function tryNextPath() {
                    if (currentIndex >= band.fallbackImages.length) {
                        console.log(`âŒ æ‰€æœ‰å¤‡ç”¨è·¯å¾„éƒ½å¤±è´¥: ${band.name}`);
                        return;
                    }
                    
                    const fallbackPath = band.fallbackImages[currentIndex];
                    console.log(`ğŸ”„ å°è¯•å¤‡ç”¨è·¯å¾„ ${currentIndex + 1}: ${fallbackPath}`);
                    
                    const testImg = new Image();
                    testImg.onload = () => {
                        console.log(`âœ… å¤‡ç”¨è·¯å¾„æˆåŠŸ: ${band.name} - ${fallbackPath}`);
                        imgElement.src = fallbackPath;
                        imgElement.style.display = 'block';
                        if (fallbackElement) fallbackElement.style.display = 'none';
                    };
                    testImg.onerror = () => {
                        currentIndex++;
                        tryNextPath();
                    };
                    testImg.src = fallbackPath;
                }
                
                tryNextPath();
            }
            
            // æ›´æ–°å¡ç‰‡ä½ç½® - å®ç° 3D å¼¯æ›²æ•ˆæœ
            function updateCardPositions() {
                const cards = gallery.querySelectorAll('.bending-gallery-card');
                console.log(`ğŸ¯ æ›´æ–° ${genre} å¡ç‰‡ä½ç½®ï¼Œæ‰¾åˆ° ${cards.length} å¼ å¡ç‰‡`);
                
                cards.forEach((card, index) => {
                    const relativeIndex = index - currentIndex;
                    const angle = (relativeIndex * 40) * (Math.PI / 180); // 40åº¦é—´éš”
                    
                    // è®¡ç®— 3D ä½ç½®ï¼Œé™åˆ¶åœ¨å®¹å™¨èŒƒå›´å†…
                    const maxRadius = Math.min(radius, 300); // å‡å°åŠå¾„ï¼Œç¡®ä¿å¡ç‰‡åœ¨å®¹å™¨å†…
                    const x = Math.sin(angle) * maxRadius;
                    const z = Math.cos(angle) * maxRadius;
                    const rotateY = relativeIndex * -15; // å‡å°æ—‹è½¬è§’åº¦
                    const rotateX = relativeIndex * 3; // å‡å°Xè½´æ—‹è½¬
                    
                    // è®¡ç®—ç¼©æ”¾å’Œé€æ˜åº¦ï¼Œç¡®ä¿æœ€å°å¯è§æ€§
                    const distance = Math.abs(relativeIndex);
                    const scale = Math.max(0.6, 1 - distance * 0.1); // æé«˜æœ€å°ç¼©æ”¾
                    const opacity = Math.max(0.6, 1 - distance * 0.2); // æé«˜æœ€å°é€æ˜åº¦
                    
                    console.log(`  ğŸ“ å¡ç‰‡ ${index}: ${card.dataset.band}, ä½ç½®: x=${x.toFixed(1)}, z=${z.toFixed(1)}, ç¼©æ”¾=${scale.toFixed(2)}, é€æ˜åº¦=${opacity.toFixed(2)}`);
                    
                    // ä½¿ç”¨ requestAnimationFrame ç¡®ä¿å¹³æ»‘è¿‡æ¸¡
                    requestAnimationFrame(() => {
                        // åº”ç”¨ 3D å˜æ¢ï¼Œä½¿ç”¨ç»Ÿä¸€çš„å˜æ¢é¡ºåº
                        card.style.transform = `
                            translate3d(${x}px, 0, ${z}px)
                            rotateY(${rotateY}deg)
                            rotateX(${rotateX}deg)
                            scale(${scale})
                        `;
                        card.style.opacity = opacity;
                        
                        // ä¼˜åŒ– Z-index å±‚çº§ï¼Œé¿å…é—ªçƒ
                        if (distance === 0) {
                            card.style.zIndex = 1000; // ä¸­å¿ƒå¡ç‰‡æœ€é«˜å±‚çº§
                        } else {
                            card.style.zIndex = 100 - distance; // å…¶ä»–å¡ç‰‡é€’å‡å±‚çº§
                        }
                        
                        // ç¡®ä¿å¡ç‰‡å®Œå…¨å¯è§
                        card.style.visibility = 'visible';
                    });
                });
                console.log(`âœ… ${genre} å¡ç‰‡ä½ç½®æ›´æ–°å®Œæˆ`);
            }
            
            // å¯¼èˆªå‡½æ•°
            let isTransitioning = false;
            
            function nextBand() {
                if (isTransitioning) return;
                isTransitioning = true;
                
                currentIndex = (currentIndex + 1) % totalBands;
                updateCardPositions();
                
                // é˜²æŠ–ï¼šç­‰å¾…åŠ¨ç”»å®Œæˆåå†å…è®¸ä¸‹ä¸€æ¬¡æ“ä½œ
                setTimeout(() => {
                    isTransitioning = false;
                }, 800);
            }
            
            function prevBand() {
                if (isTransitioning) return;
                isTransitioning = true;
                
                currentIndex = (currentIndex - 1 + totalBands) % totalBands;
                updateCardPositions();
                
                // é˜²æŠ–ï¼šç­‰å¾…åŠ¨ç”»å®Œæˆåå†å…è®¸ä¸‹ä¸€æ¬¡æ“ä½œ
                setTimeout(() => {
                    isTransitioning = false;
                }, 800);
            }
            
            // ç»‘å®šäº‹ä»¶
            nextBtn.addEventListener('click', nextBand);
            prevBtn.addEventListener('click', prevBand);
            
            // è§¦æ‘¸æ»‘åŠ¨æ”¯æŒ
            let startX = 0;
            let endX = 0;
            let touchStartTime = 0;
            
            gallery.addEventListener('touchstart', (e) => {
                startX = e.touches[0].clientX;
                touchStartTime = Date.now();
            });
            
            gallery.addEventListener('touchend', (e) => {
                if (isTransitioning) return;
                
                endX = e.changedTouches[0].clientX;
                const diff = startX - endX;
                const touchDuration = Date.now() - touchStartTime;
                
                // åªæœ‰è¶³å¤Ÿè·ç¦»å’Œæ—¶é—´çš„è§¦æ‘¸æ‰è§¦å‘
                if (Math.abs(diff) > 50 && touchDuration < 500) {
                    if (diff > 0) {
                        nextBand();
                    } else {
                        prevBand();
                    }
                }
            });
            
            // é¼ æ ‡æ»šè½®æ”¯æŒ
            let wheelTimeout;
            gallery.addEventListener('wheel', (e) => {
                e.preventDefault();
                
                if (isTransitioning) return;
                
                // æ¸…é™¤ä¹‹å‰çš„æ»šè½®äº‹ä»¶
                clearTimeout(wheelTimeout);
                
                wheelTimeout = setTimeout(() => {
                    if (e.deltaY > 0) {
                        nextBand();
                    } else {
                        prevBand();
                    }
                }, 100);
            });
            
            // åˆå§‹åŒ–
            renderBendingGallery();
            
            // æ·»åŠ åˆå§‹åŠ è½½åŠ¨ç”»ï¼Œé¿å…æŠ–åŠ¨
            setTimeout(() => {
                updateCardPositions();
            }, 100);
            
            // è‡ªåŠ¨æ’­æ”¾
            let autoPlayInterval;
            
            function startAutoPlay() {
                autoPlayInterval = setInterval(() => {
                    if (!isTransitioning) {
                        nextBand();
                    }
                }, 5000);
            }
            
            function stopAutoPlay() {
                if (autoPlayInterval) {
                    clearInterval(autoPlayInterval);
                }
            }
            
            // ç”¨æˆ·äº¤äº’æ—¶æš‚åœè‡ªåŠ¨æ’­æ”¾
            gallery.addEventListener('mouseenter', stopAutoPlay);
            gallery.addEventListener('touchstart', stopAutoPlay);
            
            // ç”¨æˆ·ç¦»å¼€æ—¶æ¢å¤è‡ªåŠ¨æ’­æ”¾
            gallery.addEventListener('mouseleave', startAutoPlay);
            gallery.addEventListener('touchend', () => {
                setTimeout(startAutoPlay, 1000);
            });
            
            // å¯åŠ¨è‡ªåŠ¨æ’­æ”¾
            startAutoPlay();
        }
        
        function handleCometCardTilt(e) {
            const card = e.currentTarget;
            const rect = card.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            // è®¡ç®—é¼ æ ‡åœ¨å¡ç‰‡ä¸Šçš„ç›¸å¯¹ä½ç½® (0-1)
            const xPercent = x / rect.width;
            const yPercent = y / rect.height;
            
            // è®¡ç®—å€¾æ–œè§’åº¦ (åŸºäº [Aceternity UI Comet Card](https://ui.aceternity.com/components/comet-card))
            const rotateX = (yPercent - 0.5) * -17.5; // å‚ç›´å€¾æ–œ
            const rotateY = (xPercent - 0.5) * 17.5;  // æ°´å¹³å€¾æ–œ
            
            // è®¡ç®—ä½ç§»è·ç¦»
            const translateX = (xPercent - 0.5) * 20;
            const translateY = (yPercent - 0.5) * 20;
            
            // åº”ç”¨ 3D å˜æ¢
            card.style.transform = `
                perspective(1000px) 
                rotateX(${rotateX}deg) 
                rotateY(${rotateY}deg)
                translateX(${translateX}px) 
                translateY(${translateY}px)
                scale3d(1.02, 1.02, 1.02)
            `;
            
            // ä¸ºå¡ç‰‡å†…å®¹æ·»åŠ è§†å·®æ•ˆæœ
            const content = card.querySelector('.comet-card-content');
            if (content) {
                const icon = content.querySelector('.summary-icon');
                const number = content.querySelector('.summary-number');
                const label = content.querySelector('.summary-label');
                const description = content.querySelector('.summary-description');
                
                // ä¸åŒå…ƒç´ æœ‰ä¸åŒçš„è§†å·®æ·±åº¦
                if (icon) icon.style.transform = `translateZ(${30 + rotateY * 0.5}px)`;
                if (number) number.style.transform = `translateZ(${25 + rotateY * 0.4}px)`;
                if (label) label.style.transform = `translateZ(${20 + rotateY * 0.3}px)`;
                if (description) description.style.transform = `translateZ(${15 + rotateY * 0.2}px)`;
            }
            
            // æ·»åŠ åŠ¨æ€é˜´å½±æ•ˆæœ
            const shadowX = rotateY * 0.5;
            const shadowY = rotateX * 0.5;
            const shadowBlur = 20 + Math.abs(rotateX) * 0.5;
            
            card.style.boxShadow = `
                ${shadowX}px ${shadowY}px ${shadowBlur}px rgba(0, 0, 0, 0.15),
                0 0 30px rgba(102, 126, 234, 0.1)
            `;
        }
        
        function resetCometCardTilt(e) {
            const card = e.currentTarget;
            const content = card.querySelector('.comet-card-content');
            
            // é‡ç½®å¡ç‰‡å˜æ¢
            card.style.transform = 'perspective(1000px) rotateX(0deg) rotateY(0deg) translateX(0px) translateY(0px) scale3d(1, 1, 1)';
            card.style.boxShadow = '0 4px 20px rgba(0, 0, 0, 0.08)';
            
            // é‡ç½®å†…å®¹è§†å·®
            if (content) {
                const icon = content.querySelector('.summary-icon');
                const number = content.querySelector('.summary-number');
                const label = content.querySelector('.summary-label');
                const description = content.querySelector('.summary-description');
                
                if (icon) icon.style.transform = 'translateZ(20px)';
                if (number) number.style.transform = 'translateZ(15px)';
                if (label) label.style.transform = 'translateZ(10px)';
                if (description) description.style.transform = 'translateZ(5px)';
            }
        }
        
        // ç¢Ÿç‰‡éŸ³ä¹æ’­æ”¾å™¨åŠŸèƒ½ - å®Œå…¨ç‹¬ç«‹ç‰ˆæœ¬
        function initVinylMusicPlayer() {
            console.log('ğŸµ åˆå§‹åŒ–ç¢Ÿç‰‡éŸ³ä¹æ’­æ”¾å™¨ - å®Œå…¨ç‹¬ç«‹ç‰ˆæœ¬...');
            
            // ç›´æ¥æŸ¥æ‰¾éŸ³ä¹ç±»å‹æŒ‰é’®
            const genreOptions = document.querySelectorAll('.genre-option');
            console.log('ğŸ¼ æ‰¾åˆ°éŸ³ä¹ç±»å‹æŒ‰é’®æ•°é‡:', genreOptions.length);
            
            if (genreOptions.length === 0) {
                console.error('âŒ æ²¡æœ‰æ‰¾åˆ°éŸ³ä¹ç±»å‹æŒ‰é’®ï¼');
                return;
            }
            
            // éŸ³ä¹æ›²ç›®æ•°æ®
            const musicData = {
                rock: {
                    title: 'Classic Rock Hits',
                    artist: 'Various Artists',
                    duration: '4:32',
                    color: '#e53e3e'
                },
                pop: {
                    title: 'Pop Music Collection',
                    artist: 'Top Artists',
                    duration: '3:45',
                    color: '#3182ce'
                },
                metal: {
                    title: 'Heavy Metal Anthems',
                    artist: 'Metal Legends',
                    duration: '5:18',
                    color: '#805ad5'
                }
            };
            
            let currentGenre = '';
            
            // éŸ³ä¹ç±»å‹é€‰æ‹© - æ ¸å¿ƒåŠŸèƒ½
            console.log('ğŸ¼ å¼€å§‹ç»‘å®šéŸ³ä¹ç±»å‹é€‰æ‹©äº‹ä»¶...');
            genreOptions.forEach((option, index) => {
                console.log(`ğŸ¼ ä¸ºæŒ‰é’® ${index + 1} ç»‘å®šäº‹ä»¶:`, option.dataset.genre);
                
                // ç§»é™¤æ‰€æœ‰ç°æœ‰çš„äº‹ä»¶ç›‘å¬å™¨
                const newOption = option.cloneNode(true);
                option.parentNode.replaceChild(newOption, option);
                
                // é‡æ–°ç»‘å®šäº‹ä»¶
                newOption.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const genre = this.dataset.genre;
                    console.log(`ğŸ¼ æŒ‰é’®è¢«ç‚¹å‡»ï¼é€‰æ‹©éŸ³ä¹ç±»å‹: ${genre}`);
                    
                    // æ·»åŠ ç‚¹å‡»åé¦ˆ
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);
                    
                    // æ›´æ–°æŒ‰é’®çŠ¶æ€
                    genreOptions.forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    currentGenre = genre;
                    
                    // æ›´æ–°æ˜¾ç¤ºä¿¡æ¯
                    const trackTitle = document.getElementById('trackTitle');
                    const trackArtist = document.getElementById('trackArtist');
                    const totalTime = document.getElementById('totalTime');
                    
                    if (trackTitle && trackArtist && totalTime) {
                        const data = musicData[genre];
                        if (data) {
                            trackTitle.textContent = data.title;
                            trackArtist.textContent = data.artist;
                            totalTime.textContent = data.duration;
                            console.log(`ğŸ¼ æ›´æ–°æ˜¾ç¤ºä¿¡æ¯: ${data.title} - ${data.artist}`);
                        }
                    }
                    
                    // æ›´æ–°ç¢Ÿç‰‡æ ‡ç­¾
                    const artistName = document.querySelector('.artist-name');
                    const songTitle = document.querySelector('.song-title');
                    if (artistName && songTitle) {
                        const data = musicData[genre];
                        if (data) {
                            artistName.textContent = data.artist;
                            songTitle.textContent = data.title;
                        }
                    }
                    
                    // æ˜¾ç¤ºé€‰æ‹©ç¡®è®¤
                    showGenreSelectionFeedback(genre);
                });
                
                console.log(`ğŸ¼ æŒ‰é’® ${index + 1} äº‹ä»¶ç»‘å®šå®Œæˆ`);
            });
            
            console.log('ğŸ¼ æ‰€æœ‰éŸ³ä¹ç±»å‹é€‰æ‹©äº‹ä»¶ç»‘å®šå®Œæˆ');
            
            // å¹³å°é“¾æ¥
            const platformLinks = document.querySelectorAll('.platform-link');
            platformLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const platform = this.dataset.platform;
                    console.log(`ğŸŒ å¹³å°é“¾æ¥è¢«ç‚¹å‡»: ${platform}`);
                    
                    if (!currentGenre) {
                        alert('Please select a music genre first!');
                        return;
                    }
                    
                    // æ‰“å¼€å¯¹åº”çš„éŸ³ä¹å¹³å°
                    const platformUrls = {
                        spotify: 'https://open.spotify.com/',
                        youtube: 'https://www.youtube.com/',
                        apple: 'https://music.apple.com/',
                        amazon: 'https://music.amazon.com/'
                    };
                    
                    const url = platformUrls[platform];
                    if (url) {
                        window.open(url, '_blank');
                        console.log(`ğŸŒ æ‰“å¼€å¹³å°: ${platform}`);
                    }
                });
            });
            
            function showGenreSelectionFeedback(genre) {
                // åˆ›å»ºä¸´æ—¶åé¦ˆæç¤º
                const feedback = document.createElement('div');
                feedback.textContent = `ğŸµ Selected: ${genre.toUpperCase()}`;
                feedback.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: linear-gradient(45deg, #667eea, #f093fb);
                    color: white;
                    padding: 12px 20px;
                    border-radius: 25px;
                    font-weight: 600;
                    z-index: 1000;
                    animation: slideInRight 0.5s ease;
                    box-shadow: 0 4px 20px rgba(102, 126, 234, 0.3);
                `;
                
                document.body.appendChild(feedback);
                
                // 3ç§’åè‡ªåŠ¨ç§»é™¤
                setTimeout(() => {
                    feedback.style.animation = 'slideOutRight 0.5s ease';
                    setTimeout(() => {
                        if (feedback.parentNode) {
                            feedback.parentNode.removeChild(feedback);
                        }
                    }, 500);
                }, 3000);
            }
            
            // åˆå§‹åŒ–é»˜è®¤é€‰æ‹©ç¬¬ä¸€ä¸ªç±»å‹
            if (genreOptions.length > 0) {
                console.log('ğŸ¯ è‡ªåŠ¨é€‰æ‹©ç¬¬ä¸€ä¸ªéŸ³ä¹ç±»å‹');
                genreOptions[0].click();
            }
            
            console.log('ğŸµ ç¢Ÿç‰‡æ’­æ”¾å™¨åˆå§‹åŒ–å®Œæˆ - å®Œå…¨ç‹¬ç«‹ç‰ˆæœ¬');
            console.log('ğŸµ éŸ³ä¹ç±»å‹æŒ‰é’®ç°åœ¨åº”è¯¥å¯ä»¥æ­£å¸¸å·¥ä½œäº†ï¼');
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–æ‰€æœ‰åŠŸèƒ½
        window.addEventListener('load', function() {
            console.log('ğŸš€ é¡µé¢åŠ è½½å®Œæˆï¼Œå‡†å¤‡åˆå§‹åŒ–æ‰€æœ‰åŠŸèƒ½...');
            
            // ç«‹å³æ£€æŸ¥æŒ‰é’®æ˜¯å¦å­˜åœ¨
            const genreButtons = document.querySelectorAll('.genre-option');
            const travelButton = document.querySelector('.stats-button');
            
            console.log('ğŸ” ç«‹å³æ£€æŸ¥ - æ‰¾åˆ°çš„éŸ³ä¹ç±»å‹æŒ‰é’®æ•°é‡:', genreButtons.length);
            console.log('ğŸ” ç«‹å³æ£€æŸ¥ - æ‰¾åˆ°çš„æ—…è¡Œè¯¦æƒ…æŒ‰é’®:', !!travelButton);
            
            if (genreButtons.length === 0) {
                console.error('âŒ é¡µé¢åŠ è½½æ—¶æ²¡æœ‰æ‰¾åˆ°éŸ³ä¹ç±»å‹æŒ‰é’®ï¼');
            }
            
            if (!travelButton) {
                console.error('âŒ é¡µé¢åŠ è½½æ—¶æ²¡æœ‰æ‰¾åˆ°æ—…è¡Œè¯¦æƒ…æŒ‰é’®ï¼');
            }
            
            // ç«‹å³åˆå§‹åŒ–æ’­æ”¾å™¨
            console.log('ğŸµ ç«‹å³åˆå§‹åŒ– Vinyl Music Player...');
            initVinylMusicPlayer();
            
            // å»¶è¿Ÿåˆå§‹åŒ–å…¶ä»–åŠŸèƒ½ï¼Œç¡®ä¿DOMå®Œå…¨åŠ è½½
            setTimeout(function() {
                console.log('â° å»¶è¿Ÿ1ç§’åå¼€å§‹åˆå§‹åŒ–å…¶ä»–åŠŸèƒ½...');
                
                // åˆå§‹åŒ–æ—…è¡Œè¯¦æƒ…æŒ‰é’®
                if (travelButton) {
                    initTravelDetailsButton();
                }
                
                // åˆå§‹åŒ–ç§‘æŠ€æ„Ÿæ—…è¡Œåœ°å›¾
                console.log('ğŸ—ºï¸ å¼€å§‹åˆå§‹åŒ–ç§‘æŠ€æ„Ÿæ—…è¡Œåœ°å›¾...');
                setTimeout(() => {
                    initTechTravelMap();
                }, 500);
            }, 1000);
        });
        
        // åœ°å›¾åŠŸèƒ½å·²åˆ é™¤ï¼Œç­‰å¾…é‡æ–°å®ç°
        
        // åˆ›å»ºå®Œæ•´çš„110m Physicalåœ°å›¾æ•ˆæœ - åŸºäºæˆ‘ä»¬ä¹‹å‰åšè¿‡çš„ä»£ç 
        // åˆå§‹åŒ–ç§‘æŠ€æ„Ÿæ—…è¡Œåœ°å›¾
        function initTechTravelMap() {
            console.log('ğŸ—ºï¸ åˆå§‹åŒ–ç§‘æŠ€æ„Ÿæ—…è¡Œåœ°å›¾...');
            
            const container = document.getElementById('interactiveGlobe');
            if (!container) {
                console.error('âŒ åœ°å›¾å®¹å™¨ä¸å­˜åœ¨');
                return;
            }
            
            console.log('âœ… æ‰¾åˆ°åœ°å›¾å®¹å™¨:', container);
            
            try {
                // ç­‰å¾…TechTravelMapç±»åŠ è½½
                if (typeof TechTravelMap === 'undefined') {
                    console.log('â³ ç­‰å¾…TechTravelMapç±»åŠ è½½...');
                    setTimeout(() => {
                        initTechTravelMap();
                    }, 1000);
                    return;
                }
                
                console.log('âœ… TechTravelMapç±»å¯ç”¨ï¼Œå¼€å§‹åˆ›å»ºåœ°å›¾å®ä¾‹...');
                
                // åˆ›å»ºç§‘æŠ€æ„Ÿæ—…è¡Œåœ°å›¾å®ä¾‹
                const techMap = new TechTravelMap(container, {
                    // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ è‡ªå®šä¹‰é…ç½®
                });
                
                console.log('âœ… ç§‘æŠ€æ„Ÿæ—…è¡Œåœ°å›¾åˆå§‹åŒ–å®Œæˆ');
                
                // å­˜å‚¨åœ°å›¾å®ä¾‹ä»¥ä¾¿åç»­ä½¿ç”¨
                window.techMapInstance = techMap;
                
            } catch (error) {
                console.error('âŒ åœ°å›¾åˆå§‹åŒ–å¤±è´¥:', error);
                // ä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ
                showGlobeFallback(container);
            }
        }
        
        // Globeå¤‡ç”¨æ–¹æ¡ˆ
        function showGlobeFallback(container) {
            console.log('ğŸ”„ æ˜¾ç¤ºGlobeå¤‡ç”¨æ–¹æ¡ˆ...');
            
            container.innerHTML = `
                <div style="
                    width: 100%;
                    height: 100%;
                    min-height: 400px;
                    background: radial-gradient(circle at center, #1e293b 0%, #0f172a 100%);
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: white;
                    text-align: center;
                    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
                    position: relative;
                    overflow: hidden;
                ">
                    <div style="position: relative; z-index: 2;">
                        <div style="font-size: 64px; margin-bottom: 20px;">ğŸŒ</div>
                        <div style="font-size: 24px; font-weight: bold; margin-bottom: 12px;">Interactive Globe</div>
                        <div style="font-size: 16px; opacity: 0.8; margin-bottom: 8px;">14 Travel Destinations</div>
                        <div style="font-size: 14px; opacity: 0.6;">Age 3-15 Journey</div>
                    </div>
                    <div style="
                        position: absolute;
                        width: 200%;
                        height: 200%;
                        background: conic-gradient(from 0deg, transparent, rgba(59, 130, 246, 0.3), transparent);
                        animation: rotate 20s linear infinite;
                        top: -50%;
                        left: -50%;
                    "></div>
                    
                    <!-- Travel Markers on Fallback Globe -->
                    <div style="position: absolute; top: 20%; left: 30%; width: 8px; height: 8px; background: #0ea5e9; border-radius: 50%; animation: pulse 2s infinite;"></div>
                    <div style="position: absolute; top: 25%; right: 35%; width: 8px; height: 8px; background: #8b5cf6; border-radius: 50%; animation: pulse 2s infinite 0.5s;"></div>
                    <div style="position: absolute; bottom: 30%; left: 40%; width: 8px; height: 8px; background: #06d6a0; border-radius: 50%; animation: pulse 2s infinite 1s;"></div>
                    <div style="position: absolute; bottom: 35%; right: 25%; width: 8px; height: 8px; background: #f72585; border-radius: 50%; animation: pulse 2s infinite 1.5s;"></div>
                </div>
                <style>
                    @keyframes rotate {
                        from { transform: rotate(0deg); }
                        to { transform: rotate(360deg); }
                    }
                    @keyframes pulse {
                        0%, 100% { transform: scale(1); opacity: 1; }
                        50% { transform: scale(1.5); opacity: 0.7; }
                    }
                </style>
            `;
            
            console.log('âœ… Globeå¤‡ç”¨æ–¹æ¡ˆå·²æ˜¾ç¤º');
        }
        
        // æ·»åŠ DOMContentLoadedäº‹ä»¶ä½œä¸ºå¤‡ç”¨
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ“„ DOMå†…å®¹åŠ è½½å®Œæˆ');
            
            // å°è¯•ç«‹å³åˆå§‹åŒ–æ’­æ”¾å™¨
            if (typeof initVinylMusicPlayer === 'function') {
                console.log('ğŸµ DOMåŠ è½½å®Œæˆåç«‹å³åˆå§‹åŒ–æ’­æ”¾å™¨...');
                try {
                    initVinylMusicPlayer();
                    console.log('âœ… æ’­æ”¾å™¨åˆå§‹åŒ–æˆåŠŸ');
                } catch (error) {
                    console.error('âŒ æ’­æ”¾å™¨åˆå§‹åŒ–å¤±è´¥:', error);
                }
            } else {
                console.log('â³ æ’­æ”¾å™¨å‡½æ•°è¿˜æœªå®šä¹‰ï¼Œç­‰å¾…é¡µé¢åŠ è½½å®Œæˆ...');
            }
            
            // åˆå§‹åŒ–ç®€å•æµ‹è¯•æ’­æ”¾å™¨
            initSimpleTestPlayer();
        });
        
        // ç®€å•æµ‹è¯•æ’­æ”¾å™¨
        function initSimpleTestPlayer() {
            console.log('ğŸµ åˆå§‹åŒ–ç®€å•æµ‹è¯•æ’­æ”¾å™¨...');
            
            const testAudio = document.getElementById('testAudio');
            const debugTestBtn = document.getElementById('debugTestBtn');
            const debugOutput = document.getElementById('debugOutput');
            
            if (!testAudio) {
                console.error('âŒ æ‰¾ä¸åˆ°æµ‹è¯•éŸ³é¢‘å…ƒç´ ');
                return;
            }
            
            if (!debugTestBtn || !debugOutput) {
                console.error('âŒ æ‰¾ä¸åˆ°è°ƒè¯•æŒ‰é’®æˆ–è¾“å‡ºåŒºåŸŸ');
                return;
            }
            
            // æµ‹è¯•æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            debugTestBtn.addEventListener('click', function() {
                console.log('ğŸ”§ è°ƒè¯•æµ‹è¯•æŒ‰é’®è¢«ç‚¹å‡»');
                
                // æ£€æŸ¥æµ‹è¯•éŸ³é¢‘çŠ¶æ€
                const audioStatus = `
                    <div>ğŸµ æµ‹è¯•æ’­æ”¾å™¨çŠ¶æ€:</div>
                    <div>- æµ‹è¯•éŸ³é¢‘å…ƒç´ : ${!!testAudio ? 'âœ… å­˜åœ¨' : 'âŒ ä¸å­˜åœ¨'}</div>
                    <div>- éŸ³é¢‘æº: ${testAudio.src}</div>
                    <div>- éŸ³é¢‘çŠ¶æ€: ${testAudio.paused ? 'â¸ æš‚åœ' : 'â–¶ï¸ æ’­æ”¾ä¸­'}</div>
                    <div>- éŸ³é¢‘æ—¶é•¿: ${testAudio.duration || 'æœªçŸ¥'}</div>
                    <div>- éŸ³é¢‘å°±ç»ªçŠ¶æ€: ${testAudio.readyState}</div>
                `;
                
                debugOutput.innerHTML = audioStatus;
                
                // å°è¯•æ’­æ”¾æµ‹è¯•éŸ³é¢‘
                try {
                    testAudio.play().then(() => {
                        debugOutput.innerHTML += '<div style="color: green; margin-top: 10px;">âœ… æµ‹è¯•éŸ³é¢‘æ’­æ”¾æˆåŠŸ!</div>';
                    }).catch(err => {
                        debugOutput.innerHTML += `<div style="color: red; margin-top: 10px;">âŒ æµ‹è¯•éŸ³é¢‘æ’­æ”¾å¤±è´¥: ${err.message}</div>`;
                    });
                } catch (error) {
                    debugOutput.innerHTML += `<div style="color: red; margin-top: 10px;">âŒ æµ‹è¯•éŸ³é¢‘æ’­æ”¾å¼‚å¸¸: ${error.message}</div>`;
                }
            });
            
            // æµ‹è¯•éŸ³é¢‘äº‹ä»¶ç›‘å¬
            testAudio.addEventListener('loadstart', () => console.log('ğŸ”„ æµ‹è¯•éŸ³é¢‘å¼€å§‹åŠ è½½'));
            testAudio.addEventListener('canplay', () => console.log('âœ… æµ‹è¯•éŸ³é¢‘å¯ä»¥æ’­æ”¾'));
            testAudio.addEventListener('canplaythrough', () => console.log('âœ… æµ‹è¯•éŸ³é¢‘å¯ä»¥æµç•…æ’­æ”¾'));
            testAudio.addEventListener('error', (e) => console.error('âŒ æµ‹è¯•éŸ³é¢‘åŠ è½½é”™è¯¯:', e));
            
            console.log('âœ… ç®€å•æµ‹è¯•æ’­æ”¾å™¨åˆå§‹åŒ–å®Œæˆ');
        }
        
        // æŒ‰é’®ç‚¹å‡»æ³¢çº¹æ•ˆæœ
        document.addEventListener('DOMContentLoaded', function() {
            const statsButton = document.querySelector('.stats-button');
            
            if (statsButton) {
                statsButton.addEventListener('click', function(e) {
                    // åˆ›å»ºæ³¢çº¹æ•ˆæœ
                    const ripple = document.createElement('span');
                    const rect = this.getBoundingClientRect();
                    const size = Math.max(rect.width, rect.height);
                    const x = e.clientX - rect.left - size / 2;
                    const y = e.clientY - rect.top - size / 2;
                    
                    ripple.style.cssText = `
                        position: absolute;
                        width: ${size}px;
                        height: ${size}px;
                        left: ${x}px;
                        top: ${y}px;
                        background: rgba(255, 255, 255, 0.3);
                        border-radius: 50%;
                        transform: scale(0);
                        animation: ripple-animation 0.6s linear;
                        pointer-events: none;
                    `;
                    
                    this.appendChild(ripple);
                    
                    // åŠ¨ç”»ç»“æŸåç§»é™¤æ³¢çº¹å…ƒç´ 
                    setTimeout(() => {
                        ripple.remove();
                    }, 600);
                });
            }
        });
        
        // æ—…è¡Œè¯¦æƒ…å¼¹çª—åŠŸèƒ½
        function showTravelDetails() {
            console.log('ğŸ¯ showTravelDetailså‡½æ•°è¢«è°ƒç”¨');
            
            const modal = document.getElementById('travelModal');
            console.log('ğŸ” æŸ¥æ‰¾travelModalå…ƒç´ :', modal);
            
            if (modal) {
                console.log('âœ… æ‰¾åˆ°modalå…ƒç´ ï¼Œå¼€å§‹æ˜¾ç¤ºå¼¹çª—');
                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden'; // é˜²æ­¢èƒŒæ™¯æ»šåŠ¨
                
                // æ·»åŠ åŠ¨ç”»æ•ˆæœ
                setTimeout(() => {
                    modal.classList.add('modal-active');
                    console.log('ğŸ¬ å¼¹çª—åŠ¨ç”»å·²å¯åŠ¨');
                }, 10);
            } else {
                console.error('âŒ æ²¡æœ‰æ‰¾åˆ°travelModalå…ƒç´ ï¼');
                console.log('ğŸ” å½“å‰é¡µé¢ä¸­çš„æ‰€æœ‰å…ƒç´ :', document.querySelectorAll('*'));
            }
        }
        
        // ç…§ç‰‡å¼¹çª— - Draggable Cardç‰ˆæœ¬
        function showPhotosModal(place) {
            console.log('ğŸ“· æ‰“å¼€ç…§ç‰‡å¼¹çª—, åœ°ç‚¹:', place);
            const modal = document.getElementById('photosModal');
            const gallery = document.getElementById('photosGallery');
            if (!modal || !gallery) return;

            // æ—…è¡Œç…§ç‰‡æ•°æ® - ä½¿ç”¨æœ¬åœ°ç…§ç‰‡æ–‡ä»¶å¤¹
            // ç®€åŒ–è·¯å¾„å¤„ç†ï¼Œç›´æ¥ä½¿ç”¨è‹±æ–‡ç›®å½•å
            function rewritePhotoUrl(input) {
                try {
                    if (!input || typeof input !== 'string') return '';
                    // ç›´æ¥è¿”å›è·¯å¾„ï¼Œå› ä¸ºphotoDataä¸­å·²ç»ä½¿ç”¨æ­£ç¡®çš„è‹±æ–‡ç›®å½•å
                    return encodeURI(input);
                } catch (e) {
                    console.error('rewritePhotoUrl error:', e);
                    return input;
                }
            }
            const photoData = {
                'Thailand': [
                    { url: 'my photos/Thailand/Weixin Image_20250825230101_3.jpg', title: 'Tropical Beach', description: 'Beautiful beaches and crystal clear waters', date: '2010' },
                    { url: 'my photos/Thailand/Weixin Image_20250825230101_5.jpg', title: 'Temple Visit', description: 'Ancient temples and cultural heritage', date: '2010' },
                    { url: 'my photos/Thailand/Weixin Image_20250825230059_46.jpg', title: 'Street Food', description: 'Delicious Thai street food experience', date: '2010' },
                    { url: 'my photos/Thailand/Weixin Image_20250825230059_47.jpg', title: 'Cultural Experience', description: 'Rich Thai cultural heritage', date: '2010' },
                    { url: 'my photos/Thailand/Weixin Image_20250825230000_22.jpg', title: 'Local Life', description: 'Authentic local lifestyle', date: '2010' }
                ],
                'Taiwan': [
                    { url: 'my photos/Taiwan/Weixin Image_20250825230120_9.jpg', title: 'Mountain Views', description: 'Stunning mountain landscapes', date: '2013' },
                    { url: 'my photos/Taiwan/Weixin Image_20250825230120_10.jpg', title: 'Night Market', description: 'Vibrant night market culture', date: '2013' },
                    { url: 'my photos/Taiwan/Weixin Image_20250825230120_11.jpg', title: 'Cultural Sites', description: 'Rich cultural heritage sites', date: '2013' },
                    { url: 'my photos/Taiwan/Weixin Image_20250825230120_13.jpg', title: 'City Life', description: 'Urban exploration', date: '2013' },
                    { url: 'my photos/Taiwan/Weixin Image_20250825230120_16.jpg', title: 'Nature', description: 'Beautiful scenery', date: '2013' },
                    { url: 'my photos/Taiwan/Weixin Image_20250825230120_17.jpg', title: 'Culture', description: 'Local traditions', date: '2013' },
                    { url: 'my photos/Taiwan/Weixin Image_20250825230120_18.jpg', title: 'Food', description: 'Delicious cuisine', date: '2013' }
                ],
                "Xi'an, China": [
                    { url: 'my photos/Xi\'an/Weixin Image_20250825230100_11.jpg', title: 'Terracotta Warriors', description: 'Ancient terracotta army discovery', date: '2015' }
                ],
                'Hong Kong & Macau': [
                    { url: 'my photos/Hong Kong + Macau/Weixin Image_20250825230059_44.jpg', title: 'Victoria Harbor', description: 'Iconic harbor skyline views', date: '2016' },
                    { url: 'my photos/Hong Kong + Macau/Weixin Image_20250825230059_45.jpg', title: 'Skyline Night', description: 'Harbor nightscape', date: '2016' },
                    { url: 'my photos/Hong Kong + Macau/Weixin Image_20250825230100_10.jpg', title: 'Macau Architecture', description: 'Portuguese colonial architecture', date: '2016' },
                    { url: 'my photos/Hong Kong + Macau/Weixin Image_20250825230100_12.jpg', title: 'Street Markets', description: 'Bustling street market culture', date: '2016' }
                ],
                'Vietnam': [
                    { url: 'my photos/Vietnam/Weixin Image_20250825230101_1.jpg', title: 'Halong Bay', description: 'Majestic limestone islands', date: '2018' },
                    { url: 'my photos/Vietnam/Weixin Image_20250825230101_2.jpg', title: 'Ho Chi Minh City', description: 'Modern Vietnamese metropolis', date: '2018' },
                    { url: 'my photos/Vietnam/Weixin Image_20250825230101_4.jpg', title: 'Ancient Town', description: 'Cultural heritage', date: '2018' },
                    { url: 'my photos/Vietnam/Weixin Image_20250825230101_6.jpg', title: 'Street Food', description: 'Authentic Vietnamese cuisine', date: '2018' },
                    { url: 'my photos/Vietnam/Weixin Image_20250825230101_7.jpg', title: 'Cultural Experience', description: 'Rich Vietnamese culture', date: '2018' },
                    { url: 'my photos/Vietnam/Weixin Image_20250825230101_8.jpg', title: 'Local Life', description: 'Authentic local lifestyle', date: '2018' },
                    { url: 'my photos/Vietnam/Weixin Image_20250825230101_9.jpg', title: 'Natural Beauty', description: 'Stunning landscapes', date: '2018' }
                ],
                'Singapore & Malaysia': [
                    // ç›®å½•æš‚ç©ºï¼Œä½¿ç”¨é»˜è®¤å ä½ï¼ˆåœ¨ä¸‹æ–¹lengthåˆ¤æ–­ä¸­å¤„ç†ï¼‰
                ],
                'Siguniang Mountain, China': [
                    { url: 'my photos/Siguniang Mountain/Weixin Image_20250825230059_37.jpg', title: 'Snow Peaks', description: 'Four beautiful snow-capped peaks', date: '2017' },
                    { url: 'my photos/Siguniang Mountain/Weixin Image_20250825230059_38.jpg', title: 'Alpine Meadows', description: 'High altitude alpine landscapes', date: '2017' },
                    { url: 'my photos/Siguniang Mountain/Weixin Image_20250825230059_39.jpg', title: 'Mountain Hiking', description: 'Adventure hiking experience', date: '2017' },
                    { url: 'my photos/Siguniang Mountain/Weixin Image_20250825230059_40.jpg', title: 'Natural Beauty', description: 'Stunning natural scenery', date: '2017' },
                    { url: 'my photos/Siguniang Mountain/Weixin Image_20250825230059_41.jpg', title: 'High Altitude', description: 'Breathtaking mountain views', date: '2017' },
                    { url: 'my photos/Siguniang Mountain/Weixin Image_20250825230059_42.jpg', title: 'Adventure', description: 'Mountain climbing challenge', date: '2017' },
                    { url: 'my photos/Siguniang Mountain/Weixin Image_20250825230059_43.jpg', title: 'Landscape', description: 'Majestic mountain landscapes', date: '2017' }
                ],
                'Beijing, China': [
                    { url: 'my photos/Beijing/Weixin Image_20250825230100_27.jpg', title: 'Forbidden City', description: 'Imperial palace complex', date: '2019' },
                    { url: 'my photos/Beijing/Weixin Image_20250825230100_28.jpg', title: 'Great Wall', description: 'Ancient defensive structure', date: '2019' },
                    { url: 'my photos/Beijing/Weixin Image_20250825230100_29.jpg', title: 'Temple of Heaven', description: 'Sacred imperial temple', date: '2019' },
                    { url: 'my photos/Beijing/Weixin Image_20250825230100_30.jpg', title: 'Cultural Heritage', description: 'Rich Chinese history', date: '2019' },
                    { url: 'my photos/Beijing/Weixin Image_20250825230100_31.jpg', title: 'Ancient Architecture', description: 'Traditional Chinese buildings', date: '2019' },
                    { url: 'my photos/Beijing/Weixin Image_20250825230100_32.jpg', title: 'Imperial Gardens', description: 'Beautiful royal gardens', date: '2019' },
                    { url: 'my photos/Beijing/Weixin Image_20250825230100_33.jpg', title: 'Historical Sites', description: 'Important historical locations', date: '2019' },
                    { url: 'my photos/Beijing/Weixin Image_20250825230100_34.jpg', title: 'City Views', description: 'Panoramic city views', date: '2019' },
                    { url: 'my photos/Beijing/Weixin Image_20250825230059_35.jpg', title: 'Cultural Experience', description: 'Traditional Chinese culture', date: '2019' },
                    { url: 'my photos/Beijing/Weixin Image_20250825230059_36.jpg', title: 'Modern Beijing', description: 'Contemporary city life', date: '2019' }
                ],
                'Dubai, UAE': [
                    { url: 'my photos/Dubai/Weixin Image_20250825230100_23.jpg', title: 'Burj Khalifa', description: 'World\'s tallest building', date: '2019' },
                    { url: 'my photos/Dubai/Weixin Image_20250825230100_24.jpg', title: 'Desert Safari', description: 'Arabian desert adventure', date: '2019' },
                    { url: 'my photos/Dubai/Weixin Image_20250825230100_25.jpg', title: 'Palm Jumeirah', description: 'Artificial island paradise', date: '2019' },
                    { url: 'my photos/Dubai/Weixin Image_20250825230100_26.jpg', title: 'Modern Architecture', description: 'Futuristic city design', date: '2019' }
                ],
                'Yunnan & Guizhou, China': [
                    { url: 'my photos/Yunnan + Guizhou/Weixin Image_20250825230059_48.jpg', title: 'Stone Forest', description: 'Natural karst formations', date: '2021' },
                    { url: 'my photos/Yunnan + Guizhou/Weixin Image_20250825230059_49.jpg', title: 'Ethnic Villages', description: 'Traditional minority culture', date: '2021' },
                    { url: 'my photos/Yunnan + Guizhou/Weixin Image_20250825230059_50.jpg', title: 'Mountain Landscapes', description: 'Spectacular mountain views', date: '2021' }
                ],
                'Atlanta, USA': [
                    // å½“å‰ç›®å½•ä¸º USA/ï¼ˆæš‚ç©ºï¼‰ï¼Œä¿ç•™é»˜è®¤å ä½
                ]
            };

            const photos = (place && photoData[place] && photoData[place].length) ? photoData[place] : [
                { url: 'my photos/Thailand/Weixin Image_20250825230101_3.jpg', title: 'Travel Adventure', description: 'Amazing travel memories', date: '2010' },
                { url: 'my photos/Beijing/Weixin Image_20250825230100_27.jpg', title: 'Cultural Experience', description: 'Rich cultural heritage', date: '2019' },
                { url: 'my photos/Siguniang Mountain/Weixin Image_20250825230059_37.jpg', title: 'Natural Beauty', description: 'Stunning natural landscapes', date: '2017' }
            ];

            // åˆ›å»ºDraggable Card
            console.log('Photos to display:', photos);
            gallery.innerHTML = photos.map((photo, index) => {
                const processedUrl = rewritePhotoUrl(photo.url);
                console.log(`Photo ${index}:`, photo.url, '->', processedUrl);
                return `
                    <div class="draggable-card" data-index="${index}">
                        <img src="${processedUrl}" alt="photo-${index}" class="card-image" onerror="console.error('Failed to load image:', this.src)">
                    </div>
                `;
            }).join('');

            // åˆå§‹åŒ–Draggable CardåŠŸèƒ½
            initDraggableCards();

            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            setTimeout(() => modal.classList.add('modal-active'), 10);
        }

        // åˆå§‹åŒ–Draggable CardåŠŸèƒ½
        function initDraggableCards() {
            const cards = document.querySelectorAll('.draggable-card');
            
            cards.forEach(card => {
                let isDragging = false;
                let startX, startY, startRotateX, startRotateY;
                let currentX = 0, currentY = 0;
                let currentRotateX = 0, currentRotateY = 0;

                // é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶
                card.addEventListener('mousedown', (e) => {
                    isDragging = true;
                    card.classList.add('dragging');
                    
                    startX = e.clientX - currentX;
                    startY = e.clientY - currentY;
                    startRotateX = currentRotateX;
                    startRotateY = currentRotateY;
                    
                    e.preventDefault();
                });

                // é¼ æ ‡ç§»åŠ¨äº‹ä»¶
                document.addEventListener('mousemove', (e) => {
                    if (!isDragging) return;
                    
                    currentX = e.clientX - startX;
                    currentY = e.clientY - startY;
                    
                    // è®¡ç®—å€¾æ–œè§’åº¦
                    const rect = card.getBoundingClientRect();
                    const centerX = rect.left + rect.width / 2;
                    const centerY = rect.top + rect.height / 2;
                    
                    const deltaX = e.clientX - centerX;
                    const deltaY = e.clientY - centerY;
                    
                    currentRotateX = startRotateX + (deltaY / 10);
                    currentRotateY = startRotateY + (deltaX / 10);
                    
                    // åº”ç”¨å˜æ¢
                    card.style.transform = `translate(${currentX}px, ${currentY}px) rotateX(${currentRotateX}deg) rotateY(${currentRotateY}deg)`;
                });

                // é¼ æ ‡é‡Šæ”¾äº‹ä»¶
                document.addEventListener('mouseup', () => {
                    if (!isDragging) return;
                    
                    isDragging = false;
                    card.classList.remove('dragging');
                    
                    // å¼¹æ€§å›å¼¹åŠ¨ç”»
                    animateCardReturn(card, currentX, currentY, currentRotateX, currentRotateY);
                });

                // é¼ æ ‡æ‚¬åœæ•ˆæœ
                card.addEventListener('mouseenter', () => {
                    if (!isDragging) {
                        card.style.transform = 'translateY(-8px) scale(1.02)';
                    }
                });

                card.addEventListener('mouseleave', () => {
                    if (!isDragging) {
                        card.style.transform = 'translate(0, 0) rotateX(0deg) rotateY(0deg)';
                    }
                });
            });
        }

        // å¡ç‰‡å›å¼¹åŠ¨ç”»
        function animateCardReturn(card, x, y, rotateX, rotateY) {
            const duration = 600;
            const startTime = performance.now();
            
            function animate(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                // ä½¿ç”¨ç¼“åŠ¨å‡½æ•°
                const easeOut = 1 - Math.pow(1 - progress, 3);
                
                const currentX = x * (1 - easeOut);
                const currentY = y * (1 - easeOut);
                const currentRotateX = rotateX * (1 - easeOut);
                const currentRotateY = rotateY * (1 - easeOut);
                
                card.style.transform = `translate(${currentX}px, ${currentY}px) rotateX(${currentRotateX}deg) rotateY(${currentRotateY}deg)`;
                
                if (progress < 1) {
                    requestAnimationFrame(animate);
                } else {
                    card.style.transform = 'translate(0, 0) rotateX(0deg) rotateY(0deg)';
                }
            }
            
            requestAnimationFrame(animate);
        }

        function closePhotosModal() {
            const modal = document.getElementById('photosModal');
            if (!modal) return;
            modal.classList.remove('modal-active');
            setTimeout(() => {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }, 300);
        }

        function closeTravelModal() {
            const modal = document.getElementById('travelModal');
            if (modal) {
                modal.classList.remove('modal-active');
                setTimeout(() => {
                    modal.style.display = 'none';
                    document.body.style.overflow = 'auto'; // æ¢å¤èƒŒæ™¯æ»šåŠ¨
                }, 300);
            }
        }
        
        // ç‚¹å‡»é®ç½©å±‚å…³é—­å¼¹çª—
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ DOMåŠ è½½å®Œæˆï¼Œåˆå§‹åŒ–å¼¹çª—åŠŸèƒ½');
            
            const modal = document.getElementById('travelModal');
            const overlay = modal?.querySelector('.modal-overlay');
            
            if (overlay) {
                overlay.addEventListener('click', closePhotosModal);
                console.log('âœ… é®ç½©å±‚ç‚¹å‡»äº‹ä»¶å·²ç»‘å®š');
            }
            
            // ESCé”®å…³é—­å¼¹çª—
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeTravelModal();
                }
            });
            
            // å¤‡ç”¨ï¼šç›´æ¥ç»‘å®šæŒ‰é’®ç‚¹å‡»äº‹ä»¶
            const statsButton = document.querySelector('.stats-button');
            if (statsButton) {
                console.log('ğŸ”˜ æ‰¾åˆ°stats-buttonï¼Œç»‘å®šå¤‡ç”¨ç‚¹å‡»äº‹ä»¶');
                statsButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('ğŸ–±ï¸ å¤‡ç”¨äº‹ä»¶ç›‘å¬å™¨ï¼šæŒ‰é’®è¢«ç‚¹å‡»');
                    showPhotosModal();
                });
            } else {
                console.error('âŒ æ²¡æœ‰æ‰¾åˆ°stats-buttonæŒ‰é’®');
            }
        });
    </script>
</body>
</html>

