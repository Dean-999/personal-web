<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dean Shen - personal page</title>
    <link rel="stylesheet" href="css/personal.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script <!-- 3d-card.js inline -->></script>
    <script src="js/script.js"></script>
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <!-- Tech Travel Map Component -->
    <script src="js/tech-travel-map.js"></script>
    

    
    <script>
        // Global function definitions - optimized version
        function createTravelDetailsCard() {
            const card = document.createElement('div');
            card.className = 'travel-details-card';
            card.innerHTML = `
                <div class="card-content">
                    <div class="card-header">
                        <h3 class="card-title">‚úàÔ∏è Travel Journey</h3>
                        <p class="card-subtitle">My adventures around the world</p>
                    </div>
                    
                    <div class="travel-stats-grid">
                        <div class="stat-item">
                            <div class="stat-icon">üåç</div>
                            <div class="stat-number">11</div>
                            <div class="stat-label">Destinations</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon">üèôÔ∏è</div>
                            <div class="stat-number">15+</div>
                            <div class="stat-label">Cities</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon">üó∫Ô∏è</div>
                            <div class="stat-number">3</div>
                            <div class="stat-label">Continents</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon">‚è∞</div>
                            <div class="stat-number">12</div>
                            <div class="stat-label">Years</div>
                        </div>
                    </div>
                    
                    <div class="travel-timeline-mini">
                        <h4>Journey Timeline</h4>
                        <div class="timeline-items">
                            <div class="timeline-item-mini">
                                <span class="age">Age 3</span>
                                <span class="location">Thailand</span>
                            </div>
                            <div class="timeline-item-mini">
                                <span class="age">Age 6</span>
                                <span class="location">Taiwan</span>
                            </div>
                            <div class="timeline-item-mini">
                                <span class="age">Age 8</span>
                                <span class="location">Xi'an</span>
                            </div>
                            <div class="timeline-item-mini">
                                <span class="age">Age 9</span>
                                <span class="location">Hong Kong + Macau</span>
                            </div>
                            <div class="timeline-item-mini">
                                <span class="age">Age 10</span>
                                <span class="location">Singapore + Malaysia</span>
                            </div>
                            <div class="timeline-item-mini">
                                <span class="age">Age 12</span>
                                <span class="location">Dubai</span>
                            </div>
                            <div class="timeline-item-mini">
                                <span class="age">Age 14</span>
                                <span class="location">Yunnan + Guizhou</span>
                            </div>
                            <div class="timeline-item-mini">
                                <span class="age">Age 15</span>
                                <span class="location">USA</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="travel-quote">
                        <span class="quote-icon">üí≠</span>
                        "Every journey shapes a new perspective"
                    </div>
                </div>
            `;
            
            return card;
        }
        
        // Old showTravelDetails function has been removed, using new popup version
        
        // Initialize travel details button - completely independent version
        function initTravelDetailsButton() {
            console.log('üöÄ Initializing travel details button - completely independent version...');
            
            // Find button
            const statsButton = document.querySelector('.stats-button');
            if (!statsButton) {
                console.error('‚ùå stats-button not found!');
                return;
            }
            
            console.log('‚úÖ Found stats-button:', statsButton);
            console.log('Button text:', statsButton.textContent);
            console.log('Button class name:', statsButton.className);
            
            // Remove all existing event listeners
            const newButton = statsButton.cloneNode(true);
            statsButton.parentNode.replaceChild(newButton, statsButton);
            
            // Rebind events
            newButton.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                console.log('üñ±Ô∏è View Travel Photos button clicked!');
                showPhotosModal();
            });
            
            // Add hover effects
            newButton.style.cursor = 'pointer';
            newButton.style.transition = 'all 0.3s ease';
            
            newButton.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-2px)';
                this.style.boxShadow = '0 8px 25px rgba(0, 0, 0, 0.2)';
            });
            
            newButton.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
                this.style.boxShadow = '0 4px 15px rgba(0, 0, 0, 0.1)';
            });
            
            console.log('‚úÖ The binding of the travel details button event has been completed');
        }
        

        

        

            
            // Initialize chart functionality
            function initCharts() {
                console.log('üìä Start initializing the chart...');
                
                // Check if Chart.js is available
                if (typeof Chart === 'undefined') {
                    console.error('‚ùå Chart.js not loaded');
                    return;
                }
                console.log('‚úÖ Chart.js loaded');
                
                // Initialize time distribution chart
                const timeChartCtx = document.getElementById('timeChart');
                if (timeChartCtx) {
                    console.log('‚úÖ Found time chart canvas');
                    const timeChart = new Chart(timeChartCtx, {
                        type: 'bar',
                        data: {
                            labels: ['2 years', '3 years', '4 years', '5 years', '6 years', '7 years', '8 years', '9 years', '10 years', '11 years', '12 years', '13 years', '14 years', '15 years', '16 years'],
                            datasets: [{
                                label: 'Learning',
                                data: [90, 90, 90, 90, 90, 85, 85, 80, 80, 75, 75, 75, 80, 70, 70],
                                backgroundColor: 'rgba(74, 144, 226, 0.8)',
                                borderColor: '#4A90E2',
                                borderWidth: 1
                            }, {
                                label: 'Go Strategy',
                                data: [0, 0, 0, 0, 0, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0],
                                backgroundColor: 'rgba(126, 211, 33, 0.8)',
                                borderColor: '#7ED321',
                                borderWidth: 1
                            }, {
                                label: 'Mineral Research',
                                data: [0, 0, 0, 0, 0, 0, 0, 10, 10, 10, 10, 10, 10, 10, 10],
                                backgroundColor: 'rgba(80, 227, 194, 0.8)',
                                borderColor: '#50E3C2',
                                borderWidth: 1
                            }, {
                                label: 'Swimming',
                                data: [0, 0, 0, 0, 0, 0, 0, 0, 10, 10, 10, 10, 10, 10, 10],
                                backgroundColor: 'rgba(245, 166, 35, 0.8)',
                                borderColor: '#F5A623',
                                borderWidth: 1
                            }, {
                                label: 'Guitar',
                                data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 10, 10, 10, 10, 10],
                                backgroundColor: 'rgba(189, 16, 224, 0.8)',
                                borderColor: '#BD10E0',
                                borderWidth: 1
                            }, {
                                label: 'Robotics & 3D',
                                data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15],
                                backgroundColor: 'rgba(255, 107, 107, 0.8)',
                                borderColor: '#FF6B6B',
                                borderWidth: 1
                            }, {
                                label: 'UI/UX Design',
                                data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15],
                                backgroundColor: 'rgba(78, 205, 196, 0.8)',
                                borderColor: '#4ECDC4',
                                borderWidth: 1
                            }, {
                                label: 'Coding',
                                data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 10],
                                backgroundColor: 'rgba(150, 206, 180, 0.8)',
                                borderColor: '#96CEB4',
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: false
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    max: 100
                                }
                            }
                        }
                    });
                    console.log('‚úÖ Time chart initialization completed');
                } else {
                    console.error('‚ùå Time chart canvas not found');
                }
                
                // Initialize age activity distribution chart
                const ageChartCtx = document.getElementById('ageChart');
                if (ageChartCtx) {
                    console.log('‚úÖ Found age activity chart canvas');
                    const ageChart = new Chart(ageChartCtx, {
                        type: 'bar',
                        data: {
                            labels: ['0-2 years', '3-5 years', '6-8 years', '10-12 years', '12-14 years', '15 years', '15-16 years'],
                            datasets: [{
                                label: 'Family & Learning',
                                data: [100, 100, 80, 60, 80, 92, 45],
                                backgroundColor: '#4A90E2',
                                borderColor: '#4A90E2',
                                borderWidth: 0
                            }, {
                                label: 'Go Strategy',
                                data: [0, 0, 18, 0, 0, 0, 0],
                                backgroundColor: '#7ED321',
                                borderColor: '#7ED321',
                                borderWidth: 0
                            }, {
                                label: 'Mineral Interest',
                                data: [0, 0, 2, 5, 2, 0, 5],
                                backgroundColor: '#50E3C2',
                                borderColor: '#50E3C2',
                                borderWidth: 0
                            }, {
                                label: 'Swimming',
                                data: [0, 0, 0, 20, 10, 8, 15],
                                backgroundColor: '#F5A623',
                                borderColor: '#F5A623',
                                borderWidth: 0
                            }, {
                                label: 'Guitar',
                                data: [0, 0, 0, 15, 8, 0, 12],
                                backgroundColor: '#BD10E0',
                                borderColor: '#BD10E0',
                                borderWidth: 0
                            }, {
                                label: 'Robotics & 3D',
                                data: [0, 0, 0, 0, 0, 0, 8],
                                backgroundColor: '#FF6B6B',
                                borderColor: '#FF6B6B',
                                borderWidth: 0
                            }, {
                                label: 'UI/UX Design',
                                data: [0, 0, 0, 0, 0, 0, 8],
                                backgroundColor: '#4ECDC4',
                                borderColor: '#4ECDC4',
                                borderWidth: 0
                            }, {
                                label: 'Coding',
                                data: [0, 0, 0, 0, 0, 0, 7],
                                backgroundColor: '#96CEB4',
                                borderColor: '#96CEB4',
                                borderWidth: 0
                            }]
                        },
                        options: {
                            indexAxis: 'y', // Horizontal bar chart
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: false
                                },
                                tooltip: {
                                    callbacks: {
                                        label: function(context) {
                                            const label = context.dataset.label;
                                            const value = context.parsed.x;
                                            const ageGroup = context.label;
                                            
                                            // Return English detailed description
                                            return getActivityDescription(label, ageGroup, value);
                                        }
                                    }
                                }
                            },
                            scales: {
                                x: {
                                    stacked: true,
                                    beginAtZero: true,
                                    max: 100
                                },
                                y: {
                                    stacked: true
                                }
                            },
                            onClick: function(event, elements) {
                                if (elements.length > 0) {
                                    const element = elements[0];
                                    const datasetIndex = element.datasetIndex;
                                    const dataIndex = element.index;
                                    const dataset = this.data.datasets[datasetIndex];
                                    const label = dataset.label;
                                    const ageGroup = this.data.labels[dataIndex];
                                    const value = dataset.data[dataIndex];
                                    
                                    if (value > 0) {
                                        showActivityDetails(label, ageGroup, value);
                                    }
                                }
                            }
                        }
                    });
                    
                    // Add mouse cursor style
                    ageChartCtx.style.cursor = 'pointer';
                    
                    console.log('‚úÖ Age activity chart initialization completed');
                } else {
                    console.error('‚ùå Age activity chart canvas not found');
                }
            }
            
            // Get activity detailed description (English)
            function getActivityDescription(activity, ageGroup, value) {
                const descriptions = {
                    'Family & Learning': {
                        '0-2 years': 'Early childhood development focused on family bonding and basic learning skills',
                        '3-5 years': 'Preschool years with family-centered education and fundamental knowledge acquisition',
                        '6-8 years': 'Primary school foundation with family support and structured learning',
                        '10-12 years': 'Middle childhood with family guidance and academic development',
                        '12-14 years': 'Early adolescence with family involvement and educational growth',
                        '15 years': 'Teenage years balancing family support and independent learning',
                        '15-16 years': 'Late adolescence with family backing and advanced learning pursuits'
                    },
                    'Go Strategy': {
                        '6-8 years': 'Introduction to strategic thinking through Go board game',
                        'default': 'Strategic game learning and cognitive development'
                    },
                    'Mineral Interest': {
                        '6-8 years': 'Initial curiosity about minerals and natural sciences',
                        '10-12 years': 'Growing fascination with geology and mineralogy',
                        '12-14 years': 'Continued interest in earth sciences and mineral research',
                        '15-16 years': 'Advanced study of minerals and geological sciences'
                    },
                    'Swimming': {
                        '10-12 years': 'Learning fundamental swimming techniques and water safety',
                        '12-14 years': 'Improving swimming skills and building endurance',
                        '15 years': 'Advanced swimming techniques and competitive training',
                        '15-16 years': 'Mastery of swimming styles and fitness maintenance'
                    },
                    'Guitar': {
                        '10-12 years': 'Beginning guitar lessons and basic chord learning',
                        '12-14 years': 'Intermediate guitar skills and song repertoire building',
                        '15-16 years': 'Advanced guitar techniques and musical expression'
                    },
                    'Robotics & 3D': {
                        '15-16 years': 'Exploring robotics engineering and 3D design technologies'
                    },
                    'UI/UX Design': {
                        '15-16 years': 'Learning user interface and user experience design principles'
                    },
                    'Coding': {
                        '15-16 years': 'Programming fundamentals and software development basics'
                    }
                };
                
                const activityDesc = descriptions[activity];
                if (activityDesc && activityDesc[ageGroup]) {
                    return `${activity}: ${activityDesc[ageGroup]} (${value}%)`;
                } else if (activityDesc && activityDesc.default) {
                    return `${activity}: ${activityDesc.default} (${value}%)`;
                } else {
                    return `${activity}: ${value}%`;
                }
            }
            
            // Show activity detailed information popup
            function showActivityDetails(activity, ageGroup, value) {
                // Remove existing detail popup
                const existingPopup = document.querySelector('.activity-details-popup');
                if (existingPopup) {
                    existingPopup.remove();
                }
                
                const popup = document.createElement('div');
                popup.className = 'activity-details-popup';
                popup.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: white;
                    border: 2px solid #667eea;
                    border-radius: 16px;
                    padding: 25px;
                    max-width: 500px;
                    width: 90%;
                    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
                    z-index: 10000;
                    opacity: 0;
                    transition: all 0.3s ease;
                    font-family: 'Bree Serif', serif;
                `;
                
                const activityInfo = getActivityInfo(activity, ageGroup, value);
                
                popup.innerHTML = `
                    <div class="popup-header">
                        <h3 style="margin: 0 0 15px 0; color: #667eea; font-size: 24px;">
                            ${activityInfo.icon} ${activity}
                        </h3>
                        <div style="font-size: 18px; color: #666; margin-bottom: 20px;">
                            Age Group: <strong>${ageGroup}</strong> | Percentage: <strong>${value}%</strong>
                        </div>
                    </div>
                    
                    <div class="popup-content">
                        <h4 style="color: #333; margin: 0 0 15px 0; font-size: 18px;">Activity Description</h4>
                        <p style="color: #555; line-height: 1.6; margin: 0 0 20px 0; font-size: 16px;">
                            ${activityInfo.description}
                        </p>
                        
                        <h4 style="color: #333; margin: 0 0 15px 0; font-size: 18px;">Key Skills Developed</h4>
                        <ul style="color: #555; line-height: 1.6; margin: 0 0 20px 0; padding-left: 20px;">
                            ${activityInfo.skills.map(skill => `<li>${skill}</li>`).join('')}
                        </ul>
                        
                        <h4 style="color: #333; margin: 0 0 15px 0; font-size: 18px;">Impact on Development</h4>
                        <p style="color: #555; line-height: 1.6; margin: 0; font-size: 16px;">
                            ${activityInfo.impact}
                        </p>
                    </div>
                    
                    <div class="popup-footer" style="text-align: center; margin-top: 25px;">
                        <button onclick="this.parentElement.parentElement.remove()" 
                                style="background: #667eea; color: white; border: none; padding: 10px 25px; 
                                       border-radius: 8px; cursor: pointer; font-size: 16px; transition: all 0.3s ease;">
                            Close
                        </button>
                    </div>
                `;
                
                document.body.appendChild(popup);
                
                // Show animation
                setTimeout(() => {
                    popup.style.opacity = '1';
                }, 10);
                
                // Close on outside click
                popup.addEventListener('click', function(e) {
                    if (e.target === popup) {
                        popup.remove();
                    }
                });
            }
            
            // Get activity detailed information
            function getActivityInfo(activity, ageGroup, value) {
                const activityData = {
                    'Family & Learning': {
                        icon: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶',
                        description: 'This activity represents the foundational learning experiences that occur within the family environment, including basic education, moral values, and life skills development.',
                        skills: ['Social interaction', 'Basic literacy', 'Moral reasoning', 'Life skills', 'Emotional intelligence'],
                        impact: 'Family & Learning provides the essential foundation for all other developmental areas, creating a secure base for future growth and learning.'
                    },
                    'Go Strategy': {
                        icon: 'üéØ',
                        description: 'Go Strategy involves learning and practicing the ancient board game Go, which develops strategic thinking, planning, and analytical skills.',
                        skills: ['Strategic planning', 'Critical thinking', 'Patience', 'Analytical reasoning', 'Decision making'],
                        impact: 'Go Strategy enhances cognitive abilities and teaches valuable life lessons about planning, patience, and strategic thinking.'
                    },
                    'Mineral Interest': {
                        icon: 'üíé',
                        description: 'Mineral Interest represents the fascination with geology, mineralogy, and earth sciences, fostering scientific curiosity and research skills.',
                        skills: ['Scientific observation', 'Research methodology', 'Classification skills', 'Natural curiosity', 'Analytical thinking'],
                        impact: 'Mineral Interest develops scientific thinking and research skills, potentially leading to future careers in geology or related sciences.'
                    },
                    'Swimming': {
                        icon: 'üèä‚Äç‚ôÇÔ∏è',
                        description: 'Swimming activities focus on water safety, physical fitness, and competitive swimming techniques, promoting both health and athletic development.',
                        skills: ['Water safety', 'Physical coordination', 'Endurance building', 'Competitive spirit', 'Discipline'],
                        impact: 'Swimming improves physical fitness, builds confidence, and develops important life-saving water safety skills.'
                    },
                    'Guitar': {
                        icon: 'üé∏',
                        description: 'Guitar learning involves musical education, instrument mastery, and artistic expression, developing both technical and creative abilities.',
                        skills: ['Musical theory', 'Fine motor skills', 'Creative expression', 'Performance confidence', 'Rhythm and timing'],
                        impact: 'Guitar playing enhances creativity, improves coordination, and provides a lifelong source of artistic expression and stress relief.'
                    },
                    'Robotics & 3D': {
                        icon: 'ü§ñ',
                        description: 'Robotics & 3D activities involve engineering principles, programming, and design thinking, preparing for future technology careers.',
                        skills: ['Engineering principles', 'Programming logic', '3D design', 'Problem solving', 'Innovation'],
                        impact: 'Robotics & 3D skills are essential for future careers in technology and engineering, fostering innovation and problem-solving abilities.'
                    },
                    'UI/UX Design': {
                        icon: 'üé®',
                        description: 'UI/UX Design focuses on user interface and user experience design principles, combining creativity with technical understanding.',
                        skills: ['Design thinking', 'User empathy', 'Visual communication', 'Prototyping', 'User research'],
                        impact: 'UI/UX Design skills are crucial in today\'s digital world, opening doors to careers in design, technology, and product development.'
                    },
                    'Coding': {
                        icon: 'üíª',
                        description: 'Coding activities involve learning programming languages and software development, developing logical thinking and problem-solving skills.',
                        skills: ['Logical thinking', 'Problem solving', 'Algorithm design', 'Debugging', 'Software development'],
                        impact: 'Coding skills are fundamental in the digital age, providing opportunities in technology, science, and various other fields requiring analytical thinking.'
                    }
                };
                
                return activityData[activity] || {
                    icon: 'üìö',
                    description: 'This activity contributes to personal development and skill building during this age period.',
                    skills: ['Skill development', 'Personal growth', 'Learning', 'Experience building'],
                    impact: 'This activity plays an important role in overall development and future success.'
                };
            }
            
            // Delay chart initialization to ensure DOM is fully loaded
            setTimeout(() => {
                initCharts();
            }, 500);
            
            // Delay Aceternity Timeline initialization
            setTimeout(() => {
                initAceternityTimeline();
            }, 800);
            
            // World map implementation - using Leaflet real map
            function initWorldMap() {
                console.log('üó∫Ô∏è Initializing real world map...');
                
                const mapContainer = document.getElementById('worldMapCanvas');
                const svg = document.getElementById('connectionLines');
                const markers = document.getElementById('cityMarkers');
                
                if (!mapContainer || !svg || !markers) {
                    console.error('Map elements not found:', {
                        mapContainer: !!mapContainer,
                        svg: !!svg,
                        markers: !!markers
                    });
                    return;
                }
                
                // Clear existing content
                mapContainer.innerHTML = '';
                svg.innerHTML = '';
                markers.innerHTML = '';
                
                // Set map container styles
                mapContainer.style.width = '100%';
                mapContainer.style.height = '400px';
                mapContainer.style.minHeight = '400px';
                mapContainer.style.position = 'relative';
                mapContainer.style.zIndex = '1';
                
                console.log('üìç Map container ready');
                
                // Travel route data - update based on actual travel experiences
                const travelRoutes = [
                    // Domestic travel
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 39.90, lng: 116.41, label: 'Beijing', country: 'China' }, type: 'domestic' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 34.26, lng: 108.94, label: 'Xi\'an', country: 'China' }, type: 'domestic' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 22.32, lng: 114.17, label: 'Hong Kong', country: 'China' }, type: 'domestic' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 22.20, lng: 113.54, label: 'Macau', country: 'China' }, type: 'domestic' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 25.05, lng: 102.73, label: 'Kunming', country: 'China' }, type: 'domestic' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 26.65, lng: 106.63, label: 'Guiyang', country: 'China' }, type: 'domestic' },
                    
                    // International travel
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 13.76, lng: 100.50, label: 'Bangkok', country: 'Thailand' }, type: 'international' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 25.03, lng: 121.57, label: 'Taipei', country: 'Taiwan' }, type: 'international' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 1.35, lng: 103.82, label: 'Singapore', country: 'Singapore' }, type: 'international' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 3.14, lng: 101.69, label: 'Kuala Lumpur', country: 'Malaysia' }, type: 'international' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 25.20, lng: 55.27, label: 'Dubai', country: 'UAE' }, type: 'international' },
                    { start: { lat: 30.67, lng: 104.06, label: 'Chengdu', country: 'China' }, end: { lat: 33.75, lng: -84.39, label: 'Atlanta', country: 'USA' }, type: 'international' }
                ];
                
                // Create Leaflet map
                const map = L.map(mapContainer, {
                    center: [25, 0], // Adjust center position to better display the globe
                    zoom: 2, // Lower zoom level to show more world map
                    zoomControl: false, // Disable default zoom control
                    attributionControl: false, // Disable default attribution control
                    dragging: true,
                    touchZoom: true,
                    scrollWheelZoom: false, // Disable scroll wheel zoom
                    doubleClickZoom: false,
                    boxZoom: false,
                    keyboard: false,
                    tap: false,
                    maxBounds: [[-90, -180], [90, 180]], // Limit map boundaries
                    maxBoundsViscosity: 1.0 // Boundary viscosity
                });
                
                // Add dark theme OpenStreetMap tiles
                const darkTileLayer = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
                    attribution: '¬©OpenStreetMap contributors ¬©CARTO',
                    subdomains: 'abcd',
                    maxZoom: 19
                });
                
                darkTileLayer.addTo(map);
                
                // Add zoom control
                L.control.zoom({
                    position: 'bottomright',
                    zoomInTitle: 'Zoom In',
                    zoomOutTitle: 'Zoom Out'
                }).addTo(map);
                
                // Hide default zoom control
                setTimeout(() => {
                    const defaultZoomControl = document.querySelector('.leaflet-control-zoom');
                    if (defaultZoomControl) {
                        defaultZoomControl.style.display = 'none';
                    }
                }, 100);
                
                // Add manual zoom buttons
                const manualZoomControl = L.Control.extend({
                    options: {
                        position: 'bottomleft'
                    },
                    
                    onAdd: function(map) {
                        console.log('üîß Starting to create manual zoom control...');
                        
                        const container = L.DomUtil.create('div', 'manual-zoom-control');
                        container.style.cssText = `
                            position: absolute;
                            z-index: 1000;
                            margin: 10px;
                            pointer-events: auto;
                        `;
                        
                        container.innerHTML = `
                            <div style="
                                background: rgba(15, 23, 42, 0.95); 
                                color: white; 
                                border-radius: 8px; 
                                overflow: hidden; 
                                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
                                border: 1px solid rgba(14, 165, 233, 0.5);
                                display: block;
                                position: relative;
                                z-index: 1001;
                            ">
                                <button id="zoomInBtn" style="
                                    display: block; 
                                    width: 40px; 
                                    height: 40px; 
                                    background: linear-gradient(135deg, #0ea5e9, #3b82f6); 
                                    color: white; 
                                    border: none; 
                                    font-size: 18px; 
                                    font-weight: bold; 
                                    cursor: pointer; 
                                    transition: all 0.3s ease;
                                    outline: none;
                                ">+</button>
                                <button id="zoomOutBtn" style="
                                    display: block; 
                                    width: 40px; 
                                    height: 40px; 
                                    background: linear-gradient(135deg, #0ea5e9, #3b82f6); 
                                    color: white; 
                                    border: none; 
                                    font-size: 18px; 
                                    font-weight: bold; 
                                    cursor: pointer; 
                                    transition: all 0.3s ease;
                                    outline: none;
                                ">‚àí</button>
                            </div>
                        `;
                        
                        console.log('üîß Manual zoom control HTML created');
                        
                        // Add zoom in functionality
                        const zoomInBtn = container.querySelector('#zoomInBtn');
                        if (zoomInBtn) {
                            zoomInBtn.addEventListener('click', () => {
                                console.log('üîç Zoom in button clicked');
                                map.zoomIn();
                            });
                            
                            // Add hover effects
                            zoomInBtn.addEventListener('mouseenter', () => {
                                zoomInBtn.style.transform = 'scale(1.1)';
                                zoomInBtn.style.background = 'linear-gradient(135deg, #0284c7, #2563eb)';
                            });
                            zoomInBtn.addEventListener('mouseleave', () => {
                                zoomInBtn.style.transform = 'scale(1)';
                                zoomInBtn.style.background = 'linear-gradient(135deg, #0ea5e9, #3b82f6)';
                            });
                        } else {
                            console.error('‚ùå Zoom in button not found');
                        }
                        
                        // Add zoom out functionality
                        const zoomOutBtn = container.querySelector('#zoomOutBtn');
                        if (zoomOutBtn) {
                            zoomOutBtn.addEventListener('click', () => {
                                console.log('üîç Zoom out button clicked');
                                map.zoomOut();
                            });
                            
                            // Add hover effects
                            zoomOutBtn.addEventListener('mouseenter', () => {
                                zoomOutBtn.style.transform = 'scale(1.1)';
                                zoomOutBtn.style.background = 'linear-gradient(135deg, #0284c7, #2563eb)';
                            });
                            zoomOutBtn.addEventListener('mouseleave', () => {
                                zoomOutBtn.style.transform = 'scale(1)';
                                zoomOutBtn.style.background = 'linear-gradient(135deg, #0ea5e9, #3b82f6)';
                            });
                        } else {
                            console.error('‚ùå Zoom out button not found');
                        }
                        
                        console.log('‚úÖ Manual zoom control creation completed');
                        return container;
                    }
                });
                
                // Force add manual zoom control
                const manualControl = new manualZoomControl();
                map.addControl(manualControl);
                
                // Directly add zoom buttons to map container (backup solution)
                setTimeout(() => {
                    console.log('üîß Adding backup zoom buttons to map container...');
                    const mapContainer = document.getElementById('worldMapCanvas');
                    if (mapContainer) {
                        // Create backup zoom control container
                        const backupContainer = document.createElement('div');
                        backupContainer.id = 'backupZoomControls';
                        backupContainer.style.cssText = `
                            position: absolute;
                            bottom: 20px;
                            left: 20px;
                            z-index: 1000;
                            display: block;
                            pointer-events: auto;
                        `;
                        
                        backupContainer.innerHTML = `
                            <div style="
                                background: rgba(15, 23, 42, 0.95); 
                                color: white; 
                                border-radius: 8px; 
                                overflow: hidden; 
                                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3), 0 0 15px rgba(14, 165, 233, 0.3);
                                border: 1px solid rgba(14, 165, 233, 0.6);
                                position: relative;
                            ">
                                <div style="
                                    position: absolute;
                                    top: 0;
                                    left: 0;
                                    right: 0;
                                    height: 1px;
                                    background: linear-gradient(90deg, transparent, #0ea5e9, transparent);
                                    animation: scan 3s linear infinite;
                                "></div>
                                <button id="backupZoomInBtn" style="
                                    display: block; 
                                    width: 40px; 
                                    height: 40px; 
                                    background: linear-gradient(135deg, #0ea5e9, #3b82f6); 
                                    color: white; 
                                    border: none; 
                                    font-size: 18px; 
                                    font-weight: bold; 
                                    cursor: pointer; 
                                    transition: all 0.3s ease;
                                    outline: none;
                                    position: relative;
                                    overflow: hidden;
                                ">+</button>
                                <button id="backupZoomOutBtn" style="
                                    display: block; 
                                    width: 40px; 
                                    height: 40px; 
                                    background: linear-gradient(135deg, #0ea5e9, #3b82f6); 
                                    color: white; 
                                    border: none; 
                                    font-size: 18px; 
                                    font-weight: bold; 
                                    cursor: pointer; 
                                    transition: all 0.3s ease;
                                    outline: none;
                                    position: relative;
                                    overflow: hidden;
                                ">‚àí</button>
                            </div>
                        `;
                        
                        // Add to map container
                        mapContainer.appendChild(backupContainer);
                        console.log('‚úÖ Backup zoom buttons added to map container');
                        
                        // Add functionality
                        const backupZoomInBtn = document.getElementById('backupZoomInBtn');
                        const backupZoomOutBtn = document.getElementById('backupZoomOutBtn');
                        
                        if (backupZoomInBtn) {
                            backupZoomInBtn.addEventListener('click', () => {
                                console.log('üîç Backup zoom in button clicked');
                                map.zoomIn();
                            });
                            
                            backupZoomInBtn.addEventListener('mouseenter', () => {
                                backupZoomInBtn.style.transform = 'scale(1.1)';
                                backupZoomInBtn.style.background = 'linear-gradient(135deg, #0284c7, #2563eb)';
                            });
                            backupZoomInBtn.addEventListener('mouseleave', () => {
                                backupZoomInBtn.style.transform = 'scale(1)';
                                backupZoomInBtn.style.background = 'linear-gradient(135deg, #0ea5e9, #3b82f6)';
                            });
                        }
                        
                        if (backupZoomOutBtn) {
                            backupZoomOutBtn.addEventListener('click', () => {
                                console.log('üîç Backup zoom out button clicked');
                                map.zoomOut();
                            });
                            
                            backupZoomOutBtn.addEventListener('mouseenter', () => {
                                backupZoomOutBtn.style.transform = 'scale(1.1)';
                                backupZoomOutBtn.style.background = 'linear-gradient(135deg, #0284c7, #2563eb)';
                            });
                            backupZoomOutBtn.addEventListener('mouseleave', () => {
                                backupZoomOutBtn.style.transform = 'scale(1)';
                                backupZoomOutBtn.style.background = 'linear-gradient(135deg, #0ea5e9, #3b82f6)';
                            });
                        }
                    }
                }, 500);
                
                // After map loads, adjust view to show all markers
                map.whenReady(() => {
                    // Calculate boundaries of all cities
                    const allCities = [];
                    travelRoutes.forEach(route => {
                        allCities.push([route.start.lat, route.start.lng]);
                        allCities.push([route.end.lat, route.end.lng]);
                    });
                    
                    // Ensure map can display all cities
                    const bounds = L.latLngBounds(allCities);
                    map.fitBounds(bounds, { 
                        padding: [50, 50], // Add padding
                        maxZoom: 4 // Limit maximum zoom level
                    });
                });
                
                console.log('üó∫Ô∏è Leaflet map creation completed');
                
                // Create connection lines
                function createConnectionLines() {
                    console.log('üîó Starting to create connection lines...');
                    
                    travelRoutes.forEach((route, i) => {
                        // Create curved path
                        const startPoint = [route.start.lat, route.start.lng];
                        const endPoint = [route.end.lat, route.end.lng];
                        
                        // Calculate middle control point (create arc effect)
                        const midLat = (startPoint[0] + endPoint[0]) / 2;
                        const midLng = (startPoint[1] + endPoint[1]) / 2;
                        
                        // Adjust curvature based on route type
                        const baseOffset = route.type === 'international' ? 45 : 25; // International routes have more curvature
                        const offset = baseOffset + Math.random() * 10; // Add random variation
                        
                        // Create arc path
                        const curvePoints = [];
                        const steps = 80; // Increase steps to make curve smoother
                        
                        for (let j = 0; j <= steps; j++) {
                            const t = j / steps;
                            const lat = startPoint[0] + (endPoint[0] - startPoint[0]) * t;
                            const lng = startPoint[1] + (endPoint[1] - startPoint[1]) * t;
                            
                            // Add arc offset - use sine function to create more natural curve
                            const curveOffset = Math.sin(Math.PI * t) * offset;
                            const curveLat = lat + curveOffset * 0.015; // Increase vertical offset
                            
                            // Add slight horizontal curvature
                            const horizontalCurve = Math.sin(Math.PI * t) * (route.type === 'international' ? 20 : 12);
                            const curveLng = lng + horizontalCurve * 0.01;
                            
                            // Add extra curve variation to make each route more unique
                            const extraCurve = Math.sin(Math.PI * t * 2) * (route.type === 'international' ? 12 : 6);
                            const finalLat = curveLat + extraCurve * 0.005;
                            
                            curvePoints.push([finalLat, curveLng]);
                        }
                        
                        // Create path
                        const path = L.polyline(curvePoints, {
                            color: '#0ea5e9', // Blue fluorescent line
                            weight: 2, // Main line
                            opacity: 0,
                            dashArray: '8, 8', // Dashed line effect
                            lineCap: 'round',
                            lineJoin: 'round'
                        });
                        
                        // Add glow effect
                        const glowPath = L.polyline(curvePoints, {
                            color: '#0ea5e9', // Blue fluorescent
                            weight: 6, // Medium glow
                            opacity: 0,
                            fill: false
                        });
                        
                        // Add stronger glow effect
                        const strongGlowPath = L.polyline(curvePoints, {
                            color: '#0ea5e9',
                            weight: 10, // Strong glow
                            opacity: 0,
                            fill: false
                        });
                        
                        // Add outermost glow effect
                        const outerGlowPath = L.polyline(curvePoints, {
                            color: '#0ea5e9',
                            weight: 16, // Outermost glow
                            opacity: 0,
                            fill: false
                        });
                        
                        outerGlowPath.addTo(map);
                        strongGlowPath.addTo(map);
                        glowPath.addTo(map);
                        path.addTo(map);
                        
                        // Delay display animation
                        setTimeout(() => {
                            path.setStyle({ opacity: 1 });
                            glowPath.setStyle({ opacity: 0.6 });
                            strongGlowPath.setStyle({ opacity: 0.4 });
                            outerGlowPath.setStyle({ opacity: 0.2 });
                            
                            // Dashed line animation - simulate aircraft movement
                            let dashOffset = 20;
                            const animateDash = () => {
                                dashOffset -= 1.2; // Faster dashed line animation
                                if (dashOffset < 0) dashOffset = 20;
                                path.setStyle({ dashOffset: dashOffset });
                                requestAnimationFrame(animateDash);
                            };
                            animateDash();
                            
                            // Fluorescent breathing effect
                            let glowOpacity = 0.2;
                            let glowDirection = 1;
                            const animateGlow = () => {
                                glowOpacity += 0.03 * glowDirection;
                                if (glowOpacity >= 0.6) glowDirection = -1;
                                if (glowOpacity <= 0.1) glowDirection = 1;
                                
                                strongGlowPath.setStyle({ opacity: glowOpacity });
                                outerGlowPath.setStyle({ opacity: glowOpacity * 0.5 });
                                requestAnimationFrame(animateGlow);
                            };
                            animateGlow();
                            
                            // Add pulse effect
                            let pulseOpacity = 0.4;
                            let pulseDirection = 1;
                            const animatePulse = () => {
                                pulseOpacity += 0.02 * pulseDirection;
                                if (pulseOpacity >= 0.8) pulseDirection = -1;
                                if (pulseOpacity <= 0.2) pulseDirection = 1;
                                
                                glowPath.setStyle({ opacity: pulseOpacity });
                                requestAnimationFrame(animatePulse);
                            };
                            animatePulse();
                            
                        }, i * 400); // Adjust delay to create wave effect
                        
                        console.log(`üîó Connection line ${i + 1}: ${route.start.label} -> ${route.end.label} (${route.type})`);
                    });
                }
                
                // Create city markers
                function createCityMarkers() {
                    console.log('üìç Starting to create city markers...');
                    
                    const allCities = new Set();
                    travelRoutes.forEach(route => {
                        allCities.add(route.start);
                        allCities.add(route.end);
                    });
                    
                    Array.from(allCities).forEach((city, i) => {
                        // Create city marker
                        const marker = L.circleMarker([city.lat, city.lng], {
                            radius: city.label === 'Chengdu' ? 12 : 8,
                            fillColor: city.label === 'Chengdu' ? '#f59e0b' : '#0ea5e9', // Chengdu remains gold, other cities use blue
                            color: '#ffffff',
                            weight: city.label === 'Chengdu' ? 3 : 2,
                            opacity: 1,
                            fillOpacity: 0.8
                        });
                        
                        // Add pulse animation
                        marker.setStyle({ opacity: 0 });
                        marker.addTo(map);
                        
                        // Add fluorescent effect for blue city markers
                        if (city.label !== 'Chengdu') {
                            // Create fluorescent halo
                            const glowMarker = L.circleMarker([city.lat, city.lng], {
                                radius: city.label === 'Chengdu' ? 16 : 12,
                                fillColor: 'transparent',
                                color: '#0ea5e9',
                                weight: 2,
                                opacity: 0,
                                fillOpacity: 0
                            });
                            
                            glowMarker.addTo(map);
                            
                            // Fluorescent animation
                            let glowRadius = city.label === 'Chengdu' ? 16 : 12;
                            let glowDirection = 1;
                            const animateGlowMarker = () => {
                                glowRadius += 0.5 * glowDirection;
                                if (glowRadius >= (city.label === 'Chengdu' ? 20 : 16)) glowDirection = -1;
                                if (glowRadius <= (city.label === 'Chengdu' ? 16 : 12)) glowDirection = 1;
                                
                                glowMarker.setStyle({ 
                                    radius: glowRadius,
                                    opacity: 0.6 - (glowRadius - (city.label === 'Chengdu' ? 16 : 12)) * 0.1
                                });
                                requestAnimationFrame(animateGlowMarker);
                            };
                            animateGlowMarker();
                        }
                        
                        // Create city label
                        const popup = L.popup({
                            className: 'city-popup',
                            closeButton: false,
                            autoClose: false,
                            closeOnClick: false
                        }).setContent(`
                            <div style="text-align: center; font-family: Arial, sans-serif;">
                                <div style="font-weight: bold; font-size: 14px; margin-bottom: 4px; color: ${city.label === 'Chengdu' ? '#f59e0b' : '#0ea5e9'};">${city.label}</div>
                                <div style="font-size: 11px; opacity: 0.8;">${city.country}</div>
                            </div>
                        `);
                        
                        // Hover effect
                        marker.on('mouseover', function() {
                            this.setStyle({ 
                                radius: city.label === 'Chengdu' ? 16 : 12,
                                fillOpacity: 1,
                                weight: city.label === 'Chengdu' ? 4 : 3
                            });
                            popup.setLatLng([city.lat, city.lng]).openOn(map);
                        });
                        
                        marker.on('mouseout', function() {
                            this.setStyle({ 
                                radius: city.label === 'Chengdu' ? 12 : 8,
                                fillOpacity: 0.8,
                                weight: city.label === 'Chengdu' ? 3 : 2
                            });
                            map.closePopup(popup);
                        });
                        
                        // Delay display
                        setTimeout(() => {
                            marker.setStyle({ opacity: 1 });
                        }, i * 300);
                        
                        console.log(`üìç City marker: ${city.label} at (${city.lat}, ${city.lng})`);
                    });
                }
                
                // Add custom map controls
                const customControl = L.Control.extend({
                    options: {
                        position: 'topright'
                    },
                    
                    onAdd: function(map) {
                        const container = L.DomUtil.create('div', 'custom-map-control');
                        container.innerHTML = `
                            <div style="
                                background: rgba(15, 23, 42, 0.95); 
                                color: white; 
                                padding: 15px; 
                                border-radius: 12px; 
                                font-family: Arial, sans-serif; 
                                font-size: 12px; 
                                backdrop-filter: blur(20px); 
                                border: 1px solid rgba(14, 165, 233, 0.6); 
                                box-shadow: 0 10px 40px rgba(14, 165, 233, 0.4), 0 0 20px rgba(14, 165, 233, 0.2);
                                position: relative;
                                overflow: hidden;
                            ">
                                <div style="
                                    position: absolute;
                                    top: 0;
                                    left: 0;
                                    right: 0;
                                    height: 2px;
                                    background: linear-gradient(90deg, transparent, #0ea5e9, transparent);
                                    animation: scan 2s linear infinite;
                                "></div>
                                <div style="font-weight: bold; margin-bottom: 8px; color: #0ea5e9; font-size: 13px;">Global Connectivity</div>
                                <div style="opacity: 0.9; margin-bottom: 6px;">12 Routes ‚Ä¢ 13 Cities</div>
                                <div style="font-size: 10px; opacity: 0.7; margin-bottom: 8px;">6 Domestic ‚Ä¢ 6 International</div>
                                <button id="resetViewBtn" style="
                                    background: linear-gradient(135deg, #0ea5e9, #3b82f6); 
                                    color: white; 
                                    border: none; 
                                    padding: 6px 12px; 
                                    border-radius: 6px; 
                                    font-size: 10px; 
                                    cursor: pointer; 
                                    transition: all 0.3s ease; 
                                    width: 100%;
                                    position: relative;
                                    overflow: hidden;
                                ">Reset View</button>
                            </div>
                        `;
                        
                        // Add reset view functionality
                        const resetBtn = container.querySelector('#resetViewBtn');
                        resetBtn.addEventListener('click', () => {
                            const allCities = [];
                            travelRoutes.forEach(route => {
                                allCities.push([route.start.lat, route.start.lng]);
                                allCities.push([route.end.lat, route.end.lng]);
                            });
                            
                            const bounds = L.latLngBounds(allCities);
                            map.fitBounds(bounds, { 
                                padding: [50, 50],
                                maxZoom: 4
                            });
                        });
                        
                        return container;
                    }
                });
                
                map.addControl(new customControl());
                
                // Add animation styles
                if (!document.getElementById('mapStyles')) {
                    const style = document.createElement('style');
                    style.id = 'mapStyles';
                    style.textContent = `
                        .custom-map-control {
                            margin: 10px;
                        }
                        
                        .manual-zoom-control {
                            margin: 10px;
                        }
                        
                        .manual-zoom-control button:hover {
                            background: linear-gradient(135deg, #0284c7, #2563eb) !important;
                        }
                        
                        /* Force display manual zoom control */
                        .manual-zoom-control {
                            display: block !important;
                            visibility: visible !important;
                            opacity: 1 !important;
                            position: absolute !important;
                            z-index: 1000 !important;
                            pointer-events: auto !important;
                        }
                        
                        .manual-zoom-control button {
                            display: block !important;
                            visibility: visible !important;
                            opacity: 1 !important;
                        }
                        
                        /* Backup zoom control styles */
                        #backupZoomControls {
                            display: block !important;
                            visibility: visible !important;
                            opacity: 1 !important;
                        }
                        
                        /* Scan animation */
                        @keyframes scan {
                            0% { transform: translateX(-100%); }
                            100% { transform: translateX(100%); }
                        }
                        
                        /* Map control hover effects */
                        .custom-map-control button:hover {
                            background: linear-gradient(135deg, #0284c7, #2563eb) !important;
                            transform: translateY(-1px);
                            box-shadow: 0 4px 15px rgba(14, 165, 233, 0.4);
                        }
                        
                        .city-popup .leaflet-popup-content-wrapper {
                            background: rgba(15, 23, 42, 0.95);
                            color: white;
                            border: 1px solid rgba(59, 130, 246, 0.3);
                            border-radius: 8px;
                            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
                        }
                        
                        .city-popup .leaflet-popup-tip {
                            background: rgba(15, 23, 42, 0.95);
                            border: 1px solid rgba(59, 130, 246, 0.3);
                        }
                        
                        .leaflet-container {
                            background: #0f172a;
                        }
                        
                        .leaflet-control-attribution {
                            display: none;
                        }
                        
                        .leaflet-control-zoom {
                            display: none !important;
                        }
                    `;
                    document.head.appendChild(style);
                }
                
                // Initialize map elements
                setTimeout(() => {
                    createConnectionLines();
                    setTimeout(() => {
                        createCityMarkers();
                        
                        // Test manual zoom control
                        console.log('üß™ Testing manual zoom control...');
                        const manualControlElement = document.querySelector('.manual-zoom-control');
                        const backupControls = document.getElementById('backupZoomControls');
                        
                        if (manualControlElement) {
                            console.log('‚úÖ Leaflet manual zoom control working');
                        } else if (backupControls) {
                            console.log('‚úÖ Backup zoom control working');
                            backupControls.style.display = 'block';
                        } else {
                            console.error('‚ùå All zoom controls not found');
                        }
                        
                    }, 1000);
                }, 1500);
                
                console.log('‚úÖ Real world map initialization completed');
            }
        
        // Initialize timeline effects
        function initTimelineEffects() {
            console.log('üéØ Initializing timeline effects...');
            
            const timelineItems = document.querySelectorAll('.timeline-item');
            timelineItems.forEach((item, index) => {
                // Add click expand effect
                item.addEventListener('click', function() {
                    const details = this.querySelector('.timeline-details');
                    if (details) {
                        details.style.display = details.style.display === 'none' ? 'flex' : 'none';
                    }
                });
                
                // Add hover effect
                item.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateX(10px)';
                });
                
                item.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateX(0)';
                });
            });
            
            console.log('‚úÖ Timeline effects initialization completed');
        }
        
        // Initialize Aceternity UI Timeline scroll progress bar
        function initAceternityTimeline() {
            console.log('üéØ Initializing Aceternity UI Timeline...');
            
            const timelineContainer = document.querySelector('.aceternity-timeline-container');
            const progressBeam = document.querySelector('.timeline-progress-beam');
            
            if (!timelineContainer || !progressBeam) {
                console.log('‚ö†Ô∏è Aceternity Timeline elements not found');
                return;
            }
            
            // Get timeline container height
            const containerHeight = timelineContainer.offsetHeight;
            const windowHeight = window.innerHeight;
            
            // Listen to scroll events
            window.addEventListener('scroll', () => {
                const scrollTop = window.pageYOffset;
                const containerTop = timelineContainer.offsetTop;
                const containerBottom = containerTop + containerHeight;
                
                // Calculate scroll progress
                if (scrollTop >= containerTop && scrollTop <= containerBottom) {
                    const progress = (scrollTop - containerTop) / (containerHeight - windowHeight);
                    const clampedProgress = Math.max(0, Math.min(1, progress));
                    
                    // Update progress bar height
                    progressBeam.style.height = `${clampedProgress * 100}%`;
                    
                    // Add glow effect
                    if (clampedProgress > 0.5) {
                        progressBeam.style.boxShadow = '0 0 20px rgba(102, 126, 234, 0.5)';
                    } else {
                        progressBeam.style.boxShadow = 'none';
                    }
                }
            });
            
            // Add scroll-triggered animations
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };
            
            const timelineObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, observerOptions);
            
            // Observe all timeline entries
            const timelineEntries = document.querySelectorAll('.timeline-entry');
            timelineEntries.forEach(entry => {
                timelineObserver.observe(entry);
            });
            
            console.log('‚úÖ Aceternity UI Timeline initialization completed');
        }
        
        // Initialization after page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Page loaded, starting initialization...');
            
            // Delay initialization to ensure DOM is fully loaded
            setTimeout(function() {
                console.log('‚è∞ Starting initialization after 1 second delay...');
                
                // Initialize music player - check all possible button selectors
                const genreButtons = document.querySelectorAll('.genre-button, .genre-option');
                console.log('üéµ Number of music genre buttons found:', genreButtons.length);
                
                if (genreButtons.length > 0) {
                    console.log('üéµ Starting to initialize music player...');
                    initVinylMusicPlayer();
                } else {
                    console.log('‚ö†Ô∏è Music genre buttons not found, trying delayed initialization...');
                    // Retry after delay
                    setTimeout(() => {
                        const retryButtons = document.querySelectorAll('.genre-button, .genre-option');
                        if (retryButtons.length > 0) {
                            console.log('üéµ Buttons found after delay, starting initialization...');
                            initVinylMusicPlayer();
                        } else {
                            console.error('‚ùå Still no music genre buttons found');
                        }
                    }, 2000);
                }
                
                // Initialize travel details button
                const travelButton = document.querySelector('.stats-button');
                if (travelButton) {
                    initTravelDetailsButton();
                }
                
                // Initialize map
                console.log('üó∫Ô∏è Starting to initialize map...');
                
            }, 1000);
        });

        // Vinyl Music Player - full feature version
        function initVinylMusicPlayer() {
            console.log('üéµ Starting to initialize Vinyl Music Player...');
            
            // Get player elements
            const audio = document.getElementById('vinylAudio');
            const trackTitle = document.getElementById('trackTitle');
            const trackArtist = document.getElementById('trackArtist');
            
            // Check if elements exist
            if (!audio) {
                console.error('‚ùå Audio element not found');
                return;
            }
            
            console.log('‚úÖ Found player elements:', {
                audio: !!audio,
                trackTitle: !!trackTitle,
                trackArtist: !!trackArtist
            });
            
            // Set song information
            if (trackTitle) trackTitle.textContent = 'üéµ Still Loving You';
            if (trackArtist) trackArtist.textContent = 'Scorpions';
            
            // Ensure audio element is visible and has controls
            audio.style.display = 'block';
            audio.controls = true;
            audio.style.width = '100%';
            audio.style.marginBottom = '20px';
            
            // Initialize music genre selection buttons
            initMusicGenreButtons();
            
                         console.log('üéµ Main player set to native control mode, should be able to play normally!');
            console.log('üéµ Vinyl Music Player initialization completed!');
        }
        

        
        // Initialize music genre selection buttons
        function initMusicGenreButtons() {
            console.log('üéº Initializing music genre selection buttons...');
            
            const genreOptions = document.querySelectorAll('.genre-option');
            console.log('üéº Number of music genre buttons found:', genreOptions.length);
            
            if (genreOptions.length === 0) {
                console.error('‚ùå No music genre buttons found!');
                return;
            }
            
            // Music track data
            const musicData = {
                rock: {
                    title: 'üéµ Still Loving You',
                    artist: 'Scorpions',
                    audioSrc: 'assets/music/Scorpions-Still Loving You.ogg',
                    color: '#e53e3e'
                },
                pop: {
                    title: 'üéµ Hotel California',
                    artist: 'Eagles',
                    audioSrc: 'assets/music/Eagles-Hotel California.ogg',
                    color: '#3182ce'
                },
                metal: {
                    title: 'üéµ Civil War',
                    artist: 'Guns N\' Roses',
                    audioSrc: 'assets/music/Guns N\' Roses-Civil War.ogg',
                    color: '#805ad5'
                }
            };
            
            let currentGenre = 'rock';
            
            // Bind events for each button
            genreOptions.forEach((option, index) => {
                console.log(`üéº Binding event for button ${index + 1}:`, option.dataset.genre);
                
                // Remove any existing old event listeners
                const newOption = option.cloneNode(true);
                option.parentNode.replaceChild(newOption, option);
                
                // Rebind events
                newOption.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const genre = this.dataset.genre;
                    console.log(`üéº Button clicked! Selected music genre: ${genre}`);
                    
                    // Add click feedback
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);
                    
                    // Update button state
                    genreOptions.forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    currentGenre = genre;
                    
                    // Update audio source and player information
                    const audio = document.getElementById('vinylAudio');
                    const trackTitle = document.getElementById('trackTitle');
                    const trackArtist = document.getElementById('trackArtist');
                    
                    if (audio && trackTitle && trackArtist) {
                        const data = musicData[genre];
                        if (data) {
                            // Update audio source
                            audio.src = data.audioSrc;
                            audio.load(); // Reload audio
                            
                            // Update display information
                            trackTitle.textContent = data.title;
                            trackArtist.textContent = data.artist;
                            
                            // Update disc label
                            const artistName = document.querySelector('.artist-name');
                            const songTitle = document.querySelector('.song-title');
                            if (artistName && songTitle) {
                                artistName.textContent = data.artist;
                                songTitle.textContent = data.title.replace('üéµ ', '');
                            }
                            
                            console.log(`üéº Updated player: ${data.title} - ${data.artist}`);
                            
                            // Show selection confirmation
                            showGenreSelectionFeedback(genre);
                        }
                    }
                });
                
                console.log(`üéº Button ${index + 1} event binding completed`);
            });
            
            console.log('üéº Music genre selection buttons initialization completed');
        }
        
        // Show music genre selection feedback
        function showGenreSelectionFeedback(genre) {
            // Create temporary feedback notification
            const feedback = document.createElement('div');
            feedback.textContent = `üéµ Selected: ${genre.toUpperCase()}`;
            feedback.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(45deg, #667eea, #f093fb);
                color: white;
                    padding: 12px 20px;
                    border-radius: 25px;
                    font-weight: 600;
                    z-index: 1000;
                    animation: slideInRight 0.5s ease;
                    box-shadow: 0 4px 20px rgba(102, 126, 234, 0.3);
                `;
                
                document.body.appendChild(feedback);
                
                // Auto remove after 3 seconds
                setTimeout(() => {
                    feedback.style.animation = 'slideOutRight 0.5s ease';
                    setTimeout(() => {
                        if (feedback.parentNode) {
                            feedback.parentNode.removeChild(feedback);
                        }
                    }, 500);
                }, 3000);
            }
        
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Bree+Serif:wght@400&display=swap" rel="stylesheet">
</head>
<body>
    <a href="index.html" class="back-button">‚Üê Back to Home</a>
    <style id="cinemaLightStyles">
        /* Remove green border and icons from Music Spectrum Analysis info items */
        .music-spectrum-analyzer .info-item:hover {
            border-color: rgba(102, 126, 234, 0.1) !important;
        }
        
        /* Film Reel Collection ‚Äì light theme layout fixes */
        .movies-showcase { margin-bottom: 40px; }
        .movies-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 28px; }

        .movies-grid .movie-reel {
            background: rgba(255,255,255,0.9);
            border: 2px solid #e5e7eb;
            border-radius: 14px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.08);
            padding: 16px 18px 14px;
            position: relative;
        }

        /* Remove top colored bar, use border color */
        /* .movie-reel::after { content: ""; position: absolute; left: 0; right: 0; top: 0; height: 4px; border-radius: 14px 14px 0 0; }
        .mission-impossible::after { background: #ef4444; }
        .fast-furious::after { background: #f59e0b; }
        .bourne-identity::after { background: #6366f1; }
        .jurassic-park::after { background: #22c55e; }
        .green-book::after { background: #8b5cf6; }
        .harry-potter::after { background: #f59e0b; } */

        .reel-header { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; }
        .reel-number { font-weight: 700; color: #475569; background: #f1f5f9; border: 1px solid #e2e8f0; border-radius: 6px; padding: 2px 8px; }
        .reel-title { font-weight: 700; color: #0f172a; }

        .film-frames { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin: 8px 0 10px; }
        .film-frames .frame { font-size: 20px; line-height: 34px; height: 34px; text-align: center; border: 1px dashed #e2e8f0; border-radius: 8px; background: #fafafa; }

        .reel-info { display: grid; grid-auto-rows: auto; gap: 6px; }
        .reel-info .movie-genre { font-weight: 700; color: #111827; }
        .reel-info .movie-rating { color: #f59e0b; letter-spacing: 2px; }
        .reel-info .movie-tags { display: flex; flex-wrap: wrap; gap: 8px; }
        .reel-info .tag { background: #f3f4f6; color: #374151; border: 1px solid #e5e7eb; border-radius: 999px; padding: 4px 10px; font-size: 12px; font-weight: 600; }

        /* Film Reel Timeline ‚Äì redesigned with better structure */
        .cinema-timeline { margin: 40px 0; text-align: center; }
        .timeline-title { text-align: center; margin: 0 0 32px; }
        .timeline-title .title-text { 
            color: #1e293b; 
            font-weight: 800; 
            letter-spacing: 2px; 
            font-family: 'Courier New', monospace; 
            font-size: 24px; 
            max-width: 300px;
            word-wrap: break-word;
            overflow-wrap: break-word;
            text-align: center;
            margin: 0 auto;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .timeline-title .title-accent { width: 82px; height: 4px; background: linear-gradient(90deg, #8b4513, #d4a574); margin: 10px auto 0; border-radius: 3px; opacity: 0.9; }

        .timeline-container { max-width: 1200px; margin: 0 auto; position: relative; }
        /* Film Reel Timeline - ensure brown gradient line */
        .cinema-timeline .timeline-container .timeline-line { 
            position: absolute; 
            top: 50%; 
            left: 0; 
            right: 0; 
            height: 3px; 
            background: linear-gradient(90deg, transparent, #8b4513 20%, #8b4513 80%, transparent) !important; 
            transform: translateY(-50%); 
            border-radius: 2px; 
            z-index: 0;
        }
        /* Fallback for general timeline-line */
        .timeline-line { position: absolute; top: 50%; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, transparent, #8b4513 20%, #8b4513 80%, transparent); transform: translateY(-50%); border-radius: 2px; }
        .timeline-reels { display: flex; justify-content: space-between; align-items: center; position: relative; z-index: 1; padding: 40px 20px; }
        .timeline-reel { text-align: center; position: relative; width: 180px; flex: 0 0 180px; }
        .timeline-reel .reel-content { background: rgba(255,255,255,0.95); border: 2px solid #d4a574; border-radius: 25px; padding: 20px 12px; box-shadow: 0 12px 32px rgba(139,69,19,0.2); text-align: center; min-width: 150px; transition: all 0.3s ease; }
        .timeline-reel .reel-content:hover { 
            transform: translateY(-8px) scale(1.02); 
            box-shadow: 0 20px 40px rgba(139,69,19,0.3); 
            border-color: #b8860b;
        }
        
        /* Timeline movie title micro animations */
        .timeline-reel .movie-title {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .timeline-reel:hover .movie-title {
            transform: translateY(-2px);
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        /* Movie icon micro animations removed */
        
        /* Timeline dot micro animations */
        .timeline-reel .reel-dot {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .timeline-reel:hover .reel-dot {
            transform: scale(1.2);
            box-shadow: 0 4px 12px rgba(139,69,19,0.4);
        }
        .timeline-reel .movie-year { font-weight: 800; color: #8b4513; margin-bottom: 8px; font-family: 'Courier New', monospace; font-size: 20px; letter-spacing: 1px; }
        .timeline-reel .movie-title { font-size: 16px; color: #7b5b39; margin: 10px 0 8px; white-space: normal; font-weight: 700; font-family: 'Courier New', monospace; line-height: 1.2; max-width: 140px; word-wrap: break-word; overflow-wrap: break-word; hyphens: auto; }
        /* Movie icons removed */
        .timeline-reel .reel-dot { width: 20px; height: 20px; background: linear-gradient(135deg, #8b4513, #d4a574); border: 4px solid #ffffff; border-radius: 50%; position: absolute; left: 50%; bottom: -10px; transform: translateX(-50%); box-shadow: 0 0 16px rgba(139,69,19,0.7); }
        
        /* Fix text overflow issue */
        .timeline-reel .movie-title { 
            font-size: 16px; 
            color: #1e40af; 
            margin: 10px 0 8px; 
            white-space: normal; 
            font-weight: 700; 
            font-family: 'Courier New', monospace; 
            line-height: 1.2; 
            max-width: 140px; 
            word-wrap: break-word; 
            overflow-wrap: break-word; 
            hyphens: auto;
            text-align: center;
            text-shadow: 0 1px 2px rgba(30, 64, 175, 0.1);
        }
        
        /* Ensure timeline container has enough space */
        .timeline-container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
        }
        
        /* Optimize timeline spacing */
        .timeline-reels {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            z-index: 1;
            padding: 40px 10px;
            gap: 10px;
        }
        
        /* Fix timeline entry description text overflow issue */
        .timeline-entry-description { 
            color: #64748b; 
            font-size: 0.9rem; 
            margin-bottom: 12px; 
            line-height: 1.4; 
            max-width: 200px;
            word-wrap: break-word;
            overflow-wrap: break-word;
            text-align: center;
        }
        
        /* Fix timeline entry title text overflow issue */
        .timeline-location-title {
            max-width: 180px;
            word-wrap: break-word;
            overflow-wrap: break-word;
            text-align: center;
            transition: all 0.3s ease;
        }

        .timeline-entry:hover .timeline-location-title {
            color: rgba(124, 58, 237, 0.9);
            transform: translateX(2px);
        }

        /* Aceternity UI Timeline Styles */
        .aceternity-timeline-container {
            position: relative;
            padding: 40px 0;
            margin: 40px 0;
        }

        .timeline-header-section {
            text-align: center;
            margin-bottom: 60px;
        }

        .timeline-main-title {
            font-size: 2rem;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 12px;
        }

        .timeline-main-description {
            font-size: 1rem;
            color: #64748b;
            max-width: 600px;
            margin: 0 auto;
        }

        .timeline-content-wrapper {
            position: relative;
            max-width: 800px;
            margin: 0 auto;
            padding: 0 40px;
        }

        .timeline-line-container {
            position: absolute;
            left: 19px; /* Precisely aligned: 60px (padding) - 50px (marker left) + 9px (half of 20px marker width) */
            top: 0;
            bottom: 0;
            width: 4px;
            z-index: 5; /* Above marker dots */
        }

        .timeline-line {
            position: absolute;
            top: 0;
            left: 50%;
            width: 4px;
            height: 100%;
            background: linear-gradient(to bottom, 
                #667eea 0%,      /* Darker purple (top) */
                #764ba2 50%,     /* Medium purple (middle) */
                #f093fb 100%     /* Lighter pinkish-purple (bottom) */
            );
            transform: translateX(-50%);
            border-radius: 2px;
            transition: all 0.3s ease;
            animation: timelineLinePulse 3s ease-in-out infinite, timelineLineMove 4s ease-in-out infinite;
            box-shadow: 0 0 8px rgba(102, 126, 234, 0.4),
                        inset 0 0 10px rgba(240, 147, 251, 0.2);
        }

        @keyframes timelineLinePulse {
            0%, 100% {
                opacity: 1;
                box-shadow: 0 0 8px rgba(102, 126, 234, 0.4),
                            inset 0 0 10px rgba(240, 147, 251, 0.2);
            }
            50% {
                opacity: 0.95;
                box-shadow: 0 0 12px rgba(118, 75, 162, 0.5),
                            inset 0 0 15px rgba(240, 147, 251, 0.3);
            }
        }

        @keyframes timelineLineMove {
            0%, 100% {
                transform: translateX(calc(-50% + 0px));
            }
            25% {
                transform: translateX(calc(-50% - 2px));
            }
            50% {
                transform: translateX(calc(-50% + 0px));
            }
            75% {
                transform: translateX(calc(-50% + 2px));
            }
        }

        .timeline-progress-beam {
            position: absolute;
            top: 0;
            left: 50%;
            width: 5px;
            height: 0%;
            background: linear-gradient(to bottom, 
                #667eea 0%,      /* Darker purple (top) */
                #764ba2 50%,     /* Medium purple (middle) */
                #f093fb 100%     /* Lighter pinkish-purple (bottom) */
            );
            transform: translateX(-50%);
            border-radius: 3px;
            box-shadow: 0 0 15px rgba(102, 126, 234, 0.7),
                        0 0 30px rgba(118, 75, 162, 0.5),
                        inset 0 0 10px rgba(255, 255, 255, 0.3),
                        0 2px 4px rgba(240, 147, 251, 0.4);
            transition: height 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            animation: progressBeamGlow 2s ease-in-out infinite, progressBeamMove 3s ease-in-out infinite;
            z-index: 6; /* Above timeline line */
        }

        @keyframes progressBeamGlow {
            0%, 100% {
                box-shadow: 0 0 15px rgba(102, 126, 234, 0.7),
                            0 0 30px rgba(118, 75, 162, 0.5),
                            inset 0 0 10px rgba(255, 255, 255, 0.3),
                            0 2px 4px rgba(240, 147, 251, 0.4);
            }
            50% {
                box-shadow: 0 0 20px rgba(102, 126, 234, 0.9),
                            0 0 40px rgba(118, 75, 162, 0.7),
                            inset 0 0 15px rgba(255, 255, 255, 0.4),
                            0 2px 6px rgba(240, 147, 251, 0.5);
            }
        }

        @keyframes progressBeamMove {
            0%, 100% {
                transform: translateX(calc(-50% + 0px));
            }
            25% {
                transform: translateX(calc(-50% - 1.5px));
            }
            50% {
                transform: translateX(calc(-50% + 0px));
            }
            75% {
                transform: translateX(calc(-50% + 1.5px));
            }
        }

        .timeline-entries {
            position: relative;
            z-index: 2;
        }

        .timeline-entry {
            position: relative;
            margin-bottom: 60px;
            padding-left: 60px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0;
            animation: timelineEntryFadeIn 0.6s ease-out forwards;
        }

        .timeline-entry:nth-child(1) { animation-delay: 0.1s; }
        .timeline-entry:nth-child(2) { animation-delay: 0.2s; }
        .timeline-entry:nth-child(3) { animation-delay: 0.3s; }
        .timeline-entry:nth-child(4) { animation-delay: 0.4s; }
        .timeline-entry:nth-child(5) { animation-delay: 0.5s; }
        .timeline-entry:nth-child(6) { animation-delay: 0.6s; }
        .timeline-entry:nth-child(7) { animation-delay: 0.7s; }
        .timeline-entry:nth-child(8) { animation-delay: 0.8s; }

        @keyframes timelineEntryFadeIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .timeline-entry:hover {
            transform: translateX(8px);
        }

        .timeline-sticky-header {
            position: sticky;
            top: 20px;
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
            z-index: 10;
        }

        .timeline-marker-dot {
            position: absolute;
            left: -50px;
            width: 20px;
            height: 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: 4px solid #ffffff;
            border-radius: 50%;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4),
                        0 0 0 2px rgba(102, 126, 234, 0.1);
            z-index: 4; /* Below timeline line */
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            animation: markerDotPulse 2.5s ease-in-out infinite;
        }

        @keyframes markerDotPulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4),
                            0 0 0 2px rgba(102, 126, 234, 0.1);
            }
            50% {
                transform: scale(1.08);
                box-shadow: 0 6px 25px rgba(102, 126, 234, 0.6),
                            0 0 0 3px rgba(118, 75, 162, 0.15);
            }
        }

        .timeline-entry:hover .timeline-marker-dot {
            transform: scale(1.3);
            box-shadow: 0 6px 25px rgba(102, 126, 234, 0.6),
                        0 0 0 4px rgba(102, 126, 234, 0.2);
            animation: markerDotHover 0.6s ease-out;
        }

        @keyframes markerDotHover {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.3);
            }
            100% {
                transform: scale(1.25);
            }
        }

        .marker-inner {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 6px;
            height: 6px;
            background: #ffffff;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            animation: markerInnerPulse 1.8s ease-in-out infinite;
            opacity: 0.9;
        }

        @keyframes markerInnerPulse {
            0%, 100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 0.9;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.1);
                opacity: 1;
            }
        }

        .timeline-entry:hover .marker-inner {
            background: #ffffff;
            transform: translate(-50%, -50%) scale(1.2);
            opacity: 1;
            animation: markerInnerHover 0.6s ease-out;
        }

        @keyframes markerInnerHover {
            0% {
                transform: translate(-50%, -50%) scale(1);
            }
            50% {
                transform: translate(-50%, -50%) scale(1.5);
            }
            100% {
                transform: translate(-50%, -50%) scale(1.4);
            }
        }

        .timeline-year-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1e293b;
            margin: 0;
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .timeline-entry:hover .timeline-year-title {
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.9) 0%, rgba(167, 139, 250, 0.9) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            transform: translateX(3px);
        }

        .timeline-entry-content {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.7) 0%, rgba(248, 250, 252, 0.6) 100%);
            backdrop-filter: blur(12px);
            border-radius: 14px;
            padding: 20px;
            border: 1px solid rgba(139, 92, 246, 0.15);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06),
                        0 0 0 1px rgba(139, 92, 246, 0.05);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .timeline-entry:hover .timeline-entry-content {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.85) 0%, rgba(248, 250, 252, 0.75) 100%);
            border-color: rgba(139, 92, 246, 0.35);
            box-shadow: 0 8px 24px rgba(139, 92, 246, 0.2),
                        0 0 0 1px rgba(167, 139, 250, 0.15),
                        inset 0 1px 0 rgba(255, 255, 255, 0.9);
            transform: translateY(-3px);
        }

        .timeline-entry-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .timeline-age-badge {
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.12), rgba(167, 139, 250, 0.12));
            color: rgba(124, 58, 237, 0.95);
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            border: 1px solid rgba(139, 92, 246, 0.25);
            transition: all 0.3s ease;
        }

        .timeline-entry:hover .timeline-age-badge {
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.2), rgba(167, 139, 250, 0.2));
            border-color: rgba(139, 92, 246, 0.4);
            transform: scale(1.05);
        }

        .timeline-location-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1e293b;
            margin: 0;
        }

        .timeline-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 12px;
        }

        .timeline-tag {
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.12), rgba(167, 139, 250, 0.12));
            color: rgba(124, 58, 237, 0.85);
            padding: 4px 10px;
            border-radius: 8px;
            font-size: 0.75rem;
            font-weight: 500;
            border: 1px solid rgba(139, 92, 246, 0.2);
            transition: all 0.3s ease;
        }

        .timeline-tag:hover {
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.2), rgba(167, 139, 250, 0.2));
            border-color: rgba(139, 92, 246, 0.35);
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 2px 8px rgba(139, 92, 246, 0.2);
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .timeline-content-wrapper {
                padding: 0 20px;
            }

            .timeline-line-container {
                left: 8px; /* Adjusted for mobile: 40px (padding) - 30px (marker left) + 8px (half marker width) - 10px (adjustment) */
            }

            .timeline-entry {
                padding-left: 40px;
            }

            .timeline-marker-dot {
                left: -30px;
            }
        }

        /* Emotional Experience - redesigned with better structure */
        .cinema-emotions { margin: 40px 0; text-align: center; }
        .cinema-emotions .emotions-title { text-align: center; margin: 0 0 32px; }
        .cinema-emotions .title-text { color: #7b5b39; font-weight: 800; letter-spacing: 2px; font-family: 'Courier New', monospace; font-size: 28px; }
        .cinema-emotions .title-accent { width: 82px; height: 4px; background: linear-gradient(90deg, #8b4513, #d4a574); margin: 10px auto 0; border-radius: 3px; opacity: 0.9; }
        .cinema-emotions .emotions-grid { 
            margin-top: 32px; 
            display: grid; 
            grid-template-columns: repeat(2, 1fr); 
            gap: 24px; 
            max-width: 800px; 
            margin-left: auto; 
            margin-right: auto; 
        }
        
        /* Responsive four-grid layout */
        @media (max-width: 768px) {
            .cinema-emotions .emotions-grid {
                grid-template-columns: 1fr;
                max-width: 400px;
                gap: 20px;
            }
        }
        
        @media (max-width: 480px) {
            .cinema-emotions .emotions-grid {
                gap: 16px;
            }
            .cinema-emotions .emotion-reel {
                padding: 16px 12px;
                min-height: 180px;
            }
        }
                .cinema-emotions .emotion-reel {
            background: rgba(255,255,255,0.95);
            border: 2px solid #d4a574;
            border-radius: 25px;
            padding: 20px 16px;
            box-shadow: 0 12px 32px rgba(139,69,19,0.2);
            text-align: center;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            transform: translateY(0);
        }
        
        .cinema-emotions .emotion-reel:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(139,69,19,0.3);
            border-color: #b8860b;
        }
        
        /* Emotion icon micro animations */
        .cinema-emotions .emotion-icon {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .cinema-emotions .emotion-reel:hover .emotion-icon {
            transform: scale(1.1) rotate(5deg);
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
        }
        
        /* Emotion name micro animations */
        .cinema-emotions .emotion-name {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .cinema-emotions .emotion-reel:hover .emotion-name {
            transform: translateY(-2px);
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        /* Emotion level micro animations */
        .cinema-emotions .emotion-level {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .cinema-emotions .emotion-reel:hover .emotion-level {
            transform: scale(1.05);
            color: #b8860b;
        }
        .cinema-emotions .emotion-reel:hover { transform: translateY(-8px); box-shadow: 0 20px 40px rgba(139,69,19,0.3); }
        .cinema-emotions .emotion-icon { 
            font-size: 42px; 
            margin-bottom: 12px; 
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.1)); 
        }
        .cinema-emotions .emotion-info { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin-bottom: 12px; 
            flex-wrap: wrap;
            gap: 8px;
        }
        .cinema-emotions .emotion-name { 
            font-family: 'Courier New', monospace; 
            font-size: 14px; 
            font-weight: 700; 
            color: #7b5b39; 
            max-width: 100px;
            word-wrap: break-word;
            overflow-wrap: break-word;
            text-align: center;
            margin: 0 auto;
        }
        .cinema-emotions .emotion-level { 
            font-family: 'Courier New', monospace; 
            font-size: 18px; 
            font-weight: 800; 
            color: #8b4513; 
        }
        .cinema-emotions .emotion-bar { height: 8px; background: rgba(139,69,19,0.1); border-radius: 4px; overflow: hidden; }
        .cinema-emotions .bar-fill { height: 100%; background: linear-gradient(90deg, #8b4513, #d4a574); border-radius: 4px; transition: width 0.8s ease; }
        .cinema-emotions .film-perforations { 
            position: absolute; 
            top: 10px; 
            left: 12px; 
            right: 12px; 
            height: 8px; 
            background: repeating-linear-gradient(90deg, #9ca3af 0 16px, transparent 16px 32px); 
            border-radius: 4px; 
            opacity: 0.9; 
        }
        
        /* --- Genre summary cards like the reference (soft, perforated top) --- */
        .movie-genre-stats { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); 
            gap: 26px; 
        }
        .movie-genre-stats .genre-stat-card {
            background: linear-gradient(180deg, #ffffff 0%, #f7f7fb 100%);
            border: 2px solid #d4a574;
            border-radius: 18px;
            padding: 28px 22px 24px;
            text-align: center;
            position: relative;
            box-shadow: 0 18px 40px rgba(0,0,0,0.08), 0 2px 0 rgba(212,165,116,0.25) inset;
        }
        .movie-genre-stats .genre-stat-card::before{
            content:""; position:absolute; left:14px; right:14px; top:12px; height:10px;
            background: repeating-linear-gradient(90deg, #9ca3af 0 18px, transparent 18px 36px);
            border-radius: 6px; opacity:.9;
        }
        .movie-genre-stats .stat-icon{ font-size: 64px; margin: 22px 0 16px; filter: drop-shadow(0 6px 12px rgba(149, 114, 66, .25)); }
        .movie-genre-stats .stat-content h4{ font-family: 'Courier New', monospace; letter-spacing: 2px; color: #7b5b39; font-size: 20px; margin: 8px 0 18px; }
        .movie-genre-stats .stat-number{ font-size: 64px; line-height: 1; color: #7c6be6; font-weight: 800; letter-spacing: 1px; }
        .movie-genre-stats .stat-label{ margin-top: 6px; color:#7b5b39; font-weight:700; letter-spacing: 6px; font-size: 14px; }
        .movie-genre-stats .genre-stat-card:hover{ transform: translateY(-6px); box-shadow: 0 24px 50px rgba(0,0,0,0.12); }

        /* === Film Reel Collection - image + text style === */
        .movies-grid .movie-reel.collection {
            background: linear-gradient(180deg,#ffffff 0%, #f7f7fb 100%);
            border: 2px solid #e5e7eb;
            border-radius: 25px;
            padding: 24px 18px 18px;
            box-shadow: 0 18px 40px rgba(0,0,0,0.08);
            position: relative;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* Movie card unified styles - colored borders removed */
        .movies-grid .movie-reel.collection::before{
            content:""; position:absolute; left:14px; right:14px; top:10px; height:10px;
            background: repeating-linear-gradient(90deg, #9ca3af 0 18px, transparent 18px 36px);
            border-radius:6px; opacity:.9;
        }
        .movies-grid .movie-reel.collection .reel-header{ justify-content:center; gap:12px; margin-top:12px; }
        .movies-grid .movie-reel.collection .reel-number{ display:none; }
        .movies-grid .movie-reel.collection .reel-title{ 
            font-family:'Courier New', monospace; 
            letter-spacing:2px; 
            color:#dc2626; 
            font-size:16px; 
            text-align:center; 
            max-width: 140px;
            word-wrap: break-word;
            overflow-wrap: break-word;
            margin: 0 auto;
            text-shadow: 0 1px 2px rgba(220, 38, 38, 0.1);
        }
        .movies-grid .movie-reel.collection .poster-wrap{ width:160px; height:200px; border-radius:25px; overflow:hidden; margin:8px auto 16px; box-shadow:0 12px 28px rgba(0,0,0,.12); background:#eef2ff; position:relative; }
        .movies-grid .movie-reel.collection .poster-img{ width:100%; height:100%; object-fit:cover; display:block; }
        .movies-grid .movie-reel.collection .poster-emoji{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; font-size:64px; }
        .movies-grid .movie-reel.collection .movie-genre{ 
            text-align:center; 
            color:#374151; 
            font-weight:700; 
            margin-top:6px; 
            max-width: 140px;
            word-wrap: break-word;
            overflow-wrap: break-word;
            margin-left: auto;
            margin-right: auto;
            font-size: 14px;
        }
        .movies-grid .movie-reel.collection .reel-dot, 
        .movies-grid .movie-reel.collection .film-frames,
        .movies-grid .movie-reel.collection .reel-info{ display:none; }
        
        /* Movie card hover effects - colored borders removed */
    </style>
    <!-- Main content area -->
    <main class="main-content">
        <!-- Content card area -->
        <div class="content-grid">
            <!-- Time card -->
            <div class="card time-card">
                <h2 class="card-title">My Life Journey</h2>
                <p class="card-subtitle">A visual story of how I've spent my time growing up. Learning has always been my passion - I'm curious about everything!</p>
                
                <!-- Main timeline -->
                <div class="main-timeline">
                    <div class="timeline-milestone" data-age="2">
                        <div class="milestone-dot"></div>
                        <div class="milestone-label">Kindergarten</div>
                        <div class="milestone-age">Age 2</div>
                    </div>
                    <div class="timeline-milestone" data-age="6">
                        <div class="milestone-dot"></div>
                        <div class="milestone-label">Elementary</div>
                        <div class="milestone-age">Age 6</div>
                    </div>
                    <div class="timeline-milestone" data-age="12">
                        <div class="milestone-dot"></div>
                        <div class="milestone-label">Middle School</div>
                        <div class="milestone-age">Age 12</div>
                    </div>
                    <div class="timeline-milestone" data-age="14">
                        <div class="milestone-dot"></div>
                        <div class="milestone-label">High School Exam</div>
                        <div class="milestone-age">Age 14</div>
                    </div>
                    <div class="timeline-milestone" data-age="15">
                        <div class="milestone-dot"></div>
                        <div class="milestone-label">USA</div>
                        <div class="milestone-age">Age 15</div>
                    </div>
                </div>

                <!-- Activity cards grid -->
                <div class="activities-grid">
                    <!-- Learning card -->
                    <div class="activity-card study-card" data-category="study">
                        <div class="activity-title">Learning Journey</div>
                        <div class="activity-subtitle">My lifelong passion</div>
                        <div class="activity-timeline">
                            <div class="timeline-bar" style="width: 100%; background: linear-gradient(90deg, #4A90E2, #667eea);"></div>
                            <span class="timeline-text">Age 2-16 (14 years)</span>
                        </div>
                        <div class="activity-stats">
                            <div class="stat-item">
                                <span class="stat-value">90%</span>
                                <span class="stat-label">Time Share</span>
                            </div>
                        </div>
                        <div class="activity-tag">Core Activity</div>
                    </div>

                    <!-- Go Strategy card -->
                    <div class="activity-card go-card" data-category="go">
                        <div class="activity-title">Go Strategy</div>
                        <div class="activity-subtitle">Ancient wisdom game</div>
                        <div class="activity-timeline">
                            <div class="timeline-bar" style="width: 33%; background: linear-gradient(90deg, #7ED321, #96CEB4);"></div>
                            <span class="timeline-text">Age 7-11 (4 years)</span>
                        </div>
                        <div class="activity-stats">
                            <div class="stat-item">
                                <span class="stat-value">15%</span>
                                <span class="stat-label">Time Share</span>
                            </div>
                        </div>
                        <div class="activity-tag">Strategic Thinking</div>
                    </div>

                    <!-- Mineral Research card -->
                    <div class="activity-card minerals-card" data-category="minerals">
                        <div class="activity-title">Mineral Research</div>
                        <div class="activity-subtitle">Earth's hidden treasures</div>
                        <div class="activity-timeline">
                            <div class="timeline-bar" style="width: 53%; background: linear-gradient(90deg, #50E3C2, #4ECDC4);"></div>
                            <span class="timeline-text">Age 9-16+ (7+ years)</span>
                        </div>
                        <div class="activity-stats">
                            <div class="stat-item">
                                <span class="stat-value">10%</span>
                                <span class="stat-label">Time Share</span>
                            </div>
                        </div>
                        <div class="activity-tag">Long-term Interest</div>
                    </div>

                    <!-- Swimming card -->
                    <div class="activity-card swimming-card" data-category="swimming">
                        <div class="activity-title">Swimming</div>
                        <div class="activity-subtitle">Water freedom</div>
                        <div class="activity-timeline">
                            <div class="timeline-bar" style="width: 47%; background: linear-gradient(90deg, #F5A623, #FFEAA7);"></div>
                            <span class="timeline-text">Age 10-16+ (6+ years)</span>
                        </div>
                        <div class="activity-stats">
                            <div class="stat-item">
                                <span class="stat-value">10%</span>
                                <span class="stat-label">Time Share</span>
                            </div>
                        </div>
                        <div class="activity-tag">Physical Fitness</div>
                    </div>

                    <!-- Guitar card -->
                    <div class="activity-card guitar-card" data-category="guitar">
                        <div class="activity-title">Guitar</div>
                        <div class="activity-subtitle">Musical expression</div>
                        <div class="activity-timeline">
                            <div class="timeline-bar" style="width: 40%; background: linear-gradient(90deg, #BD10E0, #DDA0DD);"></div>
                            <span class="timeline-text">Age 11-16+ (5+ years)</span>
                        </div>
                        <div class="activity-stats">
                            <div class="stat-item">
                                <span class="stat-value">10%</span>
                                <span class="stat-label">Time Share</span>
                            </div>
                        </div>
                        <div class="activity-tag">Creative Arts</div>
                    </div>

                    <!-- Robotics & 3D card -->
                    <div class="activity-card robotics-card" data-category="robotics">
                        <div class="activity-title">Robotics & 3D</div>
                        <div class="activity-subtitle">Future technology</div>
                        <div class="activity-timeline">
                            <div class="timeline-bar" style="width: 13%; background: linear-gradient(90deg, #FF6B6B, #FF8E8E);"></div>
                            <span class="timeline-text">Age 15-16+ (1+ year)</span>
                        </div>
                        <div class="activity-stats">
                            <div class="stat-item">
                                <span class="stat-value">15%</span>
                                <span class="stat-label">Time Share</span>
                            </div>
                        </div>
                        <div class="activity-tag">New Skill</div>
                    </div>

                    <!-- UI/UX Design card -->
                    <div class="activity-card uiux-card" data-category="uiux">
                        <div class="activity-title">UI/UX Design</div>
                        <div class="activity-subtitle">User experience magic</div>
                        <div class="activity-timeline">
                            <div class="timeline-bar" style="width: 13%; background: linear-gradient(90deg, #4ECDC4, #45B7D1);"></div>
                            <span class="timeline-text">Age 15-16+ (1+ year)</span>
                        </div>
                        <div class="activity-stats">
                            <div class="stat-item">
                                <span class="stat-value">15%</span>
                                <span class="stat-label">Time Share</span>
                            </div>
                        </div>
                        <div class="activity-tag">Design Thinking</div>
                    </div>

                    <!-- Coding card -->
                    <div class="activity-card code-card" data-category="code">
                        <div class="activity-title">Coding</div>
                        <div class="activity-subtitle">Digital creation</div>
                        <div class="activity-timeline">
                            <div class="timeline-bar" style="width: 13%; background: linear-gradient(90deg, #96CEB4, #A8E6CF);"></div>
                            <span class="timeline-text">Age 15-16+ (1+ year)</span>
                        </div>
                        <div class="activity-stats">
                            <div class="stat-item">
                                <span class="stat-value">10%</span>
                                <span class="stat-label">Time Share</span>
                            </div>
                        </div>
                        <div class="activity-tag">Learning</div>
                    </div>

                    <!-- VR Gaming card -->
                    <div class="activity-card vr-card" data-category="vr">
                        <div class="activity-title">VR Gaming</div>
                        <div class="activity-subtitle">Virtual reality exploration</div>
                        <div class="activity-timeline">
                            <div class="timeline-bar" style="width: 10%; background: linear-gradient(90deg, #9333EA, #C084FC);"></div>
                            <span class="timeline-text">Age 15-16+ (1+ year)</span>
                        </div>
                        <div class="activity-stats">
                            <div class="stat-item">
                                <span class="stat-value">5%</span>
                                <span class="stat-label">Time Share</span>
                            </div>
                        </div>
                        <div class="activity-tag">Future Tech</div>
                    </div>
                </div>

                <!-- Interactive Chart Container -->
                <div class="chart-container">
                    <canvas id="timeChart"></canvas>
                </div>
                
                <!-- Age Activity Distribution Chart -->
                <div class="age-activity-chart">
                    <h3 class="chart-title">Age Activity Distribution</h3>
                    <div class="chart-container">
                        <canvas id="ageChart"></canvas>
                    </div>
                    
                    <!-- Chart Legend -->
                    <div class="chart-legend">
                        <div class="legend-item">
                            <span class="legend-color study"></span>
                            <span>Family & Learning</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color go"></span>
                            <span>Go Strategy</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color minerals"></span>
                            <span>Mineral Interest</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color swimming"></span>
                            <span>Swimming</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color guitar"></span>
                            <span>Guitar</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color robotics"></span>
                            <span>Robotics & 3D</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color uiux"></span>
                            <span>UI/UX Design</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color coding"></span>
                            <span>Coding</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Space card -->
            <div class="card space-card">
                <h2 class="card-title">Global Footprint</h2>
                <p class="card-subtitle">My travel journey around the world. From early childhood adventures to international exploration, each trip has shaped my perspective.</p>
                

                
                <!-- Aceternity UI Timeline -->
                <div class="aceternity-timeline-container">
                    <div class="timeline-header-section">
                        <h3 class="timeline-main-title">Changelog from my journey</h3>
                        <p class="timeline-main-description">I've been traveling around the world for the past 10 years. Here's a timeline of my adventures.</p>
                    </div>
                    
                    <div class="timeline-content-wrapper">
                        <!-- Timeline vertical line -->
                        <div class="timeline-line-container">
                            <div class="timeline-line">
                                <div class="timeline-progress-beam"></div>
                        </div>
                    </div>
                    
                        <!-- Timeline entries -->
                        <div class="timeline-entries">
                            <div class="timeline-entry" data-year="2014">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                        </div>
                                    <h4 class="timeline-year-title">2014</h4>
                    </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 3</div>
                                        <div class="timeline-location-title">Thailand</div>
                        </div>
                                    <div class="timeline-entry-description">First international trip</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">Beach</span>
                                        <span class="timeline-tag">Culture</span>
                                        <button class="modal-button" onclick="showPhotosModal('Thailand')">View Travel Photos</button>
                    </div>
                        </div>
                    </div>
                    
                            <div class="timeline-entry" data-year="2015">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                        </div>
                                    <h4 class="timeline-year-title">2015</h4>
                    </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 6</div>
                                        <div class="timeline-location-title">Taiwan</div>
                        </div>
                                    <div class="timeline-entry-description">Island visit</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">Nature</span>
                                        <span class="timeline-tag">Food</span>
                                        <button class="modal-button" onclick="showPhotosModal('Taiwan')">View Travel Photos</button>
                    </div>
                        </div>
                    </div>
                    
                            <div class="timeline-entry" data-year="2017">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                        </div>
                                    <h4 class="timeline-year-title">2017</h4>
                    </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 8</div>
                                        <div class="timeline-location-title">Xi'an, China</div>
                                    </div>
                                    <div class="timeline-entry-description">History tour</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">History</span>
                                        <span class="timeline-tag">Terracotta</span>
                                        <button class="modal-button" onclick="showPhotosModal('Xi\'an, China')">View Travel Photos</button>
                                    </div>
                        </div>
                    </div>
                    
                            <div class="timeline-entry" data-year="2018">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                        </div>
                                    <h4 class="timeline-year-title">2018</h4>
                    </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 9</div>
                                        <div class="timeline-location-title">Hong Kong + Macau</div>
                                    </div>
                                    <div class="timeline-entry-description">City tour</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">City</span>
                                        <span class="timeline-tag">Modern</span>
                                        <button class="modal-button" onclick="showPhotosModal('Hong Kong & Macau')">View Travel Photos</button>
                        </div>
                    </div>
                </div>

                            <div class="timeline-entry" data-year="2018-2">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                            </div>
                                    <h4 class="timeline-year-title">2018</h4>
                        </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 11</div>
                                        <div class="timeline-location-title">Vietnam</div>
                                    </div>
                                    <div class="timeline-entry-description">SE Asia trip</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">Culture</span>
                                        <span class="timeline-tag">Nature</span>
                                        <button class="modal-button" onclick="showPhotosModal('Vietnam')">View Travel Photos</button>
                        </div>
                    </div>
                </div>

                            <div class="timeline-entry" data-year="2019">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                            </div>
                                    <h4 class="timeline-year-title">2019</h4>
                        </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 10</div>
                                        <div class="timeline-location-title">Singapore + Malaysia</div>
                                    </div>
                                    <div class="timeline-entry-description">Tropical trip</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">Tropical</span>
                                        <span class="timeline-tag">Diversity</span>
                                        <button class="modal-button" onclick="showPhotosModal('Singapore & Malaysia')">View Travel Photos</button>
                        </div>
                    </div>
                </div>

                            <div class="timeline-entry" data-year="2019-2">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                            </div>
                                    <h4 class="timeline-year-title">2019</h4>
                        </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 10</div>
                                        <div class="timeline-location-title">Siguniang Mountain, China</div>
                                    </div>
                                    <div class="timeline-entry-description">Mountain trip</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">Mountains</span>
                                        <span class="timeline-tag">Adventure</span>
                                        <button class="modal-button" onclick="showPhotosModal('Siguniang Mountain, China')">View Travel Photos</button>
                        </div>
                    </div>
                </div>

                            <div class="timeline-entry" data-year="2019-2">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                            </div>
                                    <h4 class="timeline-year-title">2019</h4>
                        </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 13</div>
                                        <div class="timeline-location-title">Beijing, China</div>
                                    </div>
                                    <div class="timeline-entry-description">Capital visit</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">History</span>
                                        <span class="timeline-tag">Culture</span>
                                        <button class="modal-button" onclick="showPhotosModal('Beijing, China')">View Travel Photos</button>
                        </div>
                    </div>
                </div>

                            <div class="timeline-entry" data-year="2021">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                        </div>
                                    <h4 class="timeline-year-title">2021</h4>
                                </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 12</div>
                                        <div class="timeline-location-title">Dubai, UAE</div>
                                    </div>
                                    <div class="timeline-entry-description">Desert city</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">Desert</span>
                                        <span class="timeline-tag">Luxury</span>
                                        <button class="modal-button" onclick="showPhotosModal('Dubai, UAE')">View Travel Photos</button>
                                    </div>
                                </div>
                    </div>
                    
                            <div class="timeline-entry" data-year="2022">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                            </div>
                                    <h4 class="timeline-year-title">2022</h4>
                        </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 14</div>
                                        <div class="timeline-location-title">Yunnan + Guizhou, China</div>
                                    </div>
                                    <div class="timeline-entry-description">Mountain tour</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">Mountains</span>
                                        <span class="timeline-tag">Ethnic</span>
                                        <button class="modal-button" onclick="showPhotosModal('Yunnan & Guizhou, China')">View Travel Photos</button>
                                    </div>
                    </div>
                    </div>
                    
                            <div class="timeline-entry" data-year="2024">
                                <div class="timeline-sticky-header">
                                    <div class="timeline-marker-dot">
                                        <div class="marker-inner"></div>
                        </div>
                                    <h4 class="timeline-year-title">2024</h4>
                            </div>
                                <div class="timeline-entry-content">
                                    <div class="timeline-entry-header">
                                        <div class="timeline-age-badge">AGE 15</div>
                                        <div class="timeline-location-title">United States</div>
                        </div>
                                    <div class="timeline-entry-description">USA trip</div>
                                    <div class="timeline-tags">
                                        <span class="timeline-tag">Freedom</span>
                                        <span class="timeline-tag">Innovation</span>
                                        <button class="modal-button" onclick="showPhotosModal('Atlanta, USA')">View Travel Photos</button>
                    </div>
                </div>
                            </div>
                        </div>
                    </div>
                    </div>
                    
                <!-- Timeline statistics summary -->
                <div class="timeline-summary">
                    <div class="summary-item comet-card" data-tilt>
                        <div class="comet-card-content">
                            <div class="summary-icon">üåç</div>
                            <div class="summary-number">8</div>
                            <div class="summary-label">Destinations</div>
                            <div class="summary-description">Visited around the world</div>
                            </div>
                        </div>
                    <div class="summary-item comet-card" data-tilt>
                        <div class="comet-card-content">
                            <div class="summary-icon">üèôÔ∏è</div>
                            <div class="summary-number">12</div>
                            <div class="summary-label">Cities</div>
                            <div class="summary-description">Explored & discovered</div>
                        </div>
                    </div>
                    <div class="summary-item comet-card" data-tilt>
                        <div class="comet-card-content">
                            <div class="summary-icon">üó∫Ô∏è</div>
                            <div class="summary-number">3</div>
                            <div class="summary-label">Continents</div>
                            <div class="summary-description">Crossed borders</div>
                        </div>
                    </div>
                    <div class="summary-item comet-card" data-tilt>
                        <div class="comet-card-content">
                            <div class="summary-icon">‚è∞</div>
                            <div class="summary-number">12</div>
                            <div class="summary-label">Years</div>
                            <div class="summary-description">Of travel experience</div>
                                    </div>
                    </div>
                </div>

                <!-- Current Residence -->
                <div class="residence-card">
                    <div class="residence-icon">üè†</div>
                    <div class="residence-details">
                        <div class="residence-label">Current Residence</div>
                        <div class="residence-city">Chengdu, China</div>
                        <div class="residence-description">My hometown where I grew up and currently live</div>
                                </div>
                            </div>

                                <!-- Interactive Globe World Map -->
                <div class="globe-map-section">
                    <div class="map-header">
                        <h3 class="map-title">Travel</h3>
                        <div class="map-subtitle">
                            <span class="animated-text">Journey</span>
                        </div>
                        <p class="map-description">
                            My comprehensive travel journey from age 3 to 15, exploring 11 destinations across Asia, Middle East, and North America, experiencing diverse cultures and creating unforgettable memories.
                        </p>
                    </div>
                    
                    <!-- Interactive Globe Container -->
                    <div class="globe-container">
                        <div id="interactiveGlobe" class="globe-wrapper" style="height: 800px; width: 100%; border-radius: 16px; overflow: hidden; margin: 0;">
                            <!-- TechTravelMap component will be rendered here -->
                        </div>
                    </div>
                    
                    <!-- Travel Stats -->
                    <div class="travel-stats">
                        <div class="stat-item">
                            <div class="stat-number">11</div>
                            <div class="stat-label">DESTINATIONS</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">15+</div>
                            <div class="stat-label">CITIES</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">3</div>
                            <div class="stat-label">CONTINENTS</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">13</div>
                            <div class="stat-label">YEARS</div>
                        </div>
                    </div>
                </div>
                

            </div>
            
            <!-- Travel Details Modal -->
            <div id="travelModal" class="travel-modal">
                <div class="modal-overlay"></div>
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title">üåç Travel Journey Details</h2>
                        <button class="modal-close" onclick="closeTravelModal()">√ó</button>
                    </div>
                    <div class="modal-body">
                        <div class="travel-summary">
                            <div class="summary-stats">
                                <div class="summary-item">
                                    <span class="summary-number">11</span>
                                    <span class="summary-label">Destinations</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-number">15+</span>
                                    <span class="summary-label">Cities</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-number">3</span>
                                    <span class="summary-label">Continents</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-number">13</span>
                                    <span class="summary-label">Years</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="travel-timeline">
                            <h3>üìÖ Travel Timeline</h3>
                            <div class="timeline-items">
                    <div class="timeline-item">
                                    <div class="timeline-age">Age 3</div>
                        <div class="timeline-content">
                                        <div class="timeline-location">üáπüá≠ Thailand</div>
                                        <div class="timeline-description">First international trip, exploring tropical paradise</div>
                                        <button class="modal-button" onclick="showPhotosModal('Thailand')">Photos</button>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                                    <div class="timeline-age">Age 6</div>
                        <div class="timeline-content">
                                        <div class="timeline-location">üáπüáº Taiwan</div>
                                        <div class="timeline-description">Cultural exploration and family bonding</div>
                                        <button class="modal-button" onclick="showPhotosModal('Taiwan')">Photos</button>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                                    <div class="timeline-age">Age 8</div>
                        <div class="timeline-content">
                                        <div class="timeline-location">üá®üá≥ Xi'an, China</div>
                                        <div class="timeline-description">Historical discovery of ancient capital</div>
                                        <button class="modal-button" onclick="showPhotosModal('Xi\'an, China')">Photos</button>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                                    <div class="timeline-age">Age 9</div>
                        <div class="timeline-content">
                                        <div class="timeline-location">üá≠üá∞ Hong Kong + üá≤üá¥ Macau</div>
                                        <div class="timeline-description">Urban adventure in vibrant cities</div>
                                        <button class="modal-button" onclick="showPhotosModal('Hong Kong & Macau')">Photos</button>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                                    <div class="timeline-age">Age 10</div>
                        <div class="timeline-content">
                                        <div class="timeline-location">üá∏üá¨ Singapore + üá≤üáæ Malaysia</div>
                                        <div class="timeline-description">Southeast Asian cultural immersion</div>
                                        <button class="modal-button" onclick="showPhotosModal('Singapore & Malaysia')">Photos</button>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                                    <div class="timeline-age">Age 12</div>
                        <div class="timeline-content">
                                        <div class="timeline-location">üá¶üá™ Dubai, UAE</div>
                                        <div class="timeline-description">Desert luxury and modern architecture</div>
                                        <button class="modal-button" onclick="showPhotosModal('Dubai, UAE')">Photos</button>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                                    <div class="timeline-age">Age 14</div>
                        <div class="timeline-content">
                                        <div class="timeline-location">üá®üá≥ Yunnan + Guizhou, China</div>
                                        <div class="timeline-description">Mountain landscapes and ethnic cultures</div>
                                        <button class="modal-button" onclick="showPhotosModal('Yunnan & Guizhou, China')">Photos</button>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                                    <div class="timeline-age">Age 15</div>
                        <div class="timeline-content">
                                        <div class="timeline-location">üá∫üá∏ Atlanta, USA</div>
                                        <div class="timeline-description">American experience and international education</div>
                                        <button class="modal-button" onclick="showPhotosModal('Atlanta, USA')">Photos</button>
                                    </div>
                        </div>
                    </div>
                </div>

                <div class="residence-info">
                            <h3>üè† Current Residence</h3>
                            <div class="residence-card">
                    <div class="residence-icon">üè†</div>
                    <div class="residence-details">
                        <div class="residence-city">Chengdu, China</div>
                                    <div class="residence-description">My hometown and current base for adventures</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="modal-button" onclick="closeTravelModal()">Close</button>
                    </div>
                    </div>
                </div>

            <!-- Travel Photos Modal with Draggable Cards -->
            <div id="photosModal" class="travel-modal" style="display:none;">
                <div class="modal-overlay"></div>
                <div class="modal-content draggable-modal">
                    <div class="modal-header">
                        <h2 class="modal-title">üì∑ Travel Photos</h2>
                        <button class="modal-close" onclick="closePhotosModal()">√ó</button>
                        </div>
                    <div class="modal-body">
                        <div id="photosGallery" class="draggable-gallery">
                            <!-- Dynamically insert Draggable Card photos -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="modal-button" onclick="closePhotosModal()">Close</button>
                    </div>
                </div>
                    </div>
                    
            <!-- Musical Taste card -->
            <div class="card album-card inspira-card">
                <!-- Inspira UI style decorative elements -->
                <div class="inspira-decoration">
                    <div class="floating-orb orb-1"></div>
                    <div class="floating-orb orb-2"></div>
                    <div class="floating-orb orb-3"></div>
                    <div class="gradient-line line-1"></div>
                    <div class="gradient-line line-2"></div>
                            </div>
                
                <h2 class="card-title inspira-title">
                    <span class="title-glow">Musical Taste</span>
                    <div class="title-underline"></div>
                </h2>
                <p class="card-subtitle inspira-subtitle">My passion for music across different genres and my favorite bands</p>
                
                <!-- Music genre preference display - re-optimized version -->
                <div class="music-preference-section">
                    <!-- Background decorative elements -->
                    <div class="bg-decoration">
                        <div class="floating-orb orb-1"></div>
                        <div class="floating-orb orb-2"></div>
                        <div class="floating-orb orb-3"></div>
                        <div class="gradient-line line-1"></div>
                        <div class="gradient-line line-2"></div>
                        <div class="gradient-line line-3"></div>
                        </div>
                    
                    <h3 class="preference-title">
                        <span class="title-text">Genre Preferences</span>
                        <div class="title-underline"></div>
                        <div class="title-subtitle">Discover My Musical Journey</div>
                    </h3>
                    
                    <!-- Music genre cards grid -->
                    <div class="genre-cards-grid">
                        <div class="genre-card rock-card" data-genre="rock">
                            <div class="card-glow"></div>
                            <div class="card-content">
                                <div class="genre-tag">Most Loved</div>
                                <div class="card-main-content">
                                    <div class="genre-info">
                                        <h4 class="genre-name">Rock</h4>
                                        <div class="genre-rank">#1 ‚≠ê</div>
                                        <div class="genre-power">45%</div>
                                        <div class="genre-description">Power & Energy</div>
                            </div>
                        </div>
                                <div class="genre-stats">
                                    <div class="stat-button">
                                        <span class="stat-label">BANDS</span>
                                        <span class="stat-value">5</span>
                                    </div>
                                    <div class="stat-button">
                                        <span class="stat-label">ALBUMS</span>
                                        <span class="stat-value">12</span>
                                    </div>
                                </div>
                    </div>
                    </div>
                    
                        <div class="genre-card pop-card" data-genre="pop">
                            <div class="card-glow"></div>
                            <div class="card-content">
                                <div class="genre-tag">Trending</div>
                                <div class="card-main-content">
                                    <div class="genre-info">
                                        <h4 class="genre-name">Pop</h4>
                                        <div class="genre-rank">#2 ‚≠ê</div>
                                        <div class="genre-power">35%</div>
                                        <div class="genre-description">Melody & Harmony</div>
                        </div>
                                </div>
                                <div class="genre-stats">
                                    <div class="stat-button">
                                        <span class="stat-label">ARTISTS</span>
                                        <span class="stat-value">5</span>
                                    </div>
                                    <div class="stat-button">
                                        <span class="stat-label">HITS</span>
                                        <span class="stat-value">8</span>
                                    </div>
                                </div>
                            </div>
                    </div>
                    
                        <div class="genre-card metal-card" data-genre="metal">
                            <div class="card-glow"></div>
                            <div class="card-content">
                                <div class="genre-tag">Heavy</div>
                                <div class="card-main-content">
                                    <div class="genre-info">
                                        <h4 class="genre-name">Metal</h4>
                                        <div class="genre-rank">#3 ‚≠ê</div>
                                        <div class="genre-power">20%</div>
                                        <div class="genre-description">Intensity & Power</div>
                                    </div>
                                </div>
                                <div class="genre-stats">
                                    <div class="stat-button">
                                        <span class="stat-label">BANDS</span>
                                        <span class="stat-value">4</span>
                                    </div>
                                    <div class="stat-button">
                                        <span class="stat-label">ALBUMS</span>
                                        <span class="stat-value">6</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Music statistics overview -->
                    <div class="music-stats-overview">
                        <div class="stats-card total-stats">
                            <div class="stats-content">
                                <h4>Total Collection</h4>
                                <div class="stats-numbers">
                                    <span class="number">14</span>
                                    <span class="label">Bands</span>
                                    </div>
                                    </div>
                        </div>
                        <div class="stats-card listening-time">
                            <div class="stats-content">
                                <h4>Listening Time</h4>
                                <div class="stats-numbers">
                                    <span class="number">2.5k</span>
                                    <span class="label">Hours</span>
                                </div>
                            </div>
                        </div>
                        <div class="stats-card favorite-year">
                            <div class="stats-content">
                                <h4>Favorite Era</h4>
                                <div class="stats-numbers">
                                    <span class="number">90s</span>
                                    <span class="label">Golden Age</span>
                                </div>
                                    </div>
                                </div>
                            </div>
                            
                    <!-- Music spectrum analyzer -->
                    <div class="music-spectrum-analyzer">
                        <div class="spectrum-header">
                            <h4>Music Spectrum Analysis</h4>
                            <div class="spectrum-controls">
                                <button class="control-btn active">Live</button>
                                <button class="control-btn">Peak</button>
                                <button class="control-btn">History</button>
                                </div>
                            </div>
                        <div class="spectrum-bars">
                            <div class="spectrum-bar rock-spectrum" data-height="45">
                                <div class="bar-label">Rock</div>
                                <div class="bar-value">45%</div>
                        </div>
                            <div class="spectrum-bar pop-spectrum" data-height="35">
                                <div class="bar-label">Pop</div>
                                <div class="bar-value">35%</div>
                            </div>
                            <div class="spectrum-bar metal-spectrum" data-height="20">
                                <div class="bar-label">Metal</div>
                                <div class="bar-value">20%</div>
                            </div>
                        </div>
                        <div class="spectrum-footer">
                            <div class="spectrum-info">
                                <span class="info-item">Real-time Analysis</span>
                                <span class="info-item">Dynamic Updates</span>
                                <span class="info-item">Genre Distribution</span>
                            </div>
                    </div>
                </div>
                
                    <!-- Music energy flow -->
                    <div class="music-energy-flow">
                        <div class="energy-header">
                            <h4>Energy Flow Visualization</h4>
                        </div>
                        <div class="energy-container">
                            <div class="energy-line rock-line"></div>
                            <div class="energy-line pop-line"></div>
                            <div class="energy-line metal-line"></div>
                            <div class="energy-nodes">
                                <div class="node rock-node"></div>
                                <div class="node pop-node"></div>
                                <div class="node metal-node"></div>
                            </div>
                            <div class="energy-particles">
                                <div class="energy-particle p1"></div>
                                <div class="energy-particle p2"></div>
                                <div class="energy-particle p3"></div>
                                <div class="energy-particle p4"></div>
                                <div class="energy-particle p5"></div>
                            </div>
            </div>

                        <!-- Disc music player -->
                        <div class="vinyl-music-player">
                            <!-- Purple pulse line effect -->
                            <div class="pulse-line top"></div>
                            <div class="pulse-line right"></div>
                            <div class="pulse-line bottom"></div>
                            <div class="pulse-line left"></div>
                            
                            <!-- Rotating halo effect -->
                            <div class="rotating-ring"></div>
                            
                            <!-- Energy ripple effect -->
                            <div class="energy-ripple"></div>
                            
                            <!-- Twinkling stars effect -->
                            <div class="twinkle-star"></div>
                            <div class="twinkle-star"></div>
                            <div class="twinkle-star"></div>
                            <div class="twinkle-star"></div>
                            
                            <h5>üéµ Vinyl Music Player</h5>
                            

                            
                            <!-- Main player area - simplified version -->
                            <div class="vinyl-player-container">
                                                                    <!-- Disc area -->
                                    <div class="vinyl-disc-container">
                                        <div class="vinyl-disc" id="vinylDisc">
                                        <div class="vinyl-label">
                                            <div class="label-text">
                                                <div class="artist-name">Scorpions</div>
                                                <div class="song-title">Still Loving You</div>
                                            </div>
                                        </div>
                                        <div class="vinyl-grooves">
                                            <div class="groove"></div>
                                            <div class="groove"></div>
                                            <div class="groove"></div>
                                            <div class="groove"></div>
                                            <div class="groove"></div>
                                        </div>
                                    </div>
                                    <!-- Tonearm -->
                                    <div class="tonearm" id="tonearm">
                                        <div class="tonearm-base"></div>
                                        <div class="tonearm-arm"></div>
                                        <div class="tonearm-needle"></div>
                                    </div>
                </div>
                
                                <!-- Player control panel -->
                                <div class="player-control-panel">
                                    <!-- Audio player decorative light points -->
                                    <div class="audio-decoration">
                                        <div class="audio-light-point p1"></div>
                                        <div class="audio-light-point p2"></div>
                                        <div class="audio-light-point p3"></div>
                                        <div class="audio-light-point p4"></div>
                                    </div>
                                    
                                                                        <!-- Main audio element - show native controls -->
                                    <audio id="vinylAudio" controls style="width: 100%; margin-bottom: 20px;">
                                        <source src="assets/music/Scorpions-Still Loving You.ogg" type="audio/ogg">
                                        Your browser does not support audio playback
                                    </audio>
                                    
                                    <!-- Song information -->
                                    <div class="track-display">
                                        <div class="track-title" id="trackTitle">üéµ Still Loving You</div>
                                        <div class="track-artist" id="trackArtist">Scorpions</div>
                </div>
            </div>

                                <!-- Music ripple effects -->
                                <div class="music-wave">
                                    <div class="music-wave-bar"></div>
                                    <div class="music-wave-bar"></div>
                                    <div class="music-wave-bar"></div>
                                    <div class="music-wave-bar"></div>
                                    <div class="music-wave-bar"></div>
                                    <div class="music-wave-bar"></div>
                                    <div class="music-wave-bar"></div>
                                </div>
                            </div>
                
                            <!-- Music genre selection -->
                            <div class="genre-selector">
                                <h6>Select Music Genre</h6>
                                <div class="genre-options">
                                    <button class="genre-option rock-option" data-genre="rock">
                                        <div class="genre-name">Rock</div>
                                        <div class="genre-desc">Classic & Modern Rock</div>
                                    </button>
                                    <button class="genre-option pop-option" data-genre="pop">
                                        <div class="genre-name">Pop</div>
                                        <div class="genre-desc">Popular Hits</div>
                                    </button>
                                    <button class="genre-option metal-option" data-genre="metal">
                                        <div class="genre-name">Metal</div>
                                        <div class="genre-desc">Heavy & Power Metal</div>
                                    </button>
                                </div>
                                <!-- Test hint -->
                                <div class="test-hint" style="margin-top: 15px; font-size: 0.9rem; color: #64748b; text-align: center;">
                                    Click any genre button above to test functionality
                </div>
                

                

                            </div>
                            
                            <!-- Platform links -->
                            <div class="platform-links">
                                <h6>üåê Listen on Platform</h6>
                                <div class="platform-grid">
                                    <a href="#" class="platform-link spotify-link" data-platform="spotify">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/8/84/Spotify_icon.svg" alt="Spotify">
                                        <span>Spotify</span>
                                    </a>
                                    <a href="#" class="platform-link youtube-link" data-platform="youtube">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/b/b8/YouTube_Logo_2017.svg" alt="YouTube">
                                        <span>YouTube</span>
                                    </a>
                                    <a href="#" class="platform-link apple-link" data-platform="apple">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg" alt="Apple Music">
                                        <span>Apple Music</span>
                                    </a>
                                    <a href="#" class="platform-link amazon-link" data-platform="amazon">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/a/a9/Amazon_logo.svg" alt="Amazon Music">
                                        <span>Amazon</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    

                    
                    <!-- Floating music elements -->
                    <div class="floating-music-elements">
                        <div class="music-element element-1">üéº</div>
                        <div class="music-element element-2">üéπ</div>
                        <div class="music-element element-3">üé∫</div>
                        <div class="music-element element-4">ü•Å</div>
                        <div class="music-element element-5">üé∏</div>
                        <div class="music-element element-6">üéª</div>
                        <div class="music-element element-7">üé§</div>
                        <div class="music-element element-8">üéß</div>
                    </div>
                </div>
                
                <!-- Band showcase area -->
                <!-- Band showcase area - Bending Gallery -->
                <div class="bands-showcase inspira-showcase">
                    <h3 class="showcase-title inspira-showcase-title">
                        <span class="title-icon">üåü</span>
                        <span class="title-text">My Favorite Bands</span>
                        <div class="title-accent"></div>
                    </h3>
                    
                    <!-- Rock Legends Bending Gallery -->
                    <div class="genre-section">
                        <h4 class="genre-section-title">
                            <span class="genre-text">Rock Legends</span>
                        </h4>

                        <div class="bending-gallery-container">
                            <div class="bending-gallery" id="rockBendingGallery">
                                <!-- Rock band cards will be dynamically generated here -->
                            </div>
                            <div class="gallery-controls">
                                <button class="gallery-btn prev-btn" data-gallery="rock">
                                    <span class="btn-icon">‚Üê</span>
                                </button>
                                <button class="gallery-btn next-btn" data-gallery="rock">
                                    <span class="btn-icon">‚Üí</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pop Icons Bending Gallery -->
                    <div class="genre-section">
                        <h4 class="genre-section-title">
                            <span class="genre-text">Pop Icons</span>
                        </h4>
                        <div class="bending-gallery-container">
                            <div class="bending-gallery" id="popBendingGallery">
                                <!-- Pop artist cards will be dynamically generated here -->
                            </div>
                            <div class="gallery-controls">
                                <button class="gallery-btn prev-btn" data-gallery="pop">
                                    <span class="btn-icon">‚Üê</span>
                                </button>
                                <button class="gallery-btn next-btn" data-gallery="pop">
                                    <span class="btn-icon">‚Üí</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Metal Masters Bending Gallery -->
                    <div class="genre-section">
                        <h4 class="genre-section-title">
                            <span class="genre-text">Metal Masters</span>
                        </h4>
                        <div class="bending-gallery-container">
                            <div class="bending-gallery" id="metalBendingGallery">
                                <!-- Metal band cards will be dynamically generated here -->
                            </div>
                            <div class="gallery-controls">
                                <button class="gallery-btn prev-btn" data-gallery="metal">
                                    <span class="btn-icon">‚Üê</span>
                                </button>
                                <button class="gallery-btn next-btn" data-gallery="metal">
                                    <span class="btn-icon">‚Üí</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Music statistics chart -->
                <div class="music-stats-section inspira-stats">
                    <h3 class="stats-title inspira-stats-title">
                        <div class="stats-underline"></div>
                        <span class="stats-text">Music Statistics</span>
                        <div class="stats-underline"></div>
                    </h3>
                    <div class="stats-grid">
                        <div class="stat-card inspira-stat-card">
                            <div class="stat-decoration">
                                <div class="stat-glow"></div>
                                <div class="stat-particles"></div>
                            </div>
                            <div class="stat-number">500+</div>
                            <div class="stat-label">Songs</div>
                        </div>
                        <div class="stat-card inspira-stat-card">
                            <div class="stat-decoration">
                                <div class="stat-glow"></div>
                                <div class="stat-particles"></div>
                            </div>
                            <div class="stat-number">50+</div>
                            <div class="stat-label">Albums</div>
                        </div>
                        <div class="stat-card inspira-stat-card">
                            <div class="stat-decoration">
                                <div class="stat-glow"></div>
                                <div class="stat-particles"></div>
                            </div>
                            <div class="stat-number">15+</div>
                            <div class="stat-label">Genres</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Cinema Journey card -->
            <div class="card movie-card cinematic-universe">
                <!-- Film reel background -->
                <div class="film-reel-background">
                    <div class="reel-container reel-left">
                        <div class="film-strip">
                            <div class="frame"></div>
                            <div class="frame"></div>
                            <div class="frame"></div>
                            <div class="frame"></div>
                            <div class="frame"></div>
                        </div>
                    </div>
                    <div class="reel-container reel-right">
                        <div class="film-strip">
                            <div class="frame"></div>
                            <div class="frame"></div>
                            <div class="frame"></div>
                            <div class="frame"></div>
                            <div class="frame"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Film projector effect -->
                <div class="projector-effect">
                    <div class="projector-light"></div>
                    <div class="projector-beam"></div>
                </div>
                
                <div class="cinema-header">
                    <h2 class="card-title cinematic-title">
                        <span class="title-text">üé¨ Film Reel Chronicles</span>
                        <div class="title-underline"></div>
                        <div class="title-subtitle">A Cinematic Journey Through Reel & Real</div>
                    </h2>
                    <p class="card-subtitle cinematic-subtitle">Where every frame tells a story, every scene captures a moment</p>
                </div>
                
                <!-- Movie genre statistics - film style -->
                <div class="movie-genre-stats">
                    <div class="genre-stat-card action-card">
                        <div class="stat-content">
                            <h4>Action Thriller</h4>
                            <div class="stat-number">3</div>
                            <div class="stat-label">Films</div>
                        </div>
                        <div class="film-perforations"></div>
                    </div>
                    <div class="genre-stat-card adventure-card">
                        <div class="stat-content">
                            <h4>Adventure Fantasy</h4>
                            <div class="stat-number">2</div>
                            <div class="stat-label">Films</div>
                        </div>
                        <div class="film-perforations"></div>
                    </div>
                    <div class="genre-stat-card drama-card">
                        <div class="stat-content">
                            <h4>Drama Comedy</h4>
                            <div class="stat-number">1</div>
                            <div class="stat-label">Film</div>
                        </div>
                        <div class="film-perforations"></div>
                    </div>
                </div>

                <!-- Movie showcase area - film grid -->
                <div class="movies-showcase">
                    <h3 class="showcase-title">
                        <span class="title-icon">üéûÔ∏è</span>
                        <span class="title-text">Film Reel Collection</span>
                        <div class="title-accent"></div>
                    </h3>
                    
                    <!-- Film reel grid -->
                    <div class="movies-grid">
                        <!-- Mission: Impossible -->
                        <div class="movie-reel collection mission-impossible" data-movie="mission-impossible">
                            <div class="reel-header">
                                <div class="reel-title">Mission Impossible</div>
                            </div>
                            <div class="poster-wrap">
                                <img class="poster-img" src="../movies/images/movies/missionimpossible.jpg" alt="Mission: Impossible">
                                <div class="poster-emoji" style="display:none;">üéØ</div>
                            </div>
                            <div class="movie-genre">Action</div>
                        </div>
                    
                        <!-- Fast & Furious -->
                        <div class="movie-reel collection fast-furious" data-movie="fast-furious">
                            <div class="reel-header">
                                <div class="reel-title">Fast & Furious</div>
                            </div>
                            <div class="poster-wrap">
                                <img class="poster-img" src="../movies/images/movies/FastFurious.jpg" alt="Fast & Furious">
                                <div class="poster-emoji" style="display:none;">üèéÔ∏è</div>
                            </div>
                            <div class="movie-genre">Racing</div>
                        </div>
                        
                        <!-- The Bourne Identity -->
                        <div class="movie-reel collection bourne-identity" data-movie="bourne-identity">
                            <div class="reel-header">
                                <div class="reel-title">Bourne Identity</div>
                            </div>
                            <div class="poster-wrap">
                                <img class="poster-img" src="../movies/images/movies/TheBourneIdentity.jpg" alt="The Bourne Identity">
                                <div class="poster-emoji" style="display:none;">üïµÔ∏è</div>
                            </div>
                            <div class="movie-genre">Spy</div>
                        </div>
                            
                        <!-- Jurassic Park -->
                        <div class="movie-reel collection jurassic-park" data-movie="jurassic-park">
                            <div class="reel-header">
                                <div class="reel-title">Jurassic Park</div>
                            </div>
                            <div class="poster-wrap">
                                <img class="poster-img" src="images/movies/JurassicPark.jpg" alt="Jurassic Park">
                                <div class="poster-emoji">ü¶ï</div>
                            </div>
                            <div class="movie-genre">Adventure</div>
                        </div>
                            
                        <!-- Green Book -->
                        <div class="movie-reel collection green-book" data-movie="green-book">
                            <div class="reel-header">
                                <div class="reel-title">Green Book</div>
                                </div>
                            <div class="poster-wrap">
                                <img class="poster-img" src="../movies/images/movies/GreenBook.jpg" alt="Green Book">
                                <div class="poster-emoji" style="display:none;">üìö</div>
                            </div>
                            <div class="movie-genre">Drama</div>
                        </div>

                        <!-- Harry Potter -->
                        <div class="movie-reel collection harry-potter" data-movie="harry-potter">
                            <div class="reel-header">
                                <div class="reel-title">Harry Potter</div>
                            </div>
                            <div class="poster-wrap">
                                <img class="poster-img" src="../movies/images/movies/HarryPotter.jpg" alt="Harry Potter">
                                <div class="poster-emoji" style="display:none;">‚ö°</div>
                            </div>
                            <div class="movie-genre">Fantasy</div>
                        </div>
                    </div>
                </div>
                
                <!-- Movie timeline - film reel style -->
                <div class="cinema-timeline">
                    <h3 class="timeline-title">
                        <span class="title-icon">üéûÔ∏è</span>
                        <span class="title-text">Film Reel Timeline</span>
                        <div class="title-accent"></div>
                    </h3>
                    
                    <div class="timeline-container">
                        <div class="timeline-line"></div>
                        <div class="timeline-reels">
                            <div class="timeline-reel" data-year="1993">
                                <div class="reel-content">
                                    <div class="movie-year">1993</div>
                                    <div class="movie-title">Jurassic Park</div>
                                </div>
                                <div class="reel-dot"></div>
                            </div>

                            <div class="timeline-reel" data-year="1996">
                                <div class="reel-content">
                                    <div class="movie-year">1996</div>
                                    <div class="movie-title">Mission Impossible</div>
                                </div>
                                <div class="reel-dot"></div>
                            </div>

                            <div class="timeline-reel" data-year="2001">
                                <div class="reel-content">
                                    <div class="movie-year">2001</div>
                                    <div class="movie-title">Harry Potter</div>
                                </div>
                                <div class="reel-dot"></div>
                            </div>
                            
                            <div class="timeline-reel" data-year="2001">
                                <div class="reel-content">
                                    <div class="movie-year">2001</div>
                                    <div class="movie-title">Fast & Furious</div>
                                </div>
                                <div class="reel-dot"></div>
                            </div>

                            <div class="timeline-reel" data-year="2002">
                                <div class="reel-content">
                                    <div class="movie-year">2002</div>
                                    <div class="movie-title">Bourne Identity</div>
                                </div>
                                <div class="reel-dot"></div>
                            </div>
                            
                            <div class="timeline-reel" data-year="2018">
                                <div class="reel-content">
                                    <div class="movie-year">2018</div>
                                    <div class="movie-title">Green Book</div>
                                </div>
                                <div class="reel-dot"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="js/script.js"></script>
    <script>
        // Robust poster loader for Film Reel Collection
        (function(){
            function trySetImage(imgEl, candidates){
                if(!imgEl || !candidates || candidates.length===0){ return; }
                let i = 0;
                const tryNext = () => {
                    if(i >= candidates.length){ 
                        console.log('‚ùå All candidate images failed to load:', imgEl.alt);
                        imgEl.style.display='none'; 
                        const emoji = imgEl.nextElementSibling; 
                        if(emoji){ emoji.style.display='flex'; } 
                        return; 
                    }
                    const src = candidates[i++];
                    console.log('üîÑ Attempting to load image:', src, 'for', imgEl.alt);
                    const probe = new Image();
                    probe.onload = () => { 
                        console.log('‚úÖ Image loaded successfully:', src, 'for', imgEl.alt);
                        imgEl.src = src; 
                        imgEl.style.display='block'; 
                        const emoji = imgEl.nextElementSibling; 
                        if(emoji){ emoji.style.display='none'; } 
                    };
                    probe.onerror = () => {
                        console.log('‚ùå Image failed to load:', src, 'for', imgEl.alt);
                        tryNext();
                    };
                    probe.src = src;
                };
                tryNext();
            }

            document.addEventListener('DOMContentLoaded', function(){
                const base = 'images/movies/';
                const posters = [
                    {
                        key: 'mission-impossible',
                        files: [
                            base + 'missionimpossible.jpg',
                            base + 'MissionImpossible.jpg',
                            base + 'missionimpossible.JPG'
                        ]
                    },
                    {
                        key: 'fast-furious',
                        files: [
                            base + 'FastFurious.jpg',
                            base + 'fastfurious.jpg',
                            base + 'FastFurious.JPG'
                        ]
                    },
                    {
                        key: 'bourne-identity',
                        files: [
                            base + 'TheBourneIdentity.jpg',
                            base + 'thebourneidentity.jpg'
                        ]
                    },
                    {
                        key: 'jurassic-park',
                        files: [
                            base + 'JurassicPark.jpg',
                            base + 'jurassicpark.jpg'
                        ]
                    },
                    {
                        key: 'green-book',
                        files: [
                            base + 'GreenBook.jpg',
                            base + 'greenbook.jpg'
                        ]
                    },
                    {
                        key: 'harry-potter',
                        files: [
                            base + 'HarryPotter.jpg',
                            base + 'harrypotter.jpg'
                        ]
                    }
                ];

                posters.forEach(p => {
                    const card = document.querySelector('.movie-reel.' + p.key + ' .poster-img');
                    console.log('üîç Searching for poster element:', p.key, card);
                    if(card){ 
                        console.log('‚úÖ Found poster element, starting to load:', p.key);
                        trySetImage(card, p.files); 
                    } else {
                        console.error('‚ùå Poster element not found:', p.key);
                    }
                });
            });
        })();
    </script>
    
    <!-- Directly bind button events to ensure functionality -->
    <script>
        // Wait for page to fully load
        window.addEventListener('load', function() {
            console.log('üåê Page fully loaded');
            
            // Clean up any duplicate cards
            const existingCards = document.querySelectorAll('.travel-details-card');
            if (existingCards.length > 0) {
                console.log('üßπ Cleaning up duplicate cards:', existingCards.length);
                existingCards.forEach(card => card.remove());
            }
            
            // Find button
            const statsButton = document.querySelector('.stats-button');
            console.log('üîç Button search result:', statsButton);
            
            if (statsButton) {
                console.log('‚úÖ Button found, starting to bind events');
                
                // Remove any existing old event listeners
                const newButton = statsButton.cloneNode(true);
                statsButton.parentNode.replaceChild(newButton, statsButton);
                
                // Re-get button reference
                const freshButton = document.querySelector('.stats-button');
                
                // Directly bind click event
                freshButton.onclick = function(e) {
                    console.log('üéØ Button clicked!');
                    e.preventDefault();
                    e.stopPropagation();
                    
                    // Show travel details
                    showTravelDetails();
                };
                
                // Add visual feedback
                freshButton.style.cursor = 'pointer';
                freshButton.style.transition = 'all 0.3s ease';
                
                // Hover effect
                freshButton.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-2px)';
                    this.style.boxShadow = '0 8px 25px rgba(0, 0, 0, 0.2)';
                });
                
                freshButton.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                    this.style.boxShadow = '0 4px 15px rgba(0, 0, 0, 0.1)';
                });
                
                console.log('‚úÖ Button event binding completed');
                
                // Test if button is actually clickable
                setTimeout(function() {
                    console.log('üß™ Testing button status...');
                    console.log('Button visibility:', freshButton.offsetParent !== null);
                    console.log('Button size:', freshButton.offsetWidth, 'x', freshButton.offsetHeight);
                    console.log('Button styles:', {
                        display: getComputedStyle(freshButton).display,
                        visibility: getComputedStyle(freshButton).visibility,
                        opacity: getComputedStyle(freshButton).opacity,
                        pointerEvents: getComputedStyle(freshButton).pointerEvents,
                        cursor: getComputedStyle(freshButton).cursor
                    });
                }, 1000);
                
            } else {
                console.error('‚ùå Button not found!');
                
                // List all possible buttons
                const allButtons = document.querySelectorAll('button');
                console.log('All buttons on page:', allButtons);
                
                // List all elements containing stats
                const allStatsElements = document.querySelectorAll('[class*="stats"]');
                console.log('All elements containing stats:', allStatsElements);
                
                // Try other selectors
                const buttonByText = Array.from(document.querySelectorAll('button')).find(btn => 
                    btn.textContent.includes('Travel') || btn.textContent.includes('Details')
                );
                console.log('Button found by text:', buttonByText);
            }
        });
        
        // Second showTravelDetails function has been removed, using latest popup version
        
        // Add keyboard event support
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                const cards = document.querySelectorAll('.travel-details-card');
                cards.forEach(card => card.remove());
            }
        });
        
        // Add music player animation styles
        if (!document.getElementById('musicPlayerStyles')) {
            const style = document.createElement('style');
            style.id = 'musicPlayerStyles';
            style.textContent = `
                @keyframes slideInRight {
                    from {
                        transform: translateX(100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateX(0);
                        opacity: 1;
                    }
                }
                
                @keyframes slideOutRight {
                    from {
                        transform: translateX(0);
                        opacity: 1;
                    }
                    to {
                        transform: translateX(100%);
                        opacity: 0;
                    }
                }
                
                .genre-option {
                    cursor: pointer;
                    transition: all 0.3s ease;
                }
                
                .genre-option:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
                }
                
                .genre-option.active {
                    background: linear-gradient(135deg, #667eea, #f093fb);
                    color: white;
                    transform: scale(1.05);
                }
                
                #vinylAudio {
                    border-radius: 8px;
                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
                }
                
                #vinylAudio::-webkit-media-controls-panel {
                    background: linear-gradient(135deg, #f8fafc, #e2e8f0);
                }
                
                #vinylAudio::-webkit-media-controls-play-button {
                    background: linear-gradient(135deg, #667eea, #f093fb);
                    border-radius: 50%;
                    color: white;
                }
                
                /* Play icon overlay styles */
                .play-icon-overlay {
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    z-index: 100;
                    pointer-events: none;
                    opacity: 0.9;
                    transition: all 0.3s ease;
                }
                
                .play-triangle {
                    width: 0;
                    height: 0;
                    border-left: 20px solid white;
                    border-top: 12px solid transparent;
                    border-bottom: 12px solid transparent;
                    margin: 0 auto 8px auto;
                    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
                    animation: playPulse 2s ease-in-out infinite;
                }
                
                .play-circle {
                    width: 40px;
                    height: 40px;
                    border: 3px solid rgba(255, 255, 255, 0.8);
                    border-radius: 50%;
                    margin: 0 auto;
                    position: relative;
                    background: rgba(255, 255, 255, 0.1);
                    backdrop-filter: blur(5px);
                    animation: playRotate 3s linear infinite;
                }
                
                .play-circle::before {
                    content: '';
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    width: 20px;
                    height: 20px;
                    border: 2px solid rgba(255, 255, 255, 0.6);
                    border-radius: 50%;
                    animation: playExpand 2s ease-in-out infinite;
                }
                
                /* Play icon animation */
                @keyframes playPulse {
                    0%, 100% { 
                        transform: scale(1);
                        opacity: 0.9;
                    }
                    50% { 
                        transform: scale(1.1);
                        opacity: 1;
                    }
                }
                
                @keyframes playRotate {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
                
                @keyframes playExpand {
                    0% { 
                        transform: translate(-50%, -50%) scale(0.8);
                        opacity: 0.8;
                    }
                    50% { 
                        transform: translate(-50%, -50%) scale(1.2);
                        opacity: 1;
                    }
                    100% { 
                        transform: translate(-50%, -50%) scale(0.8);
                        opacity: 0.8;
                    }
                }
                
                /* Hover effect */
                .vinyl-disc-container:hover .play-icon-overlay {
                    transform: translate(-50%, -50%) scale(1.1);
                    opacity: 1;
                }
                
                .vinyl-disc-container:hover .play-triangle {
                    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.4));
                }
                
                .vinyl-disc-container:hover .play-circle {
                    border-color: rgba(255, 255, 255, 1);
                    background: rgba(255, 255, 255, 0.2);
                }
                
                /* Play state styles */
                .play-icon-overlay.playing .play-triangle {
                    animation: playPulse 1s ease-in-out infinite;
                    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.5));
                }
                
                .play-icon-overlay.playing .play-circle {
                    animation: playRotate 2s linear infinite;
                    border-color: rgba(255, 255, 255, 1);
                    background: rgba(255, 255, 255, 0.3);
                }
                
                .play-icon-overlay.playing .play-circle::before {
                    animation: playExpand 1.5s ease-in-out infinite;
                }
                
                /* Play icon hover effect enhancement */
                .play-icon-overlay:hover {
                    transform: translate(-50%, -50%) scale(1.15);
                    opacity: 1;
                }
                
                .play-icon-overlay:hover .play-triangle {
                    filter: drop-shadow(0 6px 12px rgba(0, 0, 0, 0.6));
                }
                
                .play-icon-overlay:hover .play-circle {
                    border-color: rgba(255, 255, 255, 1);
                    background: rgba(255, 255, 255, 0.4);
                }
                
                /* ===== Film Movie Style Styles ===== */
                
                /* Movie card base styles */
                .cinematic-universe {
                    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 50%, #cbd5e1 100%);
                    border: 3px solid #d4a574;
                    box-shadow: 
                        0 25px 50px rgba(0, 0, 0, 0.1),
                        inset 0 0 50px rgba(212, 165, 116, 0.1),
                        0 0 30px rgba(212, 165, 116, 0.2);
                    position: relative;
                    overflow: hidden;
                    border-radius: 20px;
                }
                
                /* Film reel background */
                .film-reel-background {
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    pointer-events: none;
                    z-index: 1;
                }
                
                .reel-container {
                    position: absolute;
                    width: 120px;
                    height: 120px;
                    border: 8px solid #d4a574;
                    border-radius: 50%;
                    background: linear-gradient(45deg, #e6ccb2, #d4a574, #b08968);
                    box-shadow: 
                        inset 0 0 20px rgba(0, 0, 0, 0.1),
                        0 0 30px rgba(212, 165, 116, 0.4),
                        0 8px 25px rgba(0, 0, 0, 0.1);
                    position: relative;
                }
                
                .reel-container::before {
                    content: '';
                    position: absolute;
                    top: -4px;
                    left: -4px;
                    right: -4px;
                    bottom: -4px;
                    border: 2px solid #f3e7d3;
                    border-radius: 50%;
                    background: transparent;
                    z-index: -1;
                }
                
                .reel-container::after {
                    content: '';
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    width: 40px;
                    height: 40px;
                    border: 3px solid #8b7355;
                    border-radius: 50%;
                    background: linear-gradient(45deg, #f3e7d3, #e6ccb2);
                }
                
                .reel-left {
                    top: 20px;
                    left: 20px;
                    animation: reelRotate 20s linear infinite;
                }
                
                .reel-right {
                    bottom: 20px;
                    right: 20px;
                    animation: reelRotate 20s linear infinite reverse;
                }
                
                @keyframes reelRotate {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
                
                .film-strip {
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    width: 80px;
                    height: 80px;
                    border: 2px solid #8b7355;
                    border-radius: 50%;
                    background: repeating-conic-gradient(
                        from 0deg,
                        #8b7355 0deg 18deg,
                        transparent 18deg 36deg
                    );
                    box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.1);
                }
                
                .film-strip .frame {
                    position: absolute;
                    width: 4px;
                    height: 4px;
                    background: #f3e7d3;
                    border-radius: 50%;
                    box-shadow: 0 0 5px rgba(243, 231, 211, 0.8);
                }
                
                .film-strip .frame:nth-child(1) { 
                    top: 10px; 
                    left: 50%; 
                    transform: translateX(-50%);
                    animation: frameGlow 2s ease-in-out infinite;
                }
                .film-strip .frame:nth-child(2) { 
                    top: 50%; 
                    right: 10px; 
                    transform: translateY(-50%);
                    animation: frameGlow 2s ease-in-out infinite 0.5s;
                }
                .film-strip .frame:nth-child(3) { 
                    bottom: 10px; 
                    left: 50%; 
                    transform: translateX(-50%);
                    animation: frameGlow 2s ease-in-out infinite 1s;
                }
                .film-strip .frame:nth-child(4) { 
                    top: 50%; 
                    left: 10px; 
                    transform: translateY(-50%);
                    animation: frameGlow 2s ease-in-out infinite 1.5s;
                }
                .film-strip .frame:nth-child(5) { 
                    top: 25%; 
                    right: 25%;
                    animation: frameGlow 2s ease-in-out infinite 0.25s;
                }
                
                @keyframes frameGlow {
                    0%, 100% { 
                        background: #f3e7d3;
                        box-shadow: 0 0 5px rgba(243, 231, 211, 0.8);
                    }
                    50% { 
                        background: #fff;
                        box-shadow: 0 0 15px rgba(255, 255, 255, 1);
                    }
                }
                
                .film-strip .frame:nth-child(1) { top: 10px; left: 50%; transform: translateX(-50%); }
                .film-strip .frame:nth-child(2) { top: 50%; right: 10px; transform: translateY(-50%); }
                .film-strip .frame:nth-child(3) { bottom: 10px; left: 50%; transform: translateX(-50%); }
                .film-strip .frame:nth-child(4) { top: 50%; left: 10px; transform: translateY(-50%); }
                .film-strip .frame:nth-child(5) { top: 25%; right: 25%; }
                
                /* Projector effect */
                .projector-effect {
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    z-index: 2;
                    pointer-events: none;
                }
                
                .projector-light {
                    width: 20px;
                    height: 20px;
                    background: radial-gradient(circle, #fff, #fbbf24, #f59e0b);
                    border-radius: 50%;
                    animation: projectorPulse 3s ease-in-out infinite;
                    box-shadow: 
                        0 0 20px rgba(251, 191, 36, 0.6),
                        inset 0 0 10px rgba(255, 255, 255, 0.8);
                    position: relative;
                }
                
                .projector-light::before {
                    content: '';
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    width: 8px;
                    height: 8px;
                    background: #fff;
                    border-radius: 50%;
                    box-shadow: 0 0 10px rgba(255, 255, 255, 1);
                }
                
                @keyframes projectorPulse {
                    0%, 100% { 
                        opacity: 0.6; 
                        transform: scale(1);
                        box-shadow: 0 0 20px rgba(251, 191, 36, 0.6);
                    }
                    50% { 
                        opacity: 1; 
                        transform: scale(1.3);
                        box-shadow: 0 0 30px rgba(251, 191, 36, 0.8);
                    }
                }
                
                .projector-beam {
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    width: 3px;
                    height: 200px;
                    background: linear-gradient(to bottom, #fbbf24, #f59e0b, transparent);
                    transform: translate(-50%, -50%);
                    animation: beamScan 4s ease-in-out infinite;
                    border-radius: 2px;
                    box-shadow: 0 0 15px rgba(251, 191, 36, 0.4);
                }
                
                .projector-beam::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: 50%;
                    transform: translateX(-50%);
                    width: 8px;
                    height: 8px;
                    background: radial-gradient(circle, #fbbf24, transparent);
                    border-radius: 50%;
                    animation: beamGlow 4s ease-in-out infinite;
                }
                
                @keyframes beamScan {
                    0%, 100% { 
                        opacity: 0; 
                        transform: translate(-50%, -50%) scaleY(0);
                    }
                    50% { 
                        opacity: 1; 
                        transform: translate(-50%, -50%) scaleY(1);
                    }
                }
                
                @keyframes beamGlow {
                    0%, 100% { 
                        opacity: 0.5;
                        transform: translateX(-50%) scale(1);
                    }
                    50% { 
                        opacity: 1;
                        transform: translateX(-50%) scale(1.5);
                    }
                }
                
                /* Movie universe background decoration */
                .cinema-background {
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    pointer-events: none;
                    z-index: 1;
                }
                
                /* Floating film strips */
                .floating-film-reels {
                    position: absolute;
                    width: 100%;
                    height: 100%;
                }
                
                .film-reel {
                    position: absolute;
                    font-size: 24px;
                    opacity: 0.1;
                    animation: floatReel 8s ease-in-out infinite;
                }
                
                .reel-1 { top: 10%; left: 10%; animation-delay: 0s; }
                .reel-2 { top: 20%; right: 15%; animation-delay: 2s; }
                .reel-3 { bottom: 30%; left: 20%; animation-delay: 4s; }
                .reel-4 { bottom: 15%; right: 25%; animation-delay: 6s; }
                
                @keyframes floatReel {
                    0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.1; }
                    50% { transform: translateY(-20px) rotate(180deg); opacity: 0.3; }
                }
                
                /* Movie particle effects */
                .cinema-particles .particle {
                    position: absolute;
                    width: 4px;
                    height: 4px;
                    background: rgba(139, 92, 246, 0.6);
                    border-radius: 50%;
                    animation: particleFloat 6s linear infinite;
                }
                
                .p1 { top: 15%; left: 30%; animation-delay: 0s; }
                .p2 { top: 45%; right: 20%; animation-delay: 1s; }
                .p3 { bottom: 25%; left: 40%; animation-delay: 2s; }
                .p4 { top: 70%; right: 35%; animation-delay: 3s; }
                .p5 { bottom: 60%; left: 60%; animation-delay: 4s; }
                
                @keyframes particleFloat {
                    0% { transform: translateY(0px) scale(1); opacity: 0; }
                    20% { opacity: 1; }
                    80% { opacity: 1; }
                    100% { transform: translateY(-100px) scale(0); opacity: 0; }
                }
                
                /* Movie title styles */
                .cinematic-title {
                    color: #ffd700;
                    text-align: center;
                    margin-bottom: 30px;
                    position: relative;
                    z-index: 10;
                }
                
                .cinematic-title .title-text {
                    font-size: 2.5rem;
                    font-weight: 700;
                    background: linear-gradient(135deg, #d4a574, #e6ccb2, #b08968);
                    -webkit-background-clip: text;
                    -webkit-text-fill-color: transparent;
                    background-clip: text;
                    text-shadow: 0 0 30px rgba(212, 165, 116, 0.4);
                    font-family: 'Courier New', monospace;
                    letter-spacing: 2px;
                    position: relative;
                }
                
                .cinematic-title .title-text::before {
                    content: 'üé¨';
                    position: absolute;
                    left: -40px;
                    top: 50%;
                    transform: translateY(-50%);
                    font-size: 2rem;
                    opacity: 0.8;
                    animation: titleIconFloat 3s ease-in-out infinite;
                }
                
                .cinematic-title .title-text::after {
                    content: 'üéûÔ∏è';
                    position: absolute;
                    right: -40px;
                    top: 50%;
                    transform: translateY(-50%);
                    font-size: 2rem;
                    opacity: 0.8;
                    animation: titleIconFloat 3s ease-in-out infinite 1.5s;
                }
                
                @keyframes titleIconFloat {
                    0%, 100% { transform: translateY(-50%) translateY(0px); }
                    50% { transform: translateY(-50%) translateY(-10px); }
                }
                
                .cinematic-title .title-underline {
                    width: 150px;
                    height: 3px;
                    background: linear-gradient(90deg, #d4a574, #e6ccb2, #b08968);
                    margin: 15px auto;
                    border-radius: 2px;
                    box-shadow: 0 0 20px rgba(212, 165, 116, 0.4);
                    position: relative;
                }
                
                .cinematic-title .title-underline::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: linear-gradient(90deg, transparent, #f3e7d3, transparent);
                    animation: underlineShine 3s ease-in-out infinite;
                }
                
                @keyframes underlineShine {
                    0% { transform: translateX(-100%); }
                    100% { transform: translateX(100%); }
                }
                
                .cinematic-title .title-subtitle {
                    font-size: 1.1rem;
                    color: #8b7355;
                    font-weight: 400;
                    margin-top: 10px;
                    font-family: 'Courier New', monospace;
                    opacity: 0.9;
                }
                
                .cinematic-subtitle {
                    color: #8b7355;
                    text-align: center;
                    font-size: 1.1rem;
                    margin-bottom: 40px;
                    position: relative;
                    z-index: 10;
                    font-family: 'Courier New', monospace;
                    opacity: 0.8;
                }
                
                /* Movie genre statistics card - film style */
                .movie-genre-stats {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                    gap: 25px;
                    margin-bottom: 40px;
                    position: relative;
                    z-index: 10;
                }
                
                .genre-stat-card {
                    background: linear-gradient(135deg, #f8fafc, #e2e8f0);
                    border: 2px solid #d4a574;
                    border-radius: 25px;
                    padding: 20px;
                    text-align: center;
                    transition: all 0.4s ease;
                    position: relative;
                    overflow: hidden;
                    box-shadow: 
                        0 8px 32px rgba(0, 0, 0, 0.1),
                        inset 0 0 20px rgba(212, 165, 116, 0.05),
                        0 0 20px rgba(212, 165, 116, 0.1);
                }
                
                .genre-stat-card::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: -100%;
                    width: 100%;
                    height: 100%;
                    background: linear-gradient(90deg, transparent, rgba(212, 165, 116, 0.2), transparent);
                    transition: left 0.6s ease;
                }
                
                .genre-stat-card:hover::before {
                    left: 100%;
                }
                
                .genre-stat-card:hover {
                    transform: translateY(-8px) scale(1.02);
                    border-color: #b08968;
                    box-shadow: 
                        0 20px 40px rgba(0, 0, 0, 0.15),
                        0 0 30px rgba(212, 165, 116, 0.3),
                        inset 0 0 30px rgba(212, 165, 116, 0.1);
                }
                
                /* Film perforation effect */
                .film-perforations {
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    height: 20px;
                    background: repeating-linear-gradient(
                        90deg,
                        transparent 0px,
                        transparent 15px,
                        #000 15px,
                        #000 20px
                    );
                    opacity: 0.3;
                }
                
                .genre-stat-card .stat-content {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                    text-align: center;
                }
                
                .genre-stat-card .stat-content h4 {
                    color: #059669;
                    font-size: 1.1rem;
                    margin-bottom: 12px;
                    font-weight: 600;
                    font-family: 'Courier New', monospace;
                    text-transform: uppercase;
                    letter-spacing: 1px;
                    max-width: 200px;
                    word-wrap: break-word;
                    overflow-wrap: break-word;
                    text-align: center;
                    margin-left: auto;
                    margin-right: auto;
                    text-shadow: 0 1px 2px rgba(5, 150, 105, 0.1);
                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                }
                
                .genre-stat-card:hover .stat-content h4 {
                    transform: translateY(-2px);
                    text-shadow: 0 2px 4px rgba(5, 150, 105, 0.2);
                }
                
                .genre-stat-card .stat-number {
                    font-size: 3rem;
                    font-weight: 700;
                    margin-bottom: 8px;
                    color: #d4a574;
                    text-shadow: 0 0 20px rgba(212, 165, 116, 0.4);
                    font-family: 'Georgia', serif;
                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                }
                
                .genre-stat-card:hover .stat-number {
                    transform: scale(1.05);
                    color: #b8860b;
                    text-shadow: 0 0 30px rgba(212, 165, 116, 0.6);
                }
                
                .genre-stat-card .stat-label {
                    color: #8b7355;
                    font-size: 0.9rem;
                    text-transform: uppercase;
                    letter-spacing: 2px;
                    font-family: 'Courier New', monospace;
                    opacity: 0.8;
                    font-weight: 500;
                }
                
                /* Movie display area */
                .movies-showcase {
                    margin-bottom: 50px;
                    position: relative;
                    z-index: 10;
                }
                
                .showcase-title {
                    text-align: center;
                    margin-bottom: 30px;
                    color: #f8fafc;
                }
                
                .showcase-title .title-icon {
                    font-size: 2rem;
                    margin-right: 15px;
                }
                
                .showcase-title .title-text {
                    font-size: 1.6rem;
                    font-weight: 600;
                    color: #059669;
                    max-width: 300px;
                    word-wrap: break-word;
                    overflow-wrap: break-word;
                    text-align: center;
                    margin: 0 auto;
                    text-shadow: 0 2px 4px rgba(5, 150, 105, 0.2);
                }
                
                .showcase-title .title-accent {
                    width: 60px;
                    height: 3px;
                    background: linear-gradient(90deg, #6366f1, #8b5cf6);
                    margin: 15px auto 0;
                    border-radius: 2px;
                }
                
                /* Movie grid */
                .movies-grid {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                    gap: 25px;
                }
                
                /* Movie card */
                .movies-grid .movie-card {
                    background: rgba(255, 255, 255, 0.9);
                    backdrop-filter: blur(15px);
                    border-radius: 20px;
                    overflow: hidden;
                    transition: all 0.4s ease;
                    position: relative;
                    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
                }
                
                        /* Movie card base animation */
        .movies-grid .movie-card {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .movies-grid .movie-card:hover {
            transform: translateY(-12px) scale(1.02);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
        }
        
        /* Enhanced gradient border effect on hover */
        .mission-impossible:hover::after {
            background: linear-gradient(135deg, #fbbf24, #dc2626, #fbbf24);
        }
        
        .fast-furious:hover::after {
            background: linear-gradient(135deg, #fbbf24, #f59e0b, #fbbf24);
        }
        
        .bourne-identity:hover::after {
            background: linear-gradient(135deg, #fbbf24, #4f46e5, #fbbf24);
        }
        
        .jurassic-park:hover::after {
            background: linear-gradient(135deg, #fbbf24, #16a34a, #fbbf24);
        }
        
        .green-book:hover::after {
            background: linear-gradient(135deg, #fbbf24, #7c3aed, #fbbf24);
        }
        
        .harry-potter:hover::after {
            background: linear-gradient(135deg, #fbbf24, #d97706, #fbbf24);
        }
        
        /* Movie poster micro animation */
        .movie-poster {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }
        
        .movie-card:hover .movie-poster {
            transform: scale(1.05);
            filter: brightness(1.1);
        }
        
        /* Movie overlay micro animation */
        .movie-overlay {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0;
            transform: translateY(20px);
        }
        
        .movie-card:hover .movie-overlay {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Movie title micro animation */
        .movie-title {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .movie-card:hover .movie-title {
            transform: translateY(-3px);
            text-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        /* Movie tag micro animation */
        .tag {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }
        
        .movie-card:hover .tag {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        /* Film perforation micro animation */
        .film-perforations {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .movie-card:hover .film-perforations {
            transform: scale(1.1);
            opacity: 0.8;
        }
        
        /* Light wave sweep effect */
        .movie-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.6s ease;
            z-index: 1;
            pointer-events: none;
        }
        
        .movie-card:hover::before {
            left: 100%;
        }
        
        /* Entrance animation */
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .movie-card {
            animation: slideInUp 0.6s ease-out forwards;
            opacity: 0;
        }
        
        .movie-card:nth-child(1) { animation-delay: 0.1s; }
        .movie-card:nth-child(2) { animation-delay: 0.2s; }
        .movie-card:nth-child(3) { animation-delay: 0.3s; }
        .movie-card:nth-child(4) { animation-delay: 0.4s; }
        .movie-card:nth-child(5) { animation-delay: 0.5s; }
        .movie-card:nth-child(6) { animation-delay: 0.6s; }
        
        /* Pause entrance animation on hover */
        .movie-card:hover {
            animation-play-state: paused;
        }
        
        /* Click effect */
        .movie-card:active {
            transform: scale(0.98);
            transition: all 0.1s ease;
        }
                
                        /* Unique style for each movie card - use pseudo-elements to achieve rounded gradient border */
        .mission-impossible {
            border: none;
            position: relative;
            border-radius: 25px;
            box-shadow: 0 4px 20px rgba(220, 38, 38, 0.1);
        }
        
        .mission-impossible::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(135deg, #d4a574, #dc2626, #d4a574);
            border-radius: 27px;
            z-index: -1;
        }
        
        .fast-furious {
            border: none;
            position: relative;
            border-radius: 25px;
            box-shadow: 0 4px 20px rgba(245, 158, 11, 0.1);
        }
        
        .fast-furious::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(135deg, #d4a574, #f59e0b, #d4a574);
            border-radius: 27px;
            z-index: -1;
        }
        
        .bourne-identity {
            border: none;
            position: relative;
            border-radius: 25px;
            box-shadow: 0 4px 20px rgba(79, 70, 229, 0.1);
        }
        
        .bourne-identity::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(135deg, #d4a574, #4f46e5, #d4a574);
            border-radius: 27px;
            z-index: -1;
        }
        
        .jurassic-park {
            border: none;
            position: relative;
            border-radius: 25px;
            box-shadow: 0 4px 20px rgba(22, 163, 74, 0.1);
        }
        
        .jurassic-park::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(135deg, #d4a574, #16a34a, #d4a574);
            border-radius: 27px;
            z-index: -1;
        }
        
        .green-book {
            border: none;
            position: relative;
            border-radius: 25px;
            box-shadow: 0 4px 20px rgba(124, 58, 237, 0.1);
        }
        
        .green-book::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(135deg, #d4a574, #7c3aed, #d4a574);
            border-radius: 27px;
            z-index: -1;
        }
        
        .harry-potter {
            border: none;
            position: relative;
            border-radius: 25px;
            box-shadow: 0 4px 20px rgba(217, 119, 6, 0.1);
        }
        
        .harry-potter::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(135deg, #d4a574, #d97706, #d4a574);
            border-radius: 27px;
            z-index: -1;
        }
                
                /* Movie poster */
                .movie-poster {
                    position: relative;
                    height: 200px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    overflow: hidden;
                }
                
                        /* Unique background for each movie poster - background coordinated with border */
        .mission-impossible .movie-poster { 
            background: rgba(220, 38, 38, 0.05); 
        }
        .fast-furious .movie-poster { 
            background: rgba(245, 158, 11, 0.05); 
        }
        .bourne-identity .movie-poster { 
            background: rgba(79, 70, 229, 0.05); 
        }
        .jurassic-park .movie-poster { 
            background: rgba(22, 163, 74, 0.05); 
        }
        .green-book .movie-poster { 
            background: rgba(124, 58, 237, 0.05); 
        }
        .harry-potter .movie-poster { 
            background: rgba(217, 119, 6, 0.05); 
        }
                
                .poster-image {
                    font-size: 4rem;
                    z-index: 2;
                    position: relative;
                }
                
                .movie-overlay {
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                    opacity: 0;
                    transition: all 0.4s ease;
                    z-index: 3;
                }
                
                        /* Unique color for each movie overlay - more coordinated transparency */
        .mission-impossible .movie-overlay { 
            background: linear-gradient(135deg, rgba(220, 38, 38, 0.85), rgba(185, 28, 28, 0.85)); 
        }
        .fast-furious .movie-overlay { 
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.85), rgba(217, 119, 6, 0.85)); 
        }
        .bourne-identity .movie-overlay { 
            background: linear-gradient(135deg, rgba(79, 70, 229, 0.85), rgba(67, 56, 202, 0.85)); 
        }
        .jurassic-park .movie-overlay { 
            background: linear-gradient(135deg, rgba(22, 163, 74, 0.85), rgba(21, 128, 61, 0.85)); 
        }
        .green-book .movie-overlay { 
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.85), rgba(109, 40, 217, 0.85)); 
        }
        .harry-potter .movie-overlay { 
            background: linear-gradient(135deg, rgba(217, 119, 6, 0.85), rgba(180, 83, 9, 0.85)); 
        }
                
                .movie-card:hover .movie-overlay {
                    opacity: 1;
                }
                
                .movie-overlay .movie-title {
                    color: white;
                    font-size: 1.2rem;
                    font-weight: 600;
                    margin-bottom: 8px;
                    text-align: center;
                }
                
                .movie-overlay .movie-genre {
                    color: rgba(255, 255, 255, 0.9);
                    font-size: 0.9rem;
                    margin-bottom: 10px;
                }
                
                .movie-overlay .movie-rating {
                    font-size: 1rem;
                }
                
                .movie-glow {
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    width: 100px;
                    height: 100px;
                    background: radial-gradient(circle, rgba(139, 92, 246, 0.3), transparent);
                    border-radius: 50%;
                    opacity: 0;
                    transition: all 0.4s ease;
                }
                
                .movie-card:hover .movie-glow {
                    opacity: 1;
                    animation: movieGlow 2s ease-in-out infinite;
                }
                
                @keyframes movieGlow {
                    0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.3; }
                    50% { transform: translate(-50%, -50%) scale(1.2); opacity: 0.6; }
                }
                
                /* Movie information */
                .movie-info {
                    padding: 25px;
                }
                
                .movie-info .movie-name {
                    color: #1e293b;
                    font-size: 1.3rem;
                    font-weight: 600;
                    margin-bottom: 12px;
                }
                
                .movie-info .movie-description {
                    color: #475569;
                    font-size: 0.95rem;
                    line-height: 1.6;
                    margin-bottom: 20px;
                }
                
                .movie-info .movie-tags {
                    display: flex;
                    flex-wrap: wrap;
                    gap: 8px;
                }
                
                .movie-info .tag {
                    padding: 6px 12px;
                    border-radius: 20px;
                    font-size: 0.8rem;
                    font-weight: 500;
                    transition: all 0.3s ease;
                }
                
                        /* Unique color for each movie tag - design coordinated with border */
        .mission-impossible .tag {
            background: rgba(220, 38, 38, 0.1);
            color: #dc2626;
            border: 1px solid rgba(220, 38, 38, 0.3);
        }
        
        .fast-furious .tag {
            background: rgba(245, 158, 11, 0.1);
            color: #d97706;
            border: 1px solid rgba(245, 158, 11, 0.3);
        }
        
        .bourne-identity .tag {
            background: rgba(79, 70, 229, 0.1);
            color: #4f46e5;
            border: 1px solid rgba(79, 70, 229, 0.3);
        }
        
        .jurassic-park .tag {
            background: rgba(22, 163, 74, 0.1);
            color: #16a34a;
            border: 1px solid rgba(22, 163, 74, 0.3);
        }
        
        .green-book .tag {
            background: rgba(124, 58, 237, 0.1);
            color: #7c3aed;
            border: 1px solid rgba(124, 58, 237, 0.3);
        }
        
        .harry-potter .tag {
            background: rgba(217, 119, 6, 0.1);
            color: #d97706;
            border: 1px solid rgba(217, 119, 6, 0.3);
        }
                
                .movie-info .tag:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                }
                
                /* Movie timeline */
                
                .timeline-content .movie-year {
                    font-size: 0.9rem;
                    color: #8b5cf6;
                    font-weight: 600;
                    margin-bottom: 5px;
                }
                
                .timeline-content .movie-title {
                    font-size: 0.8rem;
                    color: #cbd5e1;
                    margin-bottom: 8px;
                    white-space: nowrap;
                }
                
                .timeline-content .movie-icon {
                    font-size: 1.5rem;
                }
                
                /* Movie emotion analysis */
                .cinema-emotions {
                    position: relative;
                    z-index: 10;
                }
                
                .emotions-title {
                    text-align: center;
                    margin-bottom: 30px;
                    color: #f8fafc;
                }
                
                .emotions-title .title-icon {
                    font-size: 1.8rem;
                    margin-right: 15px;
                }
                
                .emotions-title .title-text {
                    font-size: 1.4rem;
                    font-weight: 600;
                    color: #dc2626;
                    max-width: 300px;
                    word-wrap: break-word;
                    overflow-wrap: break-word;
                    text-align: center;
                    margin: 0 auto;
                    text-shadow: 0 2px 4px rgba(220, 38, 38, 0.2);
                }
                
                .emotions-title .title-accent {
                    width: 50px;
                    height: 3px;
                    background: linear-gradient(90deg, #8b5cf6, #a855f7);
                    margin: 15px auto 0;
                    border-radius: 2px;
                }
                
                .emotions-grid {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                    gap: 20px;
                }
                
                .emotion-card {
                    background: rgba(255, 255, 255, 0.05);
                    backdrop-filter: blur(15px);
                    border: 1px solid rgba(139, 92, 246, 0.3);
                    border-radius: 16px;
                    padding: 25px;
                    text-align: center;
                    transition: all 0.4s ease;
                }
                
                .emotion-card:hover {
                    transform: translateY(-5px);
                    border-color: rgba(139, 92, 246, 0.6);
                    box-shadow: 0 15px 30px rgba(139, 92, 246, 0.3);
                }
                
                .emotion-card .emotion-icon {
                    font-size: 2.5rem;
                    margin-bottom: 15px;
                    display: block;
                }
                
                .emotion-card .emotion-name {
                    color: #f1f5f9;
                    font-size: 1.1rem;
                    font-weight: 600;
                    margin-bottom: 10px;
                }
                
                .emotion-card .emotion-level {
                    color: #8b5cf6;
                    font-size: 1.8rem;
                    font-weight: 700;
                    margin-bottom: 15px;
                }
                
                .emotion-bar {
                    width: 100%;
                    height: 8px;
                    background: rgba(139, 92, 246, 0.2);
                    border-radius: 4px;
                    overflow: hidden;
                }
                
                .bar-fill {
                    height: 100%;
                    background: linear-gradient(90deg, #8b5cf6, #a855f7);
                    border-radius: 4px;
                    transition: width 1.5s ease;
                    position: relative;
                }
                
                .bar-fill::after {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
                    animation: barShine 2s ease-in-out infinite;
                }
                
                @keyframes barShine {
                    0% { transform: translateX(-100%); }
                    100% { transform: translateX(100%); }
                }
            `;
            document.head.appendChild(style);
        }
        
        // Timeline interaction effects
        function initTimelineEffects() {
            console.log('üéØ Initializing Timeline effects');
            
            const timelineItems = document.querySelectorAll('.timeline-item');
            const timelineProgress = document.querySelector('.timeline-progress');
            
            // Scroll animation
            const observerOptions = {
                threshold: 0.3,
                rootMargin: '0px 0px -100px 0px'
            };
            
            const timelineObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.animationPlayState = 'running';
                        
                        // Add hover effect
                        entry.target.addEventListener('mouseenter', function() {
                            this.style.transform = 'scale(1.02)';
                            this.style.transition = 'transform 0.3s ease';
                        });
                        
                        entry.target.addEventListener('mouseleave', function() {
                            this.style.transform = 'scale(1)';
                        });
                    }
                });
            }, observerOptions);
            
            timelineItems.forEach(item => {
                timelineObserver.observe(item);
                
                // Click to expand details
                item.addEventListener('click', function() {
                    const content = this.querySelector('.timeline-content');
                    const isExpanded = content.classList.contains('expanded');
                    
                    // Remove other expanded items
                    timelineItems.forEach(otherItem => {
                        if (otherItem !== this) {
                            otherItem.querySelector('.timeline-content').classList.remove('expanded');
                        }
                    });
                    
                    // Toggle current item
                    if (isExpanded) {
                        content.classList.remove('expanded');
                    } else {
                        content.classList.add('expanded');
                    }
                });
            });
            
            // Progress bar animation
            if (timelineProgress) {
                const updateProgress = () => {
                    const scrollTop = window.pageYOffset;
                    const timelineContainer = document.querySelector('.travel-timeline-container');
                    const containerTop = timelineContainer.offsetTop;
                    const containerHeight = timelineContainer.offsetHeight;
                    const windowHeight = window.innerHeight;
                    
                    if (scrollTop + windowHeight > containerTop && scrollTop < containerTop + containerHeight) {
                        const progress = Math.min(100, Math.max(0, 
                            ((scrollTop + windowHeight - containerTop) / (containerHeight + windowHeight)) * 100
                        ));
                        timelineProgress.style.height = progress + '%';
                    }
                };
                
                window.addEventListener('scroll', updateProgress);
                updateProgress(); // Initial call
            }
            
            // Add particle effects
            addTimelineParticles();
        }
        
        // Add particle effects - optimized version
        function addTimelineParticles() {
            const timelineContainer = document.querySelector('.travel-timeline-container');
            if (!timelineContainer) return;
            
            // Create particle container
            const particlesContainer = document.createElement('div');
            particlesContainer.className = 'timeline-particles';
            particlesContainer.style.cssText = `
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                pointer-events: none;
                z-index: 0;
                overflow: hidden;
            `;
            
            timelineContainer.appendChild(particlesContainer);
            
            // Create optimized number of particles
            for (let i = 0; i < 8; i++) {
                createParticle(particlesContainer, i);
            }
        }
        
        function createParticle(container, index) {
            const particle = document.createElement('div');
            particle.className = 'timeline-particle';
            
            const size = Math.random() * 3 + 1.5; // Reduce particle size
            const x = Math.random() * 100;
            const y = Math.random() * 100;
            const duration = 15 + index * 2; // Duration based on index
            const delay = index * 0.5; // Delay based on index
            
            particle.style.cssText = `
                position: absolute;
                width: ${size}px;
                height: ${size}px;
                background: linear-gradient(135deg, #667eea, #764ba2);
                border-radius: 50%;
                left: ${x}%;
                top: ${y}%;
                opacity: 0.4;
                animation: float ${duration}s infinite ease-in-out ${delay}s;
                z-index: 0;
                filter: blur(0.5px);
            `;
            
            container.appendChild(particle);
        }
        
        // Test Bending Gallery function
        function testBendingGallery(genre) {
            console.log(`üß™ Testing ${genre} Bending Gallery`);
            const gallery = document.getElementById(`${genre}BendingGallery`);
            if (gallery) {
                console.log(`‚úÖ Found ${genre} gallery:`, gallery);
                console.log(`Gallery content:`, gallery.innerHTML);
                console.log(`Gallery child elements count:`, gallery.children.length);
                
                // Force display all cards
                const cards = gallery.querySelectorAll('.bending-gallery-card');
                cards.forEach((card, index) => {
                    card.style.opacity = '1';
                    card.style.visibility = 'visible';
                    card.style.transform = 'translate3d(0, 0, 0) scale(1) rotateY(0deg) rotateX(0deg)';
                    console.log(`üîß Force displaying card ${index}: ${card.dataset.band}`);
                });
            } else {
                console.error(`‚ùå ${genre} gallery not found`);
            }
        }
        
        // Function to force display all galleries
        function forceShowAllGalleries() {
            console.log('üîß Force displaying all galleries');
            ['rock', 'pop', 'metal'].forEach(genre => {
                const gallery = document.getElementById(`${genre}BendingGallery`);
                if (gallery) {
                    const cards = gallery.querySelectorAll('.bending-gallery-card');
                    cards.forEach((card, index) => {
                        card.style.opacity = '1';
                        card.style.visibility = 'visible';
                        card.style.transform = 'translate3d(0, 0, 0) scale(1) rotateY(0deg) rotateX(0deg)';
                    });
                    console.log(`‚úÖ ${genre} gallery force display completed`);
                }
            });
        }
        
        // Check image file status
        function checkImageFiles() {
            console.log('üîç Checking image file status...');
            const imageFiles = [
                'images/image/The Dark Side Of The Moon.png',
                'images/image/AppetiteforDestruction.jpg',
                'images/image/Acoustica Scorpions.jpg',
                'images/image/NirvanaNevermind.jpg',
                'images/image/machine head deep purple.jpg',
                'images/image/Rock_and_Roll.jpg',
                'images/image/Âë®‰º†ÈõÑ.jpg',
                'images/image/Êûó‰øäÊù∞.jpeg',
                'images/image/eagles.png',
                'images/image/dookie green day.jpeg',
                'images/image/Master of Puppets.jpg',
                'images/image/Bon-Jovi-Livin.webp',
                'images/image/The Joshua Tree.jpg',
                'images/image/Slipknot_Iowa.jpg'
            ];
            
            imageFiles.forEach(imagePath => {
                const testImg = new Image();
                testImg.onload = () => {
                    console.log(`‚úÖ File exists: ${imagePath}`);
                };
                testImg.onerror = () => {
                    console.error(`‚ùå File does not exist: ${imagePath}`);
                };
                testImg.src = imagePath;
            });
        }
        

        
        // Reload all galleries
        function reloadAllGalleries() {
            console.log('üîÑ Reloading all galleries...');
            
            // Clear existing galleries
            ['rock', 'pop', 'metal'].forEach(genre => {
                const gallery = document.getElementById(`${genre}BendingGallery`);
                if (gallery) {
                    gallery.innerHTML = '';
                    console.log(`üßπ Clearing ${genre} gallery`);
                }
            });
            
            // Re-initialize
            setTimeout(() => {
                console.log('üé® Re-initializing galleries...');
                initBendingGalleries();
            }, 100);
        }
        
        // Test Eagles image loading
        function testEaglesImage() {
            console.log('ü¶Ö Testing Eagles image loading...');
            const testImg = new Image();
            testImg.onload = () => {
                console.log(`‚úÖ Eagles image loaded successfully: ${testImg.src}`);
                console.log(`  üìè Image size: ${testImg.naturalWidth} x ${testImg.naturalHeight}`);
            };
            testImg.onerror = () => {
                console.error(`‚ùå Eagles image failed to load`);
            };
            testImg.src = 'images/image/eagles.png';
        }
        
        // Initialize Timeline effects after page load completes
        window.addEventListener('load', function() {
            console.log('üöÄ Page loaded, starting initialization...');
            setTimeout(initTimelineEffects, 1000);
            initCometCards(); // Initialize Comet Cards
            initMicroAnimations(); // Initialize micro animations
            
            // Delay Bending Gallery initialization to ensure DOM is fully loaded
            setTimeout(() => {
                console.log('üé® Starting to initialize Bending Galleries...');
                initBendingGalleries();
            }, 500);
            
            
        });
        
        // Initialize micro animation system
        function initMicroAnimations() {
            console.log('‚ú® Initializing micro animation system');
            
            // Add micro animations to all cards
            const cards = document.querySelectorAll('.card');
            cards.forEach((card, index) => {
                // Add scroll-triggered animation
                card.style.opacity = '0';
                card.style.transform = 'translateY(30px)';
                card.style.transition = 'all 0.6s ease';
                
                // Delay display animation
                setTimeout(() => {
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, 200 + index * 100);
                
                // Add hover micro animation
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-8px) scale(1.02)';
                    this.style.boxShadow = '0 12px 40px rgba(0, 0, 0, 0.15)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                    this.style.boxShadow = '0 4px 20px rgba(0, 0, 0, 0.08)';
                });
            });
            
            // Add breathing animation to icons
            const icons = document.querySelectorAll('.stat-icon, .summary-icon');
            icons.forEach((icon, index) => {
                icon.style.animation = `breath 3s ease-in-out infinite ${index * 0.2}s`;
            });
            
            // Add counting animation to numbers
            const numbers = document.querySelectorAll('.stat-number, .summary-number');
            numbers.forEach((number, index) => {
                animateNumber(number, index * 200);
            });
            
            // Add pulse effect to buttons
            const buttons = document.querySelectorAll('button');
            buttons.forEach(button => {
                button.addEventListener('mouseenter', function() {
                    this.style.animation = 'pulse 0.6s ease-in-out';
                });
                
                button.addEventListener('animationend', function() {
                    this.style.animation = '';
                });
            });
        }
        
        // Number counting animation
        function animateNumber(element, delay) {
            const finalNumber = parseInt(element.textContent.replace(/\D/g, ''));
            const duration = 2000;
            const steps = 60;
            const stepValue = finalNumber / steps;
            let currentStep = 0;
            
            setTimeout(() => {
                const timer = setInterval(() => {
                    currentStep++;
                    const currentValue = Math.floor(stepValue * currentStep);
                    element.textContent = element.textContent.replace(/\d+/, currentValue);
                    
                    if (currentStep >= steps) {
                        element.textContent = element.textContent.replace(/\d+/, finalNumber);
                        clearInterval(timer);
                    }
                }, duration / steps);
            }, delay);
        }
        
        // Comet Card 3D tilt effect
        function initCometCards() {
            console.log('üöÄ Initializing Comet Cards 3D effects');
            
            const cometCards = document.querySelectorAll('.comet-card[data-tilt]');
            
            cometCards.forEach(card => {
                card.addEventListener('mousemove', handleCometCardTilt);
                card.addEventListener('mouseleave', resetCometCardTilt);
            });
        }
        
        // Bending Gallery initialization - deep fix version
        function initBendingGalleries() {
            console.log('üé® Initializing Bending Galleries');
            console.log('üîç Checking DOM elements...');
            
            // Check if necessary DOM elements exist
            const rockGallery = document.getElementById('rockBendingGallery');
            const popGallery = document.getElementById('popBendingGallery');
            const metalGallery = document.getElementById('metalBendingGallery');
            
            console.log('Rock Gallery:', rockGallery);
            console.log('Pop Gallery:', popGallery);
            console.log('Metal Gallery:', metalGallery);
            
            if (!rockGallery || !popGallery || !metalGallery) {
                console.error('‚ùå Some Bending Gallery elements not found!');
                return;
            }
            
            // Group band data by type - try multiple paths
            const bandData = {
                rock: [
                    {
                        id: 'scorpions',
                        name: 'Scorpions',
                        genre: 'Heavy Metal',
                        album: 'Still Loving You',
                        image: './images/image/Acoustica Scorpions.jpg',
                        fallbackImages: [
                            'images/image/Acoustica Scorpions.jpg',
                            '/images/image/Acoustica Scorpions.jpg',
                            '../images/image/Acoustica Scorpions.jpg'
                        ],
                        description: 'German heavy metal pioneers with powerful ballad "Still Loving You"',
                        tags: ['Heavy Metal', 'German', 'Ballad']
                    },
                    {
                        id: 'guns-n-roses',
                        name: 'Guns N\' Roses',
                        genre: 'Hard Rock',
                        album: 'Appetite for Destruction',
                        image: './images/image/AppetiteforDestruction.jpg',
                        fallbackImages: [
                            'images/image/AppetiteforDestruction.jpg',
                            '/images/image/AppetiteforDestruction.jpg',
                            '../images/image/AppetiteforDestruction.jpg'
                        ],
                        description: 'Iconic hard rock band known for "Appetite for Destruction"',
                        tags: ['Hard Rock', 'Classic']
                    },
                    {
                        id: 'scorpions',
                        name: 'Scorpions',
                        genre: 'Heavy Metal',
                        album: 'Acoustica',
                        image: './images/image/Acoustica Scorpions.jpg',
                        fallbackImages: [
                            'images/image/Acoustica Scorpions.jpg',
                            '/images/image/Acoustica Scorpions.jpg',
                            '../images/image/Acoustica Scorpions.jpg'
                        ],
                        description: 'German heavy metal pioneers with powerful riffs and melodies',
                        tags: ['Heavy Metal', 'German']
                    },
                    {
                        id: 'nirvana',
                        name: 'Nirvana',
                        genre: 'Grunge Rock',
                        album: 'Nevermind',
                        image: './images/image/NirvanaNevermind.jpg',
                        fallbackImages: [
                            'images/image/NirvanaNevermind.jpg',
                            '/images/image/NirvanaNevermind.jpg',
                            '../images/image/NirvanaNevermind.jpg'
                        ],
                        description: 'Grunge pioneers who revolutionized rock music with "Nevermind"',
                        tags: ['Grunge', 'Alternative']
                    },
                    {
                        id: 'deep-purple',
                        name: 'Deep Purple',
                        genre: 'Hard Rock',
                        album: 'Machine Head',
                        image: './images/image/machine head deep purple.jpg',
                        fallbackImages: [
                            'images/image/machine head deep purple.jpg',
                            '/images/image/machine head deep purple.jpg',
                            '../images/image/machine head deep purple.jpg'
                        ],
                        description: 'Classic hard rock legends with iconic "Machine Head" album',
                        tags: ['Hard Rock', 'Classic']
                    }
                ],
                pop: [
                    {
                        id: 'beyond',
                        name: 'Beyond',
                        genre: 'Cantopop Rock',
                        album: 'Rock and Roll',
                        image: './images/image/Rock_and_Roll.jpg',
                        fallbackImages: [
                            'images/image/Rock_and_Roll.jpg',
                            '/images/image/Rock_and_Roll.jpg',
                            '../images/image/Rock_and_Roll.jpg'
                        ],
                        description: 'Legendary Hong Kong rock band with timeless classics',
                        tags: ['Cantopop', 'Rock']
                    },
                    {
                        id: 'jay-zhou',
                        name: 'Jay Zhou',
                        genre: 'Mandopop',
                        album: 'Zhou Chuanxiong Album',
                        image: './images/image/Âë®‰º†ÈõÑ.jpg',
                        fallbackImages: [
                            'images/image/Âë®‰º†ÈõÑ.jpg',
                            '/images/image/Âë®‰º†ÈõÑ.jpg',
                            '../images/image/Âë®‰º†ÈõÑ.jpg'
                        ],
                        description: 'Taiwanese pop icon revolutionizing Chinese music industry',
                        tags: ['Mandopop', 'Innovative']
                    },
                    {
                        id: 'jj-lin',
                        name: 'JJ Lin',
                        genre: 'Mandopop',
                        album: 'JJ Lin Album',
                        image: './images/image/Êûó‰øäÊù∞.jpeg',
                        fallbackImages: [
                            'images/image/Êûó‰øäÊù∞.jpeg',
                            '/images/image/Êûó‰øäÊù∞.jpeg',
                            '../images/image/Êûó‰øäÊù∞.jpeg'
                        ],
                        description: 'Singaporean singer-songwriter with emotional ballads',
                        tags: ['Mandopop', 'Ballads']
                    },
                    {
                        id: 'eagles',
                        name: 'Eagles',
                        genre: 'Country Rock',
                        album: 'Hotel California',
                        image: './images/image/eagles.png',
                        fallbackImages: [
                            'images/image/eagles.png',
                            '/images/image/eagles.png',
                            '../images/image/eagles.png'
                        ],
                        description: 'American rock legends with timeless "Hotel California" masterpiece',
                        tags: ['Country Rock', 'Classic']
                    },
                    {
                        id: 'green-day',
                        name: 'Green Day',
                        genre: 'Punk Rock',
                        album: 'Dookie',
                        image: './images/image/dookie green day.jpeg',
                        fallbackImages: [
                            'images/image/dookie green day.jpeg',
                            '/images/image/dookie green day.jpeg',
                            '../images/image/dookie green day.jpeg'
                        ],
                        description: 'Punk rock pioneers with revolutionary "Dookie" album',
                        tags: ['Punk Rock', 'Alternative']
                    }
                ],
                metal: [
                    {
                        id: 'metallica',
                        name: 'Metallica',
                        genre: 'Thrash Metal',
                        album: 'Master of Puppets',
                        image: './images/image/Master of Puppets.jpg',
                        fallbackImages: [
                            'images/image/Master of Puppets.jpg',
                            '/images/image/Master of Puppets.jpg',
                            '../images/image/Master of Puppets.jpg'
                        ],
                        description: 'Thrash metal legends with "Master of Puppets" masterpiece',
                        tags: ['Thrash', 'Metal']
                    },
                    {
                        id: 'bon-jovi',
                        name: 'Bon Jovi',
                        genre: 'Hard Rock',
                        album: 'Livin\' on a Prayer',
                        image: './images/image/Bon-Jovi-Livin.webp',
                        fallbackImages: [
                            'images/image/Bon-Jovi-Livin.webp',
                            '/images/image/Bon-Jovi-Livin.webp',
                            '../images/image/Bon-Jovi-Livin.webp'
                        ],
                        description: 'American rock band with anthems like "Livin\' on a Prayer"',
                        tags: ['Hard Rock', 'Anthems']
                    },
                    {
                        id: 'u2',
                        name: 'U2',
                        genre: 'Alternative Rock',
                        album: 'The Joshua Tree',
                        image: './images/image/The Joshua Tree.jpg',
                        fallbackImages: [
                            'images/image/The Joshua Tree.jpg',
                            '/images/image/The Joshua Tree.jpg',
                            '../images/image/The Joshua Tree.jpg'
                        ],
                        description: 'Irish rock band with "The Joshua Tree" landmark album',
                        tags: ['Alternative', 'Rock']
                    },
                    {
                        id: 'slipknot',
                        name: 'Slipknot',
                        genre: 'Nu Metal',
                        album: 'Iowa',
                        image: './images/image/Slipknot_Iowa.jpg',
                        fallbackImages: [
                            'images/image/Slipknot_Iowa.jpg',
                            '/images/image/Slipknot_Iowa.jpg',
                            '../images/image/Slipknot_Iowa.jpg'
                        ],
                        description: 'Nu metal pioneers with intense and powerful "Iowa" album',
                        tags: ['Nu Metal', 'Heavy']
                    }
                ]
            };
            
            // Initialize Bending Gallery for each type
            Object.keys(bandData).forEach(genre => {
                console.log(`üéµ Initializing ${genre} type, containing ${bandData[genre].length} bands`);
                bandData[genre].forEach(band => {
                    console.log(`  - ${band.name}: ${band.album}`);
                    // Deep test image paths
                    testImagePathWithFallbacks(band);
                });
                initGenreBendingGallery(genre, bandData[genre]);
            });
        }
        
        // Smart image path testing function - automatically try fallback paths
        function testImagePathWithFallbacks(band) {
            console.log(`üîç Testing image path: ${band.name} - ${band.image}`);
            
            // First try main path
            testImagePath(band.image, band.name, () => {
                // Main path succeeded, no need to try fallback paths
                console.log(`‚úÖ Main path succeeded: ${band.name}`);
            }, () => {
                // Main path failed, try fallback paths
                console.log(`üîÑ Main path failed, trying fallback paths: ${band.name}`);
                tryFallbackPaths(band);
            });
        }
        
        // Try fallback paths
        function tryFallbackPaths(band) {
            if (!band.fallbackImages || band.fallbackImages.length === 0) {
                console.error(`‚ùå No fallback paths: ${band.name}`);
                return;
            }
            
            let currentIndex = 0;
            
            function tryNextPath() {
                if (currentIndex >= band.fallbackImages.length) {
                    console.error(`‚ùå All paths failed: ${band.name}`);
                    return;
                }
                
                const fallbackPath = band.fallbackImages[currentIndex];
                console.log(`üîÑ Trying fallback path ${currentIndex + 1}: ${fallbackPath}`);
                
                testImagePath(fallbackPath, band.name, () => {
                    // Fallback path succeeded, update main path
                    console.log(`‚úÖ Fallback path succeeded: ${band.name} - ${fallbackPath}`);
                    band.image = fallbackPath;
                }, () => {
                    // Fallback path failed, try next
                    currentIndex++;
                    tryNextPath();
                });
            }
            
            tryNextPath();
        }
        
        // Test single image path
        function testImagePath(imagePath, bandName, onSuccess, onError) {
            const testImg = new Image();
            testImg.onload = () => {
                console.log(`‚úÖ Image loaded successfully: ${bandName} - ${imagePath}`);
                console.log(`  üìè Image size: ${testImg.naturalWidth} x ${testImg.naturalHeight}`);
                if (onSuccess) onSuccess();
            };
            testImg.onerror = () => {
                console.error(`‚ùå Image failed to load: ${bandName} - ${imagePath}`);
                if (onError) onError();
            };
            testImg.src = imagePath;
        }
        
        // Global image error handling function
        function handleImageError(imgElement, bandName) {
            console.error(`‚ùå Global image error: ${bandName}`);
            imgElement.style.display = 'none';
            
            // Find corresponding fallback element
            const card = imgElement.closest('.bending-gallery-card');
            if (card) {
                const fallback = card.querySelector('.card-fallback');
                if (fallback) {
                    fallback.style.display = 'flex';
                }
            }
        }
        
        // Initialize Bending Gallery for specific type
        function initGenreBendingGallery(genre, bands) {
            console.log(`üé® Initializing ${genre} Bending Gallery, band count: ${bands.length}`);
            
            const gallery = document.getElementById(`${genre}BendingGallery`);
            if (!gallery) {
                console.error(`‚ùå ${genre} Bending Gallery element not found`);
                return;
            }
            
            // Ensure gallery container is visible
            const container = gallery.closest('.bending-gallery-container');
            if (container) {
                container.style.display = 'block';
                container.style.visibility = 'visible';
                container.style.opacity = '1';
                console.log(`‚úÖ ${genre} gallery container is visible`);
            }
            
            const prevBtn = gallery.parentElement.querySelector('.prev-btn');
            const nextBtn = gallery.parentElement.querySelector('.next-btn');
            
            if (!prevBtn || !nextBtn) {
                console.error(`‚ùå ${genre} Bending Gallery control buttons not found`);
                return;
            }
            
            let currentIndex = 0;
            const totalBands = bands.length;
            const bendAmount = 3; // Bend amount
            
            // Dynamically adjust bend radius based on screen size
            function getAdaptiveRadius() {
                const screenWidth = window.innerWidth;
                if (screenWidth <= 480) {
                    return 250; // Mobile
                } else if (screenWidth <= 768) {
                    return 300; // Tablet
                } else {
                    return 400; // Desktop
                }
            }
            
            let radius = getAdaptiveRadius();
            
            // Listen to window resize, dynamically adjust radius
            window.addEventListener('resize', () => {
                radius = getAdaptiveRadius();
                updateCardPositions();
            });
            
            // Render Bending Gallery
            function renderBendingGallery() {
                console.log(`üé® Rendering ${genre} Bending Gallery, band count: ${bands.length}`);
                gallery.innerHTML = '';
                
                bands.forEach((band, index) => {
                    console.log(`  üì± Creating card ${index + 1}: ${band.name}`);
                    const card = createBendingCard(band, index);
                    gallery.appendChild(card);
                    console.log(`  ‚úÖ Card added to gallery: ${band.name}`);
                });
                
                console.log(`üéØ Starting to update card positions...`);
                updateCardPositions();
                console.log(`‚úÖ ${genre} Bending Gallery rendering completed`);
            }
            
            // Create bending card - deep fix version
            function createBendingCard(band, index) {
                const card = document.createElement('div');
                card.className = 'bending-gallery-card';
                card.dataset.band = band.id;
                card.dataset.index = index;
                
                // Verify image path
                console.log(`üñºÔ∏è Creating card: ${band.name}, image path: ${band.image}`);
                
                card.innerHTML = `
                    <div class="card-image">
                        <img src="${band.image}" alt="${band.name} - ${band.album}" class="card-avatar" 
                             onload="console.log('‚úÖ Image loaded successfully: ${band.name}')" 
                             onerror="handleImageError(this, '${band.name}')">
                        <div class="card-overlay">
                            <span class="card-name">${band.name}</span>
                            <span class="card-genre">${band.genre}</span>
                            <span class="card-album">${band.album}</span>
                        </div>
                        <!-- Fallback display when image fails to load -->
                        <div class="card-fallback" style="display: none; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, #667eea, #764ba2); display: flex; align-items: center; justify-content: center; color: white; font-size: 48px; font-weight: bold; border-radius: 20px;">
                            ${band.name.charAt(0)}
                        </div>
                    </div>
                    <div class="card-info">
                        <h5 class="card-title">${band.name}</h5>
                        <p class="card-description">${band.description}</p>
                        <div class="card-tags">
                            ${band.tags.map(tag => `<span class="card-tag">${tag}</span>`).join('')}
                        </div>
                    </div>
                `;
                
                // Smart image loading handling
                const img = card.querySelector('.card-avatar');
                const fallback = card.querySelector('.card-fallback');
                
                // Image loaded successfully
                img.addEventListener('load', function() {
                    console.log(`‚úÖ Card image loaded successfully: ${band.name}`);
                    this.style.display = 'block';
                    if (fallback) fallback.style.display = 'none';
                });
                
                // Image failed to load - smart retry
                img.addEventListener('error', function() {
                    console.error(`‚ùå Card image failed to load: ${band.name} - ${band.image}`);
                    handleImageErrorInCard(this, fallback, band);
                });
                
                // Add hover effect
                let isHovered = false;
                
                card.addEventListener('mouseenter', () => {
                    isHovered = true;
                    // Save current transform state, add hover effect
                    const currentTransform = card.style.transform;
                    card.style.transform = currentTransform + ' scale(1.05) translateZ(30px)';
                    card.style.zIndex = 2000; // Highest layer when hovering
                });
                
                card.addEventListener('mouseleave', () => {
                    isHovered = false;
                    // Delay position update to avoid conflict with hover animation
                    setTimeout(() => {
                        if (!isHovered) {
                            updateCardPositions();
                        }
                    }, 100);
                });
                
                return card;
            }
            
            // Handle image errors in cards
            function handleImageErrorInCard(imgElement, fallbackElement, band) {
                // Hide failed image
                imgElement.style.display = 'none';
                
                // Display fallback content
                if (fallbackElement) {
                    fallbackElement.style.display = 'flex';
                    console.log(`üîÑ Displaying fallback content: ${band.name}`);
                }
                
                // Try fallback paths
                if (band.fallbackImages && band.fallbackImages.length > 0) {
                    console.log(`üîÑ Trying fallback image paths: ${band.name}`);
                    tryAlternativeImagePath(imgElement, fallbackElement, band);
                }
            }
            
            // Try fallback image paths
            function tryAlternativeImagePath(imgElement, fallbackElement, band) {
                let currentIndex = 0;
                
                function tryNextPath() {
                    if (currentIndex >= band.fallbackImages.length) {
                        console.log(`‚ùå All fallback paths failed: ${band.name}`);
                        return;
                    }
                    
                    const fallbackPath = band.fallbackImages[currentIndex];
                    console.log(`üîÑ Trying fallback path ${currentIndex + 1}: ${fallbackPath}`);
                    
                    const testImg = new Image();
                    testImg.onload = () => {
                        console.log(`‚úÖ Fallback path succeeded: ${band.name} - ${fallbackPath}`);
                        imgElement.src = fallbackPath;
                        imgElement.style.display = 'block';
                        if (fallbackElement) fallbackElement.style.display = 'none';
                    };
                    testImg.onerror = () => {
                        currentIndex++;
                        tryNextPath();
                    };
                    testImg.src = fallbackPath;
                }
                
                tryNextPath();
            }
            
            // Update card positions - implement 3D bending effect
            function updateCardPositions() {
                const cards = gallery.querySelectorAll('.bending-gallery-card');
                console.log(`üéØ Updating ${genre} card positions, found ${cards.length} cards`);
                
                cards.forEach((card, index) => {
                    const relativeIndex = index - currentIndex;
                    const angle = (relativeIndex * 40) * (Math.PI / 180); // 40 degree interval
                    
                    // Calculate 3D position, limit within container range
                    const maxRadius = Math.min(radius, 300); // Reduce radius to ensure cards are within container
                    const x = Math.sin(angle) * maxRadius;
                    const z = Math.cos(angle) * maxRadius;
                    const rotateY = relativeIndex * -15; // Reduce rotation angle
                    const rotateX = relativeIndex * 3; // Reduce X-axis rotation
                    
                    // Calculate scale and opacity, ensure minimum visibility
                    const distance = Math.abs(relativeIndex);
                    const scale = Math.max(0.6, 1 - distance * 0.1); // Increase minimum scale
                    const opacity = Math.max(0.6, 1 - distance * 0.2); // Increase minimum opacity
                    
                    console.log(`  üìç Card ${index}: ${card.dataset.band}, position: x=${x.toFixed(1)}, z=${z.toFixed(1)}, scale=${scale.toFixed(2)}, opacity=${opacity.toFixed(2)}`);
                    
                    // Use requestAnimationFrame to ensure smooth transition
                    requestAnimationFrame(() => {
                        // Apply 3D transform, use unified transform order
                        card.style.transform = `
                            translate3d(${x}px, 0, ${z}px)
                            rotateY(${rotateY}deg)
                            rotateX(${rotateX}deg)
                            scale(${scale})
                        `;
                        card.style.opacity = opacity;
                        
                        // Optimize Z-index layers to avoid flickering
                        if (distance === 0) {
                            card.style.zIndex = 1000; // Center card highest layer
                        } else {
                            card.style.zIndex = 100 - distance; // Other cards decreasing layers
                        }
                        
                        // Ensure cards are fully visible
                        card.style.visibility = 'visible';
                    });
                });
                console.log(`‚úÖ ${genre} card positions updated`);
            }
            
            // Navigation functions
            let isTransitioning = false;
            
            function nextBand() {
                if (isTransitioning) return;
                isTransitioning = true;
                
                currentIndex = (currentIndex + 1) % totalBands;
                updateCardPositions();
                
                // Debounce: wait for animation to complete before allowing next operation
                setTimeout(() => {
                    isTransitioning = false;
                }, 800);
            }
            
            function prevBand() {
                if (isTransitioning) return;
                isTransitioning = true;
                
                currentIndex = (currentIndex - 1 + totalBands) % totalBands;
                updateCardPositions();
                
                // Debounce: wait for animation to complete before allowing next operation
                setTimeout(() => {
                    isTransitioning = false;
                }, 800);
            }
            
            // Bind events
            nextBtn.addEventListener('click', nextBand);
            prevBtn.addEventListener('click', prevBand);
            
            // Touch swipe support
            let startX = 0;
            let endX = 0;
            let touchStartTime = 0;
            
            gallery.addEventListener('touchstart', (e) => {
                startX = e.touches[0].clientX;
                touchStartTime = Date.now();
            });
            
            gallery.addEventListener('touchend', (e) => {
                if (isTransitioning) return;
                
                endX = e.changedTouches[0].clientX;
                const diff = startX - endX;
                const touchDuration = Date.now() - touchStartTime;
                
                // Only trigger if touch has sufficient distance and time
                if (Math.abs(diff) > 50 && touchDuration < 500) {
                    if (diff > 0) {
                        nextBand();
                    } else {
                        prevBand();
                    }
                }
            });
            
            // Mouse wheel support
            let wheelTimeout;
            gallery.addEventListener('wheel', (e) => {
                e.preventDefault();
                
                if (isTransitioning) return;
                
                // Clear previous wheel events
                clearTimeout(wheelTimeout);
                
                wheelTimeout = setTimeout(() => {
                    if (e.deltaY > 0) {
                        nextBand();
                    } else {
                        prevBand();
                    }
                }, 100);
            });
            
            // Initialize
            renderBendingGallery();
            
            // Add initial load animation to avoid jitter
            setTimeout(() => {
                updateCardPositions();
            }, 100);
            
            // Auto-play
            let autoPlayInterval;
            
            function startAutoPlay() {
                autoPlayInterval = setInterval(() => {
                    if (!isTransitioning) {
                        nextBand();
                    }
                }, 5000);
            }
            
            function stopAutoPlay() {
                if (autoPlayInterval) {
                    clearInterval(autoPlayInterval);
                }
            }
            
            // Pause auto-play on user interaction
            gallery.addEventListener('mouseenter', stopAutoPlay);
            gallery.addEventListener('touchstart', stopAutoPlay);
            
            // Resume auto-play when user leaves
            gallery.addEventListener('mouseleave', startAutoPlay);
            gallery.addEventListener('touchend', () => {
                setTimeout(startAutoPlay, 1000);
            });
            
            // Start auto-play
            startAutoPlay();
        }
        
        function handleCometCardTilt(e) {
            const card = e.currentTarget;
            const rect = card.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            // Calculate mouse relative position on card (0-1)
            const xPercent = x / rect.width;
            const yPercent = y / rect.height;
            
            // Calculate tilt angle (based on [Aceternity UI Comet Card](https://ui.aceternity.com/components/comet-card))
            const rotateX = (yPercent - 0.5) * -17.5; // Vertical tilt
            const rotateY = (xPercent - 0.5) * 17.5;  // Horizontal tilt
            
            // Calculate translation distance
            const translateX = (xPercent - 0.5) * 20;
            const translateY = (yPercent - 0.5) * 20;
            
            // Apply 3D transform
            card.style.transform = `
                perspective(1000px) 
                rotateX(${rotateX}deg) 
                rotateY(${rotateY}deg)
                translateX(${translateX}px) 
                translateY(${translateY}px)
                scale3d(1.02, 1.02, 1.02)
            `;
            
            // Add parallax effect to card content
            const content = card.querySelector('.comet-card-content');
            if (content) {
                const icon = content.querySelector('.summary-icon');
                const number = content.querySelector('.summary-number');
                const label = content.querySelector('.summary-label');
                const description = content.querySelector('.summary-description');
                
                // Different elements have different parallax depths
                if (icon) icon.style.transform = `translateZ(${30 + rotateY * 0.5}px)`;
                if (number) number.style.transform = `translateZ(${25 + rotateY * 0.4}px)`;
                if (label) label.style.transform = `translateZ(${20 + rotateY * 0.3}px)`;
                if (description) description.style.transform = `translateZ(${15 + rotateY * 0.2}px)`;
            }
            
            // Add dynamic shadow effect
            const shadowX = rotateY * 0.5;
            const shadowY = rotateX * 0.5;
            const shadowBlur = 20 + Math.abs(rotateX) * 0.5;
            
            card.style.boxShadow = `
                ${shadowX}px ${shadowY}px ${shadowBlur}px rgba(0, 0, 0, 0.15),
                0 0 30px rgba(102, 126, 234, 0.1)
            `;
        }
        
        function resetCometCardTilt(e) {
            const card = e.currentTarget;
            const content = card.querySelector('.comet-card-content');
            
            // Reset card transform
            card.style.transform = 'perspective(1000px) rotateX(0deg) rotateY(0deg) translateX(0px) translateY(0px) scale3d(1, 1, 1)';
            card.style.boxShadow = '0 4px 20px rgba(0, 0, 0, 0.08)';
            
            // Reset content parallax
            if (content) {
                const icon = content.querySelector('.summary-icon');
                const number = content.querySelector('.summary-number');
                const label = content.querySelector('.summary-label');
                const description = content.querySelector('.summary-description');
                
                if (icon) icon.style.transform = 'translateZ(20px)';
                if (number) number.style.transform = 'translateZ(15px)';
                if (label) label.style.transform = 'translateZ(10px)';
                if (description) description.style.transform = 'translateZ(5px)';
            }
        }
        
        // Vinyl music player functionality - completely standalone version
        function initVinylMusicPlayer() {
            console.log('üéµ Initializing vinyl music player - completely standalone version...');
            
            // Directly find music genre buttons
            const genreOptions = document.querySelectorAll('.genre-option');
            console.log('üéº Number of music genre buttons found:', genreOptions.length);
            
            if (genreOptions.length === 0) {
                console.error('‚ùå Music genre buttons not found!');
                return;
            }
            
            // Music track data
            const musicData = {
                rock: {
                    title: 'Classic Rock Hits',
                    artist: 'Various Artists',
                    duration: '4:32',
                    color: '#e53e3e'
                },
                pop: {
                    title: 'Pop Music Collection',
                    artist: 'Top Artists',
                    duration: '3:45',
                    color: '#3182ce'
                },
                metal: {
                    title: 'Heavy Metal Anthems',
                    artist: 'Metal Legends',
                    duration: '5:18',
                    color: '#805ad5'
                }
            };
            
            let currentGenre = '';
            
            // Music genre selection - core functionality
            console.log('üéº Starting to bind music genre selection events...');
            genreOptions.forEach((option, index) => {
                console.log(`üéº Binding event for button ${index + 1}:`, option.dataset.genre);
                
                // Remove all existing event listeners
                const newOption = option.cloneNode(true);
                option.parentNode.replaceChild(newOption, option);
                
                // Re-bind events
                newOption.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const genre = this.dataset.genre;
                    console.log(`üéº Button clicked! Selected music genre: ${genre}`);
                    
                    // Add click feedback
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);
                    
                    // Update button state
                    genreOptions.forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    currentGenre = genre;
                    
                    // Update display information
                    const trackTitle = document.getElementById('trackTitle');
                    const trackArtist = document.getElementById('trackArtist');
                    const totalTime = document.getElementById('totalTime');
                    
                    if (trackTitle && trackArtist && totalTime) {
                        const data = musicData[genre];
                        if (data) {
                            trackTitle.textContent = data.title;
                            trackArtist.textContent = data.artist;
                            totalTime.textContent = data.duration;
                            console.log(`üéº Updated display information: ${data.title} - ${data.artist}`);
                        }
                    }
                    
                    // Update disc label
                    const artistName = document.querySelector('.artist-name');
                    const songTitle = document.querySelector('.song-title');
                    if (artistName && songTitle) {
                        const data = musicData[genre];
                        if (data) {
                            artistName.textContent = data.artist;
                            songTitle.textContent = data.title;
                        }
                    }
                    
                    // Show selection confirmation
                    showGenreSelectionFeedback(genre);
                });
                
                console.log(`üéº Button ${index + 1} event binding completed`);
            });
            
            console.log('üéº All music genre selection events bound');
            
            // Platform links
            const platformLinks = document.querySelectorAll('.platform-link');
            platformLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const platform = this.dataset.platform;
                    console.log(`üåê Platform link clicked: ${platform}`);
                    
                    if (!currentGenre) {
                        alert('Please select a music genre first!');
                        return;
                    }
                    
                    // Open corresponding music platform
                    const platformUrls = {
                        spotify: 'https://open.spotify.com/',
                        youtube: 'https://www.youtube.com/',
                        apple: 'https://music.apple.com/',
                        amazon: 'https://music.amazon.com/'
                    };
                    
                    const url = platformUrls[platform];
                    if (url) {
                        window.open(url, '_blank');
                        console.log(`üåê Opening platform: ${platform}`);
                    }
                });
            });
            

            
            console.log('üéµ Vinyl player initialization completed - completely standalone version');
            console.log('üéµ Music genre buttons should now work properly!');
        }
        
        // Initialize all functionality after page load completes
        window.addEventListener('load', function() {
            console.log('üöÄ Page loaded, preparing to initialize all functionality...');
            
            // Immediately check if buttons exist
            const genreButtons = document.querySelectorAll('.genre-option');
            const travelButton = document.querySelector('.stats-button');
            
            console.log('üîç Immediate check - number of music genre buttons found:', genreButtons.length);
            console.log('üîç Immediate check - travel details button found:', !!travelButton);
            
            if (genreButtons.length === 0) {
                console.error('‚ùå Music genre buttons not found when page loaded!');
            }
            
            if (!travelButton) {
                console.error('‚ùå Travel details button not found when page loaded!');
            }
            
            // Immediately initialize player
            console.log('üéµ Immediately initializing Vinyl Music Player...');
            try {
                initVinylMusicPlayer();
                console.log('‚úÖ Music player initialized successfully');
            } catch (error) {
                console.error('‚ùå Music player initialization failed:', error);
            }
            
            // Delay initialization of other features to ensure DOM is fully loaded
            setTimeout(function() {
                console.log('‚è∞ Starting to initialize other features after 1 second delay...');
                
                // Initialize travel details button
                if (travelButton) {
                    initTravelDetailsButton();
                }
                
                // Initialize tech travel map
                console.log('üó∫Ô∏è Starting to initialize tech travel map...');
                setTimeout(() => {
                    initTechTravelMap();
                }, 500);
            }, 1000);
            
            // Additional check: ensure music player is working properly
            setTimeout(() => {
                console.log('üîç Additional check of music player status...');
                const audio = document.getElementById('vinylAudio');
                const genreOptions = document.querySelectorAll('.genre-option');
                
                if (audio) {
                    console.log('‚úÖ Audio element exists');
                    console.log('Audio source:', audio.src);
                    console.log('Audio controls:', audio.controls);
                } else {
                    console.error('‚ùå Audio element does not exist');
                }
                
                if (genreOptions.length > 0) {
                    console.log('‚úÖ Music genre buttons exist, count:', genreOptions.length);
                    genreOptions.forEach((btn, index) => {
                        console.log(`Button ${index + 1}:`, btn.dataset.genre, btn.textContent.trim());
                    });
                } else {
                    console.error('‚ùå Music genre buttons do not exist');
                }
            }, 3000);
        });
        
        // Map functionality has been removed, waiting for re-implementation
        
        // Create complete 110m Physical map effect - based on code we did before
        // Initialize tech travel map
        function initTechTravelMap() {
            console.log('üó∫Ô∏è Initializing tech travel map...');
            
            const container = document.getElementById('interactiveGlobe');
            if (!container) {
                console.error('‚ùå Map container does not exist');
                return;
            }
            
            console.log('‚úÖ Found map container:', container);
            
            try {
                // Wait for TechTravelMap class to load
                if (typeof TechTravelMap === 'undefined') {
                    console.log('‚è≥ Waiting for TechTravelMap class to load...');
                    setTimeout(() => {
                        initTechTravelMap();
                    }, 1000);
                    return;
                }
                
                console.log('‚úÖ TechTravelMap class available, starting to create map instance...');
                
                // Create tech travel map instance
                const techMap = new TechTravelMap(container, {
                    // Can add custom configuration here
                });
                
                console.log('‚úÖ Tech travel map initialization completed');
                
                // Store map instance for later use
                window.techMapInstance = techMap;
                
            } catch (error) {
                console.error('‚ùå Map initialization failed:', error);
                // Use fallback solution
                showGlobeFallback(container);
            }
        }
        
        // Globe fallback solution
        function showGlobeFallback(container) {
            console.log('üîÑ Displaying Globe fallback solution...');
            
            container.innerHTML = `
                <div style="
                    width: 100%;
                    height: 100%;
                    min-height: 400px;
                    background: radial-gradient(circle at center, #1e293b 0%, #0f172a 100%);
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: white;
                    text-align: center;
                    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
                    position: relative;
                    overflow: hidden;
                ">
                    <div style="position: relative; z-index: 2;">
                        <div style="font-size: 64px; margin-bottom: 20px;">üåç</div>
                        <div style="font-size: 24px; font-weight: bold; margin-bottom: 12px;">Interactive Globe</div>
                        <div style="font-size: 16px; opacity: 0.8; margin-bottom: 8px;">14 Travel Destinations</div>
                        <div style="font-size: 14px; opacity: 0.6;">Age 3-15 Journey</div>
                    </div>
                    <div style="
                        position: absolute;
                        width: 200%;
                        height: 200%;
                        background: conic-gradient(from 0deg, transparent, rgba(59, 130, 246, 0.3), transparent);
                        animation: rotate 20s linear infinite;
                        top: -50%;
                        left: -50%;
                    "></div>
                    
                    <!-- Travel Markers on Fallback Globe -->
                    <div style="position: absolute; top: 20%; left: 30%; width: 8px; height: 8px; background: #0ea5e9; border-radius: 50%; animation: pulse 2s infinite;"></div>
                    <div style="position: absolute; top: 25%; right: 35%; width: 8px; height: 8px; background: #8b5cf6; border-radius: 50%; animation: pulse 2s infinite 0.5s;"></div>
                    <div style="position: absolute; bottom: 30%; left: 40%; width: 8px; height: 8px; background: #06d6a0; border-radius: 50%; animation: pulse 2s infinite 1s;"></div>
                    <div style="position: absolute; bottom: 35%; right: 25%; width: 8px; height: 8px; background: #f72585; border-radius: 50%; animation: pulse 2s infinite 1.5s;"></div>
                </div>
                <style>
                    @keyframes rotate {
                        from { transform: rotate(0deg); }
                        to { transform: rotate(360deg); }
                    }
                    @keyframes pulse {
                        0%, 100% { transform: scale(1); opacity: 1; }
                        50% { transform: scale(1.5); opacity: 0.7; }
                    }
                </style>
            `;
            
            console.log('‚úÖ Globe fallback solution displayed');
        }
        
        // Add DOMContentLoaded event as fallback
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üìÑ DOM content loaded');
            
            // Try to initialize player immediately
            if (typeof initVinylMusicPlayer === 'function') {
                console.log('üéµ Immediately initializing player after DOM loaded...');
                try {
                    initVinylMusicPlayer();
                    console.log('‚úÖ Player initialized successfully');
                } catch (error) {
                    console.error('‚ùå Player initialization failed:', error);
                }
            } else {
                console.log('‚è≥ Player function not yet defined, waiting for page load to complete...');
            }
            
            // Initialize simple test player
            initSimpleTestPlayer();
        });
        
        // Simple test player
        function initSimpleTestPlayer() {
            console.log('üéµ Initializing simple test player...');
            
            const testAudio = document.getElementById('testAudio');
            const debugTestBtn = document.getElementById('debugTestBtn');
            const debugOutput = document.getElementById('debugOutput');
            
            if (!testAudio) {
                console.error('‚ùå Test audio element not found');
                return;
            }
            
            if (!debugTestBtn || !debugOutput) {
                console.error('‚ùå Debug button or output area not found');
                return;
            }
            
            // Test button click event
            debugTestBtn.addEventListener('click', function() {
                console.log('üîß Debug test button clicked');
                
                // Check test audio status
                const audioStatus = `
                    <div>üéµ Test player status:</div>
                    <div>- Test audio element: ${!!testAudio ? '‚úÖ Exists' : '‚ùå Does not exist'}</div>
                    <div>- Audio source: ${testAudio.src}</div>
                    <div>- Audio status: ${testAudio.paused ? '‚è∏ Paused' : '‚ñ∂Ô∏è Playing'}</div>
                    <div>- Audio duration: ${testAudio.duration || 'Unknown'}</div>
                    <div>- Audio ready state: ${testAudio.readyState}</div>
                `;
                
                debugOutput.innerHTML = audioStatus;
                
                // Try to play test audio
                try {
                    testAudio.play().then(() => {
                        debugOutput.innerHTML += '<div style="color: green; margin-top: 10px;">‚úÖ Test audio played successfully!</div>';
                    }).catch(err => {
                        debugOutput.innerHTML += `<div style="color: red; margin-top: 10px;">‚ùå Test audio playback failed: ${err.message}</div>`;
                    });
                } catch (error) {
                    debugOutput.innerHTML += `<div style="color: red; margin-top: 10px;">‚ùå Test audio playback exception: ${error.message}</div>`;
                }
            });
            
            // Test audio event listeners
            testAudio.addEventListener('loadstart', () => console.log('üîÑ Test audio started loading'));
            testAudio.addEventListener('canplay', () => console.log('‚úÖ Test audio can play'));
            testAudio.addEventListener('canplaythrough', () => console.log('‚úÖ Test audio can play smoothly'));
            testAudio.addEventListener('error', (e) => console.error('‚ùå Test audio loading error:', e));
            
            console.log('‚úÖ Simple test player initialization completed');
        }
        
        // Button click ripple effect
        document.addEventListener('DOMContentLoaded', function() {
            const statsButton = document.querySelector('.stats-button');
            
            if (statsButton) {
                statsButton.addEventListener('click', function(e) {
                    // Create ripple effect
                    const ripple = document.createElement('span');
                    const rect = this.getBoundingClientRect();
                    const size = Math.max(rect.width, rect.height);
                    const x = e.clientX - rect.left - size / 2;
                    const y = e.clientY - rect.top - size / 2;
                    
                    ripple.style.cssText = `
                        position: absolute;
                        width: ${size}px;
                        height: ${size}px;
                        left: ${x}px;
                        top: ${y}px;
                        background: rgba(255, 255, 255, 0.3);
                        border-radius: 50%;
                        transform: scale(0);
                        animation: ripple-animation 0.6s linear;
                        pointer-events: none;
                    `;
                    
                    this.appendChild(ripple);
                    
                    // Remove ripple element after animation ends
                    setTimeout(() => {
                        ripple.remove();
                    }, 600);
                });
            }
        });
        
        // Travel details popup functionality
        function showTravelDetails() {
            console.log('üéØ showTravelDetails function called');
            
            const modal = document.getElementById('travelModal');
            console.log('üîç Searching for travelModal element:', modal);
            
            if (modal) {
                console.log('‚úÖ Found modal element, starting to display popup');
                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden'; // Prevent background scrolling
                
                // Add animation effect
                setTimeout(() => {
                    modal.classList.add('modal-active');
                    console.log('üé¨ Popup animation started');
                }, 10);
            } else {
                console.error('‚ùå travelModal element not found!');
                console.log('üîç All elements in current page:', document.querySelectorAll('*'));
            }
        }
        
        // Photo popup - Draggable Card version
        function showPhotosModal(place) {
            console.log('üì∑ Opening photo popup, place:', place);
            const modal = document.getElementById('photosModal');
            const gallery = document.getElementById('photosGallery');
            if (!modal || !gallery) return;

                        // Travel photo data - using local photo folders
            // Path mapping to correct directory "images/my photos"
            function rewritePhotoUrl(input) {
                try {
                    if (!input || typeof input !== 'string') return '';
                    
                    // Map "my photos/" to "images/my photos/"
                    let finalPath = input.replace('my photos/', 'images/my photos/');
                    
                    // Add relative path prefix
                    if (!finalPath.startsWith('./') && !finalPath.startsWith('/')) {
                        finalPath = './' + finalPath;
                    }
                    
                    // Handle special characters - do not replace anything, keep original path
                    // Let encodeURI naturally handle all special characters
                    
                    // Use encodeURI to encode spaces and other characters
                    finalPath = encodeURI(finalPath);
                    
                    console.log('rewritePhotoUrl:', {
                        input: input,
                        output: finalPath
                    });
                    
                    return finalPath;
                } catch (e) {
                    console.error('rewritePhotoUrl error:', e);
                    return input;
                }
            }
            const photoData = {
                'Thailand': [
                    { url: 'my photos/Thailand/Weixin Image_20250825230101_3.jpg', title: 'Tropical Beach', description: 'Beautiful beaches and crystal clear waters', date: '2010' },
                    { url: 'my photos/Thailand/Weixin Image_20250825230101_5.jpg', title: 'Temple Visit', description: 'Ancient temples and cultural heritage', date: '2010' },
                    { url: 'my photos/Thailand/Weixin Image_20250825230059_46.jpg', title: 'Street Food', description: 'Delicious Thai street food experience', date: '2010' },
                    { url: 'my photos/Thailand/Weixin Image_20250825230059_47.jpg', title: 'Cultural Experience', description: 'Rich Thai cultural heritage', date: '2010' },
                    { url: 'my photos/Thailand/Weixin Image_20250825230000_22.jpg', title: 'Local Life', description: 'Authentic local lifestyle', date: '2010' }
                ],
                'Taiwan': [
                    { url: 'my photos/Taiwan/Weixin Image_20250825230120_9.jpg', title: 'Mountain Views', description: 'Stunning mountain landscapes', date: '2013' },
                    { url: 'my photos/Taiwan/Weixin Image_20250825230120_10.jpg', title: 'Night Market', description: 'Vibrant night market culture', date: '2013' },
                    { url: 'my photos/Taiwan/Weixin Image_20250825230120_11.jpg', title: 'Cultural Sites', description: 'Rich cultural heritage sites', date: '2013' },
                    { url: 'my photos/Taiwan/Weixin Image_20250825230120_13.jpg', title: 'City Life', description: 'Urban exploration', date: '2013' },
                    { url: 'my photos/Taiwan/Weixin Image_20250825230120_16.jpg', title: 'Nature', description: 'Beautiful scenery', date: '2013' },
                    { url: 'my photos/Taiwan/Weixin Image_20250825230120_17.jpg', title: 'Culture', description: 'Local traditions', date: '2013' },
                    { url: 'my photos/Taiwan/Weixin Image_20250825230120_18.jpg', title: 'Food', description: 'Delicious cuisine', date: '2013' }
                ],
                "Xi'an, China": [
                    { url: 'my photos/Xi\'an/Weixin Image_20250825230100_11.jpg', title: 'Terracotta Warriors', description: 'Ancient terracotta army discovery', date: '2015' }
                ],
                'Hong Kong & Macau': [
                    { url: 'my photos/Hong Kong + Macau/Weixin Image_20250825230059_44.jpg', title: 'Victoria Harbor', description: 'Iconic harbor skyline views', date: '2016' },
                    { url: 'my photos/Hong Kong + Macau/Weixin Image_20250825230059_45.jpg', title: 'Skyline Night', description: 'Harbor nightscape', date: '2016' },
                    { url: 'my photos/Hong Kong + Macau/Weixin Image_20250825230100_10.jpg', title: 'Macau Architecture', description: 'Portuguese colonial architecture', date: '2016' },
                    { url: 'my photos/Hong Kong + Macau/Weixin Image_20250825230100_12.jpg', title: 'Street Markets', description: 'Bustling street market culture', date: '2016' }
                ],
                'Vietnam': [
                    { url: 'my photos/Vietnam/Weixin Image_20250825230101_1.jpg', title: 'Halong Bay', description: 'Majestic limestone islands', date: '2018' },
                    { url: 'my photos/Vietnam/Weixin Image_20250825230101_2.jpg', title: 'Ho Chi Minh City', description: 'Modern Vietnamese metropolis', date: '2018' },
                    { url: 'my photos/Vietnam/Weixin Image_20250825230101_4.jpg', title: 'Ancient Town', description: 'Cultural heritage', date: '2018' },
                    { url: 'my photos/Vietnam/Weixin Image_20250825230101_6.jpg', title: 'Street Food', description: 'Authentic Vietnamese cuisine', date: '2018' },
                    { url: 'my photos/Vietnam/Weixin Image_20250825230101_7.jpg', title: 'Cultural Experience', description: 'Rich Vietnamese culture', date: '2018' },
                    { url: 'my photos/Vietnam/Weixin Image_20250825230101_8.jpg', title: 'Local Life', description: 'Authentic local lifestyle', date: '2018' },
                    { url: 'my photos/Vietnam/Weixin Image_20250825230101_9.jpg', title: 'Natural Beauty', description: 'Stunning landscapes', date: '2018' }
                ],
                'Singapore & Malaysia': [
                    // Directory currently empty, using default placeholder (handled in length check below)
                ],
                'Siguniang Mountain, China': [
                    { url: 'my photos/Siguniang Mountain/Weixin Image_20250825230059_37.jpg', title: 'Snow Peaks', description: 'Four beautiful snow-capped peaks', date: '2019' },
                    { url: 'my photos/Siguniang Mountain/Weixin Image_20250825230059_38.jpg', title: 'Alpine Meadows', description: 'High altitude alpine landscapes', date: '2019' },
                    { url: 'my photos/Siguniang Mountain/Weixin Image_20250825230059_39.jpg', title: 'Mountain Hiking', description: 'Adventure hiking experience', date: '2019' },
                    { url: 'my photos/Siguniang Mountain/Weixin Image_20250825230059_40.jpg', title: 'Natural Beauty', description: 'Stunning natural scenery', date: '2019' },
                    { url: 'my photos/Siguniang Mountain/Weixin Image_20250825230059_41.jpg', title: 'High Altitude', description: 'Breathtaking mountain views', date: '2019' },
                    { url: 'my photos/Siguniang Mountain/Weixin Image_20250825230059_42.jpg', title: 'Adventure', description: 'Mountain climbing challenge', date: '2019' },
                    { url: 'my photos/Siguniang Mountain/Weixin Image_20250825230059_43.jpg', title: 'Landscape', description: 'Majestic mountain landscapes', date: '2019' }
                ],
                'Beijing, China': [
                    { url: 'my photos/Beijing/Weixin Image_20250825230100_27.jpg', title: 'Forbidden City', description: 'Imperial palace complex', date: '2019' },
                    { url: 'my photos/Beijing/Weixin Image_20250825230100_28.jpg', title: 'Great Wall', description: 'Ancient defensive structure', date: '2019' },
                    { url: 'my photos/Beijing/Weixin Image_20250825230100_29.jpg', title: 'Temple of Heaven', description: 'Sacred imperial temple', date: '2019' },
                    { url: 'my photos/Beijing/Weixin Image_20250825230100_30.jpg', title: 'Cultural Heritage', description: 'Rich Chinese history', date: '2019' },
                    { url: 'my photos/Beijing/Weixin Image_20250825230100_31.jpg', title: 'Ancient Architecture', description: 'Traditional Chinese buildings', date: '2019' },
                    { url: 'my photos/Beijing/Weixin Image_20250825230100_32.jpg', title: 'Imperial Gardens', description: 'Beautiful royal gardens', date: '2019' },
                    { url: 'my photos/Beijing/Weixin Image_20250825230100_33.jpg', title: 'Historical Sites', description: 'Important historical locations', date: '2019' },
                    { url: 'my photos/Beijing/Weixin Image_20250825230100_34.jpg', title: 'City Views', description: 'Panoramic city views', date: '2019' },
                    { url: 'my photos/Beijing/Weixin Image_20250825230059_35.jpg', title: 'Cultural Experience', description: 'Traditional Chinese culture', date: '2019' },
                    { url: 'my photos/Beijing/Weixin Image_20250825230059_36.jpg', title: 'Modern Beijing', description: 'Contemporary city life', date: '2019' }
                ],
                'Dubai, UAE': [
                    { url: 'my photos/Dubai/Weixin Image_20250825230100_23.jpg', title: 'Burj Khalifa', description: 'World\'s tallest building', date: '2019' },
                    { url: 'my photos/Dubai/Weixin Image_20250825230100_24.jpg', title: 'Desert Safari', description: 'Arabian desert adventure', date: '2019' },
                    { url: 'my photos/Dubai/Weixin Image_20250825230100_25.jpg', title: 'Palm Jumeirah', description: 'Artificial island paradise', date: '2019' },
                    { url: 'my photos/Dubai/Weixin Image_20250825230100_26.jpg', title: 'Modern Architecture', description: 'Futuristic city design', date: '2019' }
                ],
                'Yunnan & Guizhou, China': [
                    { url: 'my photos/Yunnan + Guizhou/Weixin Image_20250825230059_48.jpg', title: 'Stone Forest', description: 'Natural karst formations', date: '2021' },
                    { url: 'my photos/Yunnan + Guizhou/Weixin Image_20250825230059_49.jpg', title: 'Ethnic Villages', description: 'Traditional minority culture', date: '2021' },
                    { url: 'my photos/Yunnan + Guizhou/Weixin Image_20250825230059_50.jpg', title: 'Mountain Landscapes', description: 'Spectacular mountain views', date: '2021' }
                ],
                'Atlanta, USA': [
                    // Current directory is USA/ (currently empty), keeping default placeholder
                ]
            };

            const photos = (place && photoData[place] && photoData[place].length) ? photoData[place] : [
                { url: 'my photos/Thailand/Weixin Image_20250825230101_3.jpg', title: 'Travel Adventure', description: 'Amazing travel memories', date: '2010' },
                { url: 'my photos/Beijing/Weixin Image_20250825230100_27.jpg', title: 'Cultural Experience', description: 'Rich cultural heritage', date: '2019' },
                { url: 'my photos/Siguniang Mountain/Weixin Image_20250825230059_37.jpg', title: 'Natural Beauty', description: 'Stunning natural landscapes', date: '2019' }
            ];

            // Create Draggable Card
            console.log('Photos to display:', photos);
            gallery.innerHTML = photos.map((photo, index) => {
                const processedUrl = rewritePhotoUrl(photo.url);
                console.log(`Photo ${index}:`, photo.url, '->', processedUrl);
                
                // Test if image exists
                const testImg = new Image();
                testImg.onload = function() {
                    console.log('‚úÖ Image exists and can be loaded:', processedUrl);
                };
                testImg.onerror = function() {
                    console.error('‚ùå Image cannot be loaded:', processedUrl);
                    // Try other possible paths
                    const alternativePaths = [
                        processedUrl.replace('./images/my photos/', './images/my%20photos/'),
                        processedUrl.replace('./images/my photos/', 'images/my photos/'),
                        processedUrl.replace('./images/my photos/', 'images/my%20photos/')
                    ];
                    console.log('Trying alternative paths:', alternativePaths);
                };
                testImg.src = processedUrl;
                
                return `
                    <div class="draggable-card" data-index="${index}">
                        <img src="${processedUrl}" alt="photo-${index}" class="card-image" onerror="console.error('Failed to load image:', this.src)" onload="console.log('‚úÖ Successfully loaded:', this.src)">
                    </div>
                `;
            }).join('');

            // Initialize Draggable Card functionality
            initDraggableCards();
            
            // Add global debugging function
            window.testPhotoPath = function(photoUrl) {
                console.log('=== Testing photo path ===');
                console.log('Original path:', photoUrl);
                const processed = rewritePhotoUrl(photoUrl);
                console.log('Processed path:', processed);
                
                const testImg = new Image();
                testImg.onload = function() {
                    console.log('‚úÖ Path valid, image can be loaded');
                };
                testImg.onerror = function() {
                    console.log('‚ùå Path invalid, image cannot be loaded');
                    console.log('Attempting to access:', processed);
                };
                testImg.src = processed;
            };
            
            // Test first photo path
            if (photos.length > 0) {
                console.log('üîç Auto-testing first photo path...');
                window.testPhotoPath(photos[0].url);
            }
            
            // Test special directory paths
            console.log('üîç Testing special directory paths...');
            const specialPaths = [
                'my photos/Yunnan + Guizhou/Weixin Image_20250825230059_48.jpg',
                'my photos/Hong Kong + Macau/Weixin Image_20250825230059_44.jpg',
                'my photos/Xi\'an/Weixin Image_20250825230100_11.jpg'
            ];
            
            specialPaths.forEach(path => {
                console.log('Test path:', path);
                const processed = rewritePhotoUrl(path);
                console.log('After processing:', processed);
                
                // Test image loading
                const testImg = new Image();
                testImg.onload = function() {
                    console.log('‚úÖ Special path loaded successfully:', processed);
                };
                testImg.onerror = function() {
                    console.error('‚ùå Special path loading failed:', processed);
                    // Try to access file directly
                    console.log('Attempting direct access:', processed);
                };
                testImg.src = processed;
            });
            
            // Add a simple path test
            window.testDirectPath = function() {
                const testPath = './images/my photos/Xi\'an/Weixin Image_20250825230100_11.jpg';
                console.log('Direct path test:', testPath);
                const encodedPath = encodeURI(testPath);
                console.log('Encoded path:', encodedPath);
                
                const testImg = new Image();
                testImg.onload = function() {
                    console.log('‚úÖ Direct path test successful:', encodedPath);
                };
                testImg.onerror = function() {
                    console.error('‚ùå Direct path test failed:', encodedPath);
                };
                testImg.src = encodedPath;
            };
            
            // Add global test function
            window.testAllPaths = function() {
                console.log('=== Testing all photo paths ===');
                Object.keys(photoData).forEach(place => {
                    if (photoData[place] && photoData[place].length > 0) {
                        console.log(`\nüìç ${place}:`);
                        photoData[place].forEach((photo, idx) => {
                            const processed = rewritePhotoUrl(photo.url);
                            console.log(`  Photo ${idx}: ${photo.url} -> ${processed}`);
                        });
                    }
                });
            };

            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            setTimeout(() => modal.classList.add('modal-active'), 10);
        }

        // Initialize Draggable Card functionality
        function initDraggableCards() {
            const cards = document.querySelectorAll('.draggable-card');
            
            cards.forEach(card => {
                let isDragging = false;
                let startX, startY, startRotateX, startRotateY;
                let currentX = 0, currentY = 0;
                let currentRotateX = 0, currentRotateY = 0;

                // Mouse down event
                card.addEventListener('mousedown', (e) => {
                    isDragging = true;
                    card.classList.add('dragging');
                    
                    startX = e.clientX - currentX;
                    startY = e.clientY - currentY;
                    startRotateX = currentRotateX;
                    startRotateY = currentRotateY;
                    
                    e.preventDefault();
                });

                // Mouse move event
                document.addEventListener('mousemove', (e) => {
                    if (!isDragging) return;
                    
                    currentX = e.clientX - startX;
                    currentY = e.clientY - startY;
                    
                    // Calculate tilt angle
                    const rect = card.getBoundingClientRect();
                    const centerX = rect.left + rect.width / 2;
                    const centerY = rect.top + rect.height / 2;
                    
                    const deltaX = e.clientX - centerX;
                    const deltaY = e.clientY - centerY;
                    
                    currentRotateX = startRotateX + (deltaY / 10);
                    currentRotateY = startRotateY + (deltaX / 10);
                    
                    // Apply transform
                    card.style.transform = `translate(${currentX}px, ${currentY}px) rotateX(${currentRotateX}deg) rotateY(${currentRotateY}deg)`;
                });

                // Mouse release event
                document.addEventListener('mouseup', () => {
                    if (!isDragging) return;
                    
                    isDragging = false;
                    card.classList.remove('dragging');
                    
                    // Elastic bounce animation
                    animateCardReturn(card, currentX, currentY, currentRotateX, currentRotateY);
                });

                // Mouse hover effect
                card.addEventListener('mouseenter', () => {
                    if (!isDragging) {
                        card.style.transform = 'translateY(-8px) scale(1.02)';
                    }
                });

                card.addEventListener('mouseleave', () => {
                    if (!isDragging) {
                        card.style.transform = 'translate(0, 0) rotateX(0deg) rotateY(0deg)';
                    }
                });
            });
        }

        // Card bounce animation
        function animateCardReturn(card, x, y, rotateX, rotateY) {
            const duration = 600;
            const startTime = performance.now();
            
            function animate(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                // Use easing function
                const easeOut = 1 - Math.pow(1 - progress, 3);
                
                const currentX = x * (1 - easeOut);
                const currentY = y * (1 - easeOut);
                const currentRotateX = rotateX * (1 - easeOut);
                const currentRotateY = rotateY * (1 - easeOut);
                
                card.style.transform = `translate(${currentX}px, ${currentY}px) rotateX(${currentRotateX}deg) rotateY(${currentRotateY}deg)`;
                
                if (progress < 1) {
                    requestAnimationFrame(animate);
                } else {
                    card.style.transform = 'translate(0, 0) rotateX(0deg) rotateY(0deg)';
                }
            }
            
            requestAnimationFrame(animate);
        }

        function closePhotosModal() {
            const modal = document.getElementById('photosModal');
            if (!modal) return;
            modal.classList.remove('modal-active');
            setTimeout(() => {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }, 300);
        }

        function closeTravelModal() {
            const modal = document.getElementById('travelModal');
            if (modal) {
                modal.classList.remove('modal-active');
                setTimeout(() => {
                    modal.style.display = 'none';
                    document.body.style.overflow = 'auto'; // Restore background scrolling
                }, 300);
            }
        }
        
        // Initialize micro-animation system
        function initMicroAnimations() {
            // Add micro-animations to all interactive elements
            const interactiveElements = document.querySelectorAll('.movie-card, .emotion-reel, .timeline-reel, .genre-stat-card');
            
            interactiveElements.forEach(element => {
                // Add light wave effect on mouse enter
                element.addEventListener('mouseenter', function() {
                    this.style.transition = 'all 0.4s cubic-bezier(0.4, 0, 0.2, 1)';
                });
                
                // Add ripple effect on click
                element.addEventListener('click', function(e) {
                    const ripple = document.createElement('div');
                    ripple.style.cssText = `
                        position: absolute;
                        border-radius: 50%;
                        background: rgba(255, 255, 255, 0.3);
                        transform: scale(0);
                        animation: ripple 0.6s linear;
                        pointer-events: none;
                        z-index: 10;
                    `;
                    
                    const rect = this.getBoundingClientRect();
                    const size = Math.max(rect.width, rect.height);
                    const x = e.clientX - rect.left - size / 2;
                    const y = e.clientY - rect.top - size / 2;
                    
                    ripple.style.width = ripple.style.height = size + 'px';
                    ripple.style.left = x + 'px';
                    ripple.style.top = y + 'px';
                    
                    this.appendChild(ripple);
                    
                    setTimeout(() => ripple.remove(), 600);
                });
            });
        }
        
        // Ripple animation keyframes
        const style = document.createElement('style');
        style.textContent = `
            @keyframes ripple {
                to {
                    transform: scale(4);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);
        
        // Initialize music spectrum analyzer
        function initMusicSpectrumAnalyzer() {
            const analyzer = document.querySelector('.music-spectrum-analyzer');
            if (!analyzer) return;
            
            const controlBtns = analyzer.querySelectorAll('.control-btn');
            const spectrumBars = analyzer.querySelectorAll('.spectrum-bar');
            let currentMode = 'live';
            let animationId = null;
            
            // Data configuration for different modes
            const modeData = {
                live: {
                    rock: { base: 45, range: 15 },
                    pop: { base: 35, range: 12 },
                    metal: { base: 20, range: 10 }
                },
                peak: {
                    rock: { base: 65, range: 5 },
                    pop: { base: 55, range: 5 },
                    metal: { base: 40, range: 5 }
                },
                history: {
                    rock: { base: 50, range: 8 },
                    pop: { base: 42, range: 8 },
                    metal: { base: 30, range: 8 }
                }
            };
            
            // Initialize spectrum bar styles (add transition effects)
            spectrumBars.forEach(bar => {
                bar.style.transition = 'height 0.3s ease-out';
            });
            
            // Update spectrum bars
            function updateSpectrumBars(mode) {
                const data = modeData[mode];
                spectrumBars.forEach((bar, index) => {
                    const genres = ['rock', 'pop', 'metal'];
                    const genre = genres[index];
                    const config = data[genre];
                    
                    if (mode === 'live') {
                        // Live mode: real-time fluctuation
                        const randomValue = config.base + (Math.random() - 0.5) * config.range * 2;
                        const height = Math.max(10, Math.min(100, randomValue));
                        bar.style.height = height + '%';
                        bar.setAttribute('data-height', Math.round(height));
                        
                        // Update percentage display
                        const barValue = bar.querySelector('.bar-value');
                        if (barValue) {
                            barValue.textContent = Math.round(height) + '%';
                        }
                    } else {
                        // Peak and History modes: fixed values (smooth transition)
                        const height = config.base;
                        bar.style.height = height + '%';
                        bar.setAttribute('data-height', height);
                        
                        const barValue = bar.querySelector('.bar-value');
                        if (barValue) {
                            barValue.textContent = height + '%';
                        }
                    }
                });
            }
            
            // Start real-time animation
            let lastUpdateTime = 0;
            const updateInterval = 100; // Update every 100ms for smoother animation
            
            function startLiveAnimation() {
                if (animationId) {
                    cancelAnimationFrame(animationId);
                }
                
                function animate(currentTime) {
                    if (currentMode === 'live') {
                        // Control update frequency
                        if (currentTime - lastUpdateTime >= updateInterval) {
                            updateSpectrumBars('live');
                            lastUpdateTime = currentTime;
                        }
                        animationId = requestAnimationFrame(animate);
                    }
                }
                
                lastUpdateTime = performance.now();
                animate(lastUpdateTime);
            }
            
            // Stop animation
            function stopAnimation() {
                if (animationId) {
                    cancelAnimationFrame(animationId);
                    animationId = null;
                }
            }
            
            // Button click events
            controlBtns.forEach((btn, index) => {
                btn.addEventListener('click', function() {
                    // Remove all active classes
                    controlBtns.forEach(b => b.classList.remove('active'));
                    // Add active class to current button
                    this.classList.add('active');
                    
                    // Determine mode
                    const modes = ['live', 'peak', 'history'];
                    currentMode = modes[index];
                    
                    // Stop previous animation
                    stopAnimation();
                    
                    // Update spectrum bars
                    updateSpectrumBars(currentMode);
                    
                    // If Live mode, start animation
                    if (currentMode === 'live') {
                        startLiveAnimation();
                    }
                });
            });
            
            // Initialize: start Live mode animation
            if (controlBtns[0] && controlBtns[0].classList.contains('active')) {
                startLiveAnimation();
            }
        }
        
        // Magic Bento effect - mouse-follow tilt
        function initMagicBento() {
            // Check if mouse events are supported (desktop devices)
            if (!window.matchMedia('(pointer: fine)').matches) {
                return; // Don't apply this effect on mobile devices
            }
            
            const buttons = document.querySelectorAll('.timeline-tag, .modal-button');
            
            buttons.forEach(button => {
                let isHovering = false;
                
                button.addEventListener('mouseenter', function() {
                    isHovering = true;
                });
                
                button.addEventListener('mousemove', function(e) {
                    if (!isHovering) return;
                    
                    const rect = this.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    
                    // Calculate mouse position relative to button center (-1 to 1)
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;
                    const rotateX = (y - centerY) / centerY * -10; // Maximum tilt angle
                    const rotateY = (x - centerX) / centerX * 10;
                    
                    // Apply 3D transform
                    this.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateZ(10px)`;
                    
                    // Update light effect position
                    this.style.setProperty('--mouse-x', `${(x / rect.width) * 100}%`);
                    this.style.setProperty('--mouse-y', `${(y / rect.height) * 100}%`);
                });
                
                button.addEventListener('mouseleave', function() {
                    isHovering = false;
                    // Restore original state when mouse leaves
                    this.style.transform = 'perspective(1000px) rotateX(0deg) rotateY(0deg) translateZ(0)';
                });
            });
        }
        
        // Click overlay to close popup
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ DOM loaded, initializing popup functionality');
            
            // Initialize micro-animation system
            initMicroAnimations();
            
            // Initialize music spectrum analyzer
            initMusicSpectrumAnalyzer();
            
            // Initialize Magic Bento effect
            initMagicBento();
            
            const modal = document.getElementById('travelModal');
            const overlay = modal?.querySelector('.modal-overlay');
            
            if (overlay) {
                overlay.addEventListener('click', closePhotosModal);
                console.log('‚úÖ Overlay click event bound');
            }
            
            // ESC key to close popup
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeTravelModal();
                }
            });
            
            // Fallback: directly bind button click event
            const statsButton = document.querySelector('.stats-button');
            if (statsButton) {
                console.log('üîò Found stats-button, binding fallback click event');
                statsButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('üñ±Ô∏è Fallback event listener: button clicked');
                    showPhotosModal();
                });
            } else {
                console.error('‚ùå stats-button not found');
            }
        });
    </script>
</body>
</html>

